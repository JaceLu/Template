/*! jQuery v1.10.2 | (c) 2005, 2013 jQuery Foundation, Inc. | jquery.org/license
*/
function guid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c==="x"?r:r&3|8;return v.toString(16)})}function ReturnType(){return"*.docx;*.rar;*.mp3;*.wav;*.doc;*.txt;*.xls;*.zip;*.xlsx;*.jpg;*.png;*.pdf;*.jpeg;"}function IconType(){return"*.jpg;*.png;*.jpeg;*.gif;*.bmp"}function ToLabel(data,val,className){var color,text,prop;className||(className="zqui-label zqui-label_");val||(val=0);color=[];text=[];for(prop in data)text.push(prop),color.push(data[prop]);return val<0||val>color.length?"无效":'<label class="'+className+color[val]+'">'+text[val]+"<\/label>"}function tableNoData($container){var col=$container.find("th").length,$tbody=$container.find("tbody"),html;$tbody.empty();html='<tr class="zqui-table-nodata">                        <td colspan='+col+">暂无数据<\/td>                    <\/tr>";$tbody.append($(html))}function noData($container,content,tmplName){tmplName=tmplName||"Default";tmplName="NoData/"+tmplName;content=content||"暂无数据";$container.Render(tmplName,{Content:content})}function PageReady(act){$("body").on("pageInit.after",function(sender,tool){return act(tool)})}function ZoomInIMG(imgClass){function getImageUrl(item){return item.data("src")}function setImage(src){modalPic.modal.find("img").prop("src",src)}function tryGoStep(step){var data=modalPic.modal.data("data"),maxLength=$(imgClass).length,index=data.index;if(index+step<0)return ShowError("已经是第一张了"),!1;if(index+step>=maxLength)return ShowError("已经是最后一张了"),!1;data.url=getImageUrl($(imgClass).eq(index+step));setImage(data.url);data.index+=step}var modalPic=$.CreateModal(null,{title:"图片详情",okTitle:null,cancelTitle:"关闭",cssClass:"modal-lg",tmplName:"#PicTmpl",okEvent:function(){},init:function(div){var btnClass="zqui-btn zqui-btn_default zqui-m_l-xs",$btnCancel=div.find(".btnCancel");div.find("img").css({height:"100%",width:"100%"});$("<a class='"+btnClass+"  btnLast'>上一张<\/a>").insertBefore($btnCancel).click(function(){return tryGoStep(-1)});$("<a class='"+btnClass+"  btnNext'>下一张<\/a>").insertBefore($btnCancel).click(function(){return tryGoStep(1)});$("<a class='"+btnClass+" zqui-m_r-xs btnNext'>查看原图<\/a>").insertBefore($btnCancel).click(function(){var data=div.data("data");window.open(data.url)})}});$("body").on("click",imgClass,function(e){var $this=$(e.currentTarget),data={url:$this.data("src"),index:$this.index(imgClass)};setImage(data.url);modalPic.modal.data("data",data);modalPic.Show()})}function btnUpload(tmpl,element,parent,buttonText){var data,$fileList,fileApi,imageTextName;element||(element="#btnUpload");data=$(element).data();tmpl||(tmpl=getFileTmpl().UploadTmpl);buttonText=buttonText||"上传附件";parent||(parent=$(element).closest(".zqui-form__element"));$fileList=$(parent).find(".fileList");fileApi=new Sail.ApiHelper(data.api||"File");$(element).uploadifive({width:100,height:30,uploadScript:fileApi.GetApi("UploadFile"),fileType:data.type||"*.docx;*.rar;*.mp3;*.wav;*.doc;*.txt;*.xls;*.zip;*.xlsx;*.jpg;*.png;*.pdf;*.jpeg;",fileSizeLimit:data.size||"5MB",buttonText:"<span>"+buttonText+"<\/span>",multi:!1,onUploadComplete:function(file,data){var result=JSON.parse(data),files;result.IsSuccess?(files=$(element).data("files"),files.push(result.Data),console.log(files),files.length>=10&&$(element).uploadifive("disable",!0),$fileList.html(tmpl.render(files))):MsgBox.Error(result.Msg)}});$(element).on("onUploadError",function(sender,errorMsg,errorType,$data){errorType=="FILE_SIZE_LIMIT_EXCEEDED"&&MsgBox.Error("文件上传出错,文件大小不能超过"+$data.settings.fileSizeLimitText)});$(element).data("files",[]);$(".uploadifive-queue").hide();imageTextName=".zqui-upload__name";$($fileList).on("click",imageTextName,function(){return $($fileList).find(imageTextName).removeClass(Active.className),$(this).addClass(Active.className),!1}).on("blur",imageTextName,function(){var $this=$(this),id=$this.data("fileid"),value=$this.val();id&&($this.prop("readonly",!0),$.post(fileApi.GetApi("Save/")+id,{"":value},function(result){$this.prop("readonly",!1);ShowMessage(result)}))}).on("click",function(){$(parent).find(imageTextName).removeClass("active")});$($fileList).on("click",".btnRemove",function(){var index=$($fileList).find(".btnRemove").index($(this)),images=$(element).data("files");images||(images=[]);images.splice(index,1);$fileList.html(tmpl.render(images))})}function getFileTmpl(api){return api===void 0&&(api="file"),{UploadTmpl:$.templates('<div class="zqui-upload__item">                                    <div class="zqui-upload__bd">                                        {{>FileName}}                                    <\/div>                                    <div class="zqui-upload__ft">                                        <a class="zqui-text_danger btnRemove"><i class="icon icon-trash"><\/i><\/a>                                    <\/div>                                <\/div>'),ViewTmp:$.templates('<div class="zqui-upload__item">                                    <div class="zqui-upload__bd">                                        <a class="zqui-upload__name">{{>DisPlayName}}<\/a>                                    <\/div>                                    <div class="zqui-upload__ft">                                        <a class="zqui-text_green" href="/api/'+api+'/DownLoad?id={{>FileDbId}}">下载<\/a>                                    <\/div>\n                                <\/div>'),ImageViewTmpl:$.templates('<div class="zqui-upload__item">                                       <div class="zqui-upload__hd">                                           <a target="_blank" href="{{>FilePath}}"><img src="{{>FilePath}}"><\/a>                                       <\/div>                                       <div class="zqui-upload__bd">                                          <a class="zqui-upload__name">{{>DisPlayName}}<\/a>                                       <\/div>                                   <\/div>'),UploadImageTmpl:$.templates('<div class="zqui-upload__item">                                       <div class="zqui-upload__hd">                                           <a target="_blank" href="{{>FilePath}}"><img src="{{>FilePath}}"><\/a>                                       <\/div>                                    <div class="zqui-upload__bd">                                       <textarea data-fileId="{{>FileDbId}}" class="zqui-upload__name">{{>DisPlayName}}<\/textarea>                                    <\/div>                                    <div class="zqui-upload__ft">                                        <a class="zqui-text_danger btnRemove">删除<\/a>                                    <\/div>                                <\/div>'),IconTmpl:$.templates('<img src="{{>FilePath}}">')}}function slimScroll(target){target=target||".zqui-tray__cell.mainContent .treeview";$(window).resize(function(){var windowHeight=$(window).height()-150;$(target).slimScroll({height:windowHeight,railVisible:!0})}).trigger("resize")}var DateTime,JCookies,MsgBox,NumberHelper,StringHelper,Sail,validationEngine,__extends,_this,UploadTmpls,$$,ModelHelper,Active,ChooseModal;(function(e,t){function M(e){var t=e.length,n=x.type(e);return x.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function F(e){var t=O[e]={};return x.each(e.match(T)||[],function(e,n){t[n]=!0}),t}function R(e,n,r,i){if(x.acceptData(e)){var o,a,s=x.expando,l=e.nodeType,u=l?x.cache:e,c=l?e[s]:e[s]&&s;if(c&&u[c]&&(i||u[c].data)||r!==t||"string"!=typeof n)return c||(c=l?e[s]=p.pop()||x.guid++:s),u[c]||(u[c]=l?{}:{toJSON:x.noop}),("object"==typeof n||"function"==typeof n)&&(i?u[c]=x.extend(u[c],n):u[c].data=x.extend(u[c].data,n)),a=u[c],i||(a.data||(a.data={}),a=a.data),r!==t&&(a[x.camelCase(n)]=r),"string"==typeof n?(o=a[n],null==o&&(o=a[x.camelCase(n)])):o=a,o}}function W(e,t,n){if(x.acceptData(e)){var r,i,o=e.nodeType,a=o?x.cache:e,s=o?e[x.expando]:x.expando;if(a[s]){if(t&&(r=n?a[s]:a[s].data)){for(x.isArray(t)?t=t.concat(x.map(t,x.camelCase)):(t in r)?t=[t]:(t=x.camelCase(t),t=(t in r)?[t]:t.split(" ")),i=t.length;i--;)delete r[t[i]];if(n?!I(r):!x.isEmptyObject(r))return}(n||(delete a[s].data,I(a[s])))&&(o?x.cleanData([e],!0):x.support.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}function $(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(P,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:B.test(r)?x.parseJSON(r):r}catch(o){}x.data(e,n,r)}else r=t}return r}function I(e){for(var t in e)if(("data"!==t||!x.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function it(){return!0}function ot(){return!1}function at(){try{return a.activeElement}catch(e){}}function pt(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function ft(e,t,n){if(x.isFunction(t))return x.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return x.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(st.test(t))return x.filter(t,e,n);t=x.filter(t,e)}return x.grep(e,function(e){return x.inArray(e,t)>=0!==n})}function dt(e){var t=ht.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Lt(e,t){return x.nodeName(e,"table")&&x.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function Ht(e){return e.type=(null!==x.find.attr(e,"type"))+"/"+e.type,e}function qt(e){var t=Et.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function _t(e,t){for(var n,r=0;null!=(n=e[r]);r++)x._data(n,"globalEval",!t||x._data(t[r],"globalEval"))}function Mt(e,t){if(1===t.nodeType&&x.hasData(e)){var n,r,i,o=x._data(e),a=x._data(t,o),s=o.events;if(s){delete a.handle;a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)x.event.add(t,n,s[n][r])}a.data&&(a.data=x.extend({},a.data))}}function Ot(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!x.support.noCloneEvent&&t[x.expando]){i=x._data(t);for(r in i.events)x.removeEvent(t,r,i.handle);t.removeAttribute(x.expando)}"script"===n&&t.text!==e.text?(Ht(t).text=e.text,qt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),x.support.html5Clone&&e.innerHTML&&!x.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Ct.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function Ft(e,n){var r,o,a=0,s=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!s)for(s=[],r=e.childNodes||e;null!=(o=r[a]);a++)!n||x.nodeName(o,n)?s.push(o):x.merge(s,Ft(o,n));return n===t||n&&x.nodeName(e,n)?x.merge([e],s):s}function Bt(e){Ct.test(e.type)&&(e.defaultChecked=e.checked)}function tn(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;i--;)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,"none"===x.css(e,"display")||!x.contains(e.ownerDocument,e)}function rn(e,t){for(var n,r,i,o=[],a=0,s=e.length;s>a;a++)r=e[a],r.style&&(o[a]=x._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(o[a]=x._data(r,"olddisplay",ln(r.nodeName)))):o[a]||(i=nn(r),(n&&"none"!==n||!i)&&x._data(r,"olddisplay",i?n:x.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function on(e,t,n){var r=Vt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function an(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=x.css(e,n+Zt[o],!0,i)),r?("content"===n&&(a-=x.css(e,"padding"+Zt[o],!0,i)),"margin"!==n&&(a-=x.css(e,"border"+Zt[o]+"Width",!0,i))):(a+=x.css(e,"padding"+Zt[o],!0,i),"padding"!==n&&(a+=x.css(e,"border"+Zt[o]+"Width",!0,i)));return a}function sn(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Rt(e),a=x.support.boxSizing&&"border-box"===x.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=Wt(e,t,o),(0>i||null==i)&&(i=e.style[t]),Yt.test(i))return i;r=a&&(x.support.boxSizingReliable||i===e.style[t]);i=parseFloat(i)||0}return i+an(e,t,n||(a?"border":"content"),r,o)+"px"}function ln(e){var t=a,n=Gt[e];return n||(n=un(e,t),"none"!==n&&n||(Pt=(Pt||x("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Pt[0].contentWindow||Pt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=un(e,t),Pt.detach()),Gt[e]=n),n}function un(e,t){var n=x(t.createElement(e)).appendTo(t.body),r=x.css(n[0],"display");return n.remove(),r}function gn(e,t,n,r){var i;if(x.isArray(t))x.each(t,function(t,i){n||pn.test(e)?r(e,i):gn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==x.type(t))r(e,t);else for(i in t)gn(e+"["+i+"]",t[i],n,r)}function Hn(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(T)||[];if(x.isFunction(n))while(r=o[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,n,r,i){function s(l){var u;return o[l]=!0,x.each(e[l]||[],function(e,l){var c=l(n,r,i);return"string"!=typeof c||a||o[c]?a?!(u=c):t:(n.dataTypes.unshift(c),s(c),!1)}),u}var o={},a=e===jn;return s(n.dataTypes[0])||!o["*"]&&s("*")}function _n(e,n){var r,i,o=x.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&x.extend(!0,e,r),e}function Mn(e,n,r){for(var i,o,a,s,l=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),o===t&&(o=e.mimeType||n.getResponseHeader("Content-Type"));if(o)for(s in l)if(l[s]&&l[s].test(o)){u.unshift(s);break}if(u[0]in r)a=u[0];else{for(s in r){if(!u[0]||e.converters[s+" "+u[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==u[0]&&u.unshift(a),r[a]):t}function On(e,t,n,r){var i,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=u[l+" "+o]||u["* "+o],!a)for(i in u)if(s=i.split(" "),s[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[i]:u[i]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(p){return{state:"parsererror",error:a?p:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function In(){try{return new e.XMLHttpRequest}catch(t){}}function zn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Kn(){return setTimeout(function(){Xn=t}),Xn=x.now()}function Zn(e,t,n){for(var r,i=(Qn[t]||[]).concat(Qn["*"]),o=0,a=i.length;a>o;o++)if(r=i[o].call(n,t,e))return r}function er(e,t,n){var r,i,o=0,a=Gn.length,s=x.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=Xn||Kn(),n=Math.max(0,u.startTime+u.duration-t),r=n/u.duration||0,o=1-r,a=0,l=u.tweens.length;l>a;a++)u.tweens[a].run(o);return s.notifyWith(e,[u,o,n]),1>o&&l?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Kn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=x.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)u.tweens[n].run(1);return t?s.resolveWith(e,[u,t]):s.rejectWith(e,[u,t]),this}}),c=u.props;for(tr(c,u.opts.specialEasing);a>o;o++)if(r=Gn[o].call(u,e,c,u.opts))return r;return x.map(c,Zn,u),x.isFunction(u.opts.start)&&u.opts.start.call(e,u),x.fx.timer(x.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function tr(e,t){var n,r,i,o,a;for(n in e)if(r=x.camelCase(n),i=t[r],o=e[n],x.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=x.cssHooks[r],a&&"expand"in a){o=a.expand(o);delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function nr(e,t,n){var r,i,o,a,s,l,u=this,c={},p=e.style,f=e.nodeType&&nn(e),d=x._data(e,"fxshow");n.queue||(s=x._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--;x.queue(e,"fx").length||s.empty.fire()})}));1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===x.css(e,"display")&&"none"===x.css(e,"float")&&(x.support.inlineBlockNeedsLayout&&"inline"!==ln(e.nodeName)?p.zoom=1:p.display="inline-block"));n.overflow&&(p.overflow="hidden",x.support.shrinkWrapBlocks||u.always(function(){p.overflow=n.overflow[0];p.overflowX=n.overflow[1];p.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],Vn.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(f?"hide":"show"))continue;c[r]=d&&d[r]||x.style(e,r)}if(!x.isEmptyObject(c)){d?"hidden"in d&&(f=d.hidden):d=x._data(e,"fxshow",{});o&&(d.hidden=!f);f?x(e).show():u.done(function(){x(e).hide()});u.done(function(){var t;x._removeData(e,"fxshow");for(t in c)x.style(e,t,c[t])});for(r in c)a=Zn(f?d[r]:0,r,u),r in d||(d[r]=a.start,f&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function or(e){return x.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var n,r,i=typeof t,o=e.location,a=e.document,s=a.documentElement,l=e.jQuery,u=e.$,c={},p=[],f="1.10.2",d=p.concat,h=p.push,g=p.slice,m=p.indexOf,y=c.toString,v=c.hasOwnProperty,b=f.trim,x=function(e,t){return new x.fn.init(e,t,r)},w=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=/\S+/g,C=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,N=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,k=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,E=/^[\],:{}\s]*$/,S=/(?:^|:|,)(?:\s*\[)+/g,A=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,j=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,D=/^-ms-/,L=/-([\da-z])/gi,H=function(e,t){return t.toUpperCase()},q=function(e){(a.addEventListener||"load"===e.type||"complete"===a.readyState)&&(_(),x.ready())},_=function(){a.addEventListener?(a.removeEventListener("DOMContentLoaded",q,!1),e.removeEventListener("load",q,!1)):(a.detachEvent("onreadystatechange",q),e.detachEvent("onload",q))},O,B,P,Fn,Bn,Pn,Rn,Wn,$n;x.fn=x.prototype={jquery:f,constructor:x,init:function(e,n,r){var i,o;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof x?n[0]:n,x.merge(this,x.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:a,!0)),k.test(i[1])&&x.isPlainObject(n))for(i in n)x.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(o=a.getElementById(i[2]),o&&o.parentNode){if(o.id!==i[2])return r.find(e);this.length=1;this[0]=o}return this.context=a,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):x.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),x.makeArray(e,this))},selector:"",length:0,toArray:function(){return g.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return x.each(this,e,t)},ready:function(e){return x.ready.promise().done(e),this},slice:function(){return this.pushStack(g.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(x.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:h,sort:[].sort,splice:[].splice};x.fn.init.prototype=x.fn;x.extend=x.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},l=2),"object"==typeof s||x.isFunction(s)||(s={}),u===l&&(s=this,--l);u>l;l++)if(null!=(o=arguments[l]))for(i in o)e=s[i],r=o[i],s!==r&&(c&&r&&(x.isPlainObject(r)||(n=x.isArray(r)))?(n?(n=!1,a=e&&x.isArray(e)?e:[]):a=e&&x.isPlainObject(e)?e:{},s[i]=x.extend(c,a,r)):r!==t&&(s[i]=r));return s};x.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===x&&(e.$=u),t&&e.jQuery===x&&(e.jQuery=l),x},isReady:!1,readyWait:1,holdReady:function(e){e?x.readyWait++:x.ready(!0)},ready:function(e){if(e===!0?!--x.readyWait:!x.isReady){if(!a.body)return setTimeout(x.ready);x.isReady=!0;e!==!0&&--x.readyWait>0||(n.resolveWith(a,[x]),x.fn.trigger&&x(a).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===x.type(e)},isArray:Array.isArray||function(e){return"array"===x.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?c[y.call(e)]||"object":typeof e},isPlainObject:function(e){var n;if(!e||"object"!==x.type(e)||e.nodeType||x.isWindow(e))return!1;try{if(e.constructor&&!v.call(e,"constructor")&&!v.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}if(x.support.ownLast)for(n in e)return v.call(e,n);for(n in e);return n===t||v.call(e,n)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw Error(e);},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1);t=t||a;var r=k.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=x.buildFragment([e],t,i),i&&x(i).remove(),x.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=x.trim(n),n&&E.test(n.replace(A,"@").replace(j,"]").replace(S,"")))?Function("return "+n)():(x.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||x.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&x.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(D,"ms-").replace(L,H)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=M(e);if(n){if(a){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(a){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:b&&!b.call("﻿ ")?function(e){return null==e?"":b.call(e)}:function(e){return null==e?"":(e+"").replace(C,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?x.merge(n,"string"==typeof e?[e]:e):h.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(m)return m.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if("number"==typeof r)for(;r>o;o++)e[i++]=n[o];else while(n[o]!==t)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,a=M(e),s=[];if(a)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(s[s.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(s[s.length]=r);return d.apply([],s)},guid:1,proxy:function(e,n){var r,i,o;return"string"==typeof n&&(o=e[n],n=e,e=o),x.isFunction(e)?(r=g.call(arguments,2),i=function(){return e.apply(n||this,r.concat(g.call(arguments)))},i.guid=e.guid=e.guid||x.guid++,i):t},access:function(e,n,r,i,o,a,s){var l=0,u=e.length,c=null==r;if("object"===x.type(r)){o=!0;for(l in r)x.access(e,n,l,r[l],!0,a,s)}else if(i!==t&&(o=!0,x.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(x(e),n)})),n))for(;u>l;l++)n(e[l],r,s?i:i.call(e[l],l,n(e[l],r)));return o?e:c?n.call(e):u?n(e[0],r):a},now:function(){return(new Date).getTime()},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}});x.ready.promise=function(t){if(!n)if(n=x.Deferred(),"complete"===a.readyState)setTimeout(x.ready);else if(a.addEventListener)a.addEventListener("DOMContentLoaded",q,!1),e.addEventListener("load",q,!1);else{a.attachEvent("onreadystatechange",q);e.attachEvent("onload",q);var r=!1;try{r=null==e.frameElement&&a.documentElement}catch(i){}r&&r.doScroll&&function o(){if(!x.isReady){try{r.doScroll("left")}catch(e){return setTimeout(o,50)}_();x.ready()}}()}return n.promise(t)};x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){c["[object "+t+"]"]=t.toLowerCase()});r=x(a),function(e,t){function at(e,t,n,i){var o,a,s,l,u,c,d,m,y,x;if((t?t.ownerDocument||t:w)!==f&&p(t),t=t||f,n=n||[],!e||"string"!=typeof e)return n;if(1!==(l=t.nodeType)&&9!==l)return[];if(h&&!i){if(o=Z.exec(e))if(s=o[1]){if(9===l){if(a=t.getElementById(s),!a||!a.parentNode)return n;if(a.id===s)return n.push(a),n}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(s))&&v(t,a)&&a.id===s)return n.push(a),n}else{if(o[2])return M.apply(n,t.getElementsByTagName(e)),n;if((s=o[3])&&r.getElementsByClassName&&t.getElementsByClassName)return M.apply(n,t.getElementsByClassName(s)),n}if(r.qsa&&(!g||!g.test(e))){if(m=d=b,y=t,x=9===l&&e,1===l&&"object"!==t.nodeName.toLowerCase()){for(c=mt(e),(d=t.getAttribute("id"))?m=d.replace(nt,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",u=c.length;u--;)c[u]=m+yt(c[u]);y=V.test(e)&&t.parentNode||t;x=c.join(",")}if(x)try{return M.apply(n,y.querySelectorAll(x)),n}catch(T){}finally{d||t.removeAttribute("id")}}}return kt(e.replace(z,"$1"),t,n,i)}function st(){function t(n,r){return e.push(n+=" ")>o.cacheLength&&delete t[e.shift()],t[n]=r}var e=[];return t}function lt(e){return e[b]=!0,e}function ut(e){var t=f.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t);t=null}}function ct(e,t){for(var n=e.split("|"),r=e.length;r--;)o.attrHandle[n[r]]=t}function pt(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||D)-(~e.sourceIndex||D);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function dt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ht(e){return lt(function(t){return t=+t,lt(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function gt(){}function mt(e,t){var n,r,i,a,s,l,u,c=k[e+" "];if(c)return t?0:c.slice(0);for(s=e,l=[],u=o.preFilter;s;){(!n||(r=X.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),l.push(i=[]));n=!1;(r=U.exec(s))&&(n=r.shift(),i.push({value:n,type:r[0].replace(z," ")}),s=s.slice(n.length));for(a in o.filter)(r=Q[a].exec(s))&&(!u[a]||(r=u[a](r)))&&(n=r.shift(),i.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?at.error(e):k(e,l).slice(0)}function yt(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function vt(e,t,n){var r=t.dir,o=n&&"parentNode"===r,a=C++;return t.first?function(t,n,i){while(t=t[r])if(1===t.nodeType||o)return e(t,n,i)}:function(t,n,s){var l,u,c,p=T+" "+a;if(s){while(t=t[r])if((1===t.nodeType||o)&&e(t,n,s))return!0}else while(t=t[r])if(1===t.nodeType||o)if(c=t[b]||(t[b]={}),(u=c[r])&&u[0]===p){if((l=u[1])===!0||l===i)return l===!0}else if(u=c[r]=[p],u[1]=e(t,n,s)||i,u[1]===!0)return!0}}function bt(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function xt(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,u=null!=t;l>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),u&&t.push(s));return a}function wt(e,t,n,r,i,o){return r&&!r[b]&&(r=wt(r)),i&&!i[b]&&(i=wt(i,o)),lt(function(o,a,s,l){var u,c,p,f=[],d=[],h=a.length,g=o||Nt(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:xt(g,f,e,s,l),y=n?i||(o?e:h||r)?[]:a:m;if(n&&n(m,y,s,l),r)for(u=xt(y,d),r(u,[],s,l),c=u.length;c--;)(p=u[c])&&(y[d[c]]=!(m[d[c]]=p));if(o){if(i||e){if(i){for(u=[],c=y.length;c--;)(p=y[c])&&u.push(m[c]=p);i(null,y=[],u,l)}for(c=y.length;c--;)(p=y[c])&&(u=i?F.call(o,p):f[c])>-1&&(o[u]=!(a[u]=p))}}else y=xt(y===a?y.splice(h,y.length):y),i?i(null,a,y,l):M.apply(a,y)})}function Tt(e){for(var t,n,r,i=e.length,a=o.relative[e[0].type],s=a||o.relative[" "],l=a?1:0,c=vt(function(e){return e===t},s,!0),p=vt(function(e){return F.call(t,e)>-1},s,!0),f=[function(e,n,r){return!a&&(r||n!==u)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];i>l;l++)if(n=o.relative[e[l].type])f=[vt(bt(f),n)];else{if(n=o.filter[e[l].type].apply(null,e[l].matches),n[b]){for(r=++l;i>r;r++)if(o.relative[e[r].type])break;return wt(l>1&&bt(f),l>1&&yt(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(z,"$1"),n,r>l&&Tt(e.slice(l,r)),i>r&&Tt(e=e.slice(r)),i>r&&yt(e))}f.push(n)}return bt(f)}function Ct(e,t){var n=0,r=t.length>0,a=e.length>0,s=function(s,l,c,p,d){var h,g,m,y=[],v=0,b="0",x=s&&[],w=null!=d,C=u,N=s||a&&o.find.TAG("*",d&&l.parentNode||l),k=T+=null==C?1:Math.random()||.1;for(w&&(u=l!==f&&l,i=n);null!=(h=N[b]);b++){if(a&&h){for(g=0;m=e[g++];)if(m(h,l,c)){p.push(h);break}w&&(T=k,i=++n)}r&&((h=!m&&h)&&v--,s&&x.push(h))}if(v+=b,r&&b!==v){for(g=0;m=t[g++];)m(x,y,l,c);if(s){if(v>0)while(b--)x[b]||y[b]||(y[b]=q.call(p));y=xt(y)}M.apply(p,y);w&&!s&&y.length>0&&v+t.length>1&&at.uniqueSort(p)}return w&&(T=k,u=C),x};return r?lt(s):s}function Nt(e,t,n){for(var r=0,i=t.length;i>r;r++)at(e,t[r],n);return n}function kt(e,t,n,i){var a,s,u,c,p,f=mt(e);if(!i&&1===f.length){if(s=f[0]=f[0].slice(0),s.length>2&&"ID"===(u=s[0]).type&&r.getById&&9===t.nodeType&&h&&o.relative[s[1].type]){if(t=(o.find.ID(u.matches[0].replace(rt,it),t)||[])[0],!t)return n;e=e.slice(s.shift().value.length)}for(a=Q.needsContext.test(e)?0:s.length;a--;){if(u=s[a],o.relative[c=u.type])break;if((p=o.find[c])&&(i=p(u.matches[0].replace(rt,it),V.test(s[0].type)&&t.parentNode||t))){if(s.splice(a,1),e=i.length&&yt(s),!e)return M.apply(n,i),n;break}}}return l(e,f)(i,t,!h,n,V.test(e)),n}var n,r,i,o,a,s,l,u,c,p,f,d,h,g,m,y,v,b="sizzle"+-new Date,w=e.document,T=0,C=0,N=st(),k=st(),E=st(),S=!1,A=function(e,t){return e===t?(S=!0,0):0},j=typeof t,D=-2147483648,L={}.hasOwnProperty,H=[],q=H.pop,_=H.push,M=H.push,O=H.slice,F=H.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",P="[\\x20\\t\\r\\n\\f]",R="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",W=R.replace("w","w#"),$="\\["+P+"*("+R+")"+P+"*(?:([*^$|!~]?=)"+P+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+W+")|)|)"+P+"*\\]",I=":("+R+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+$.replace(3,8)+")*)|.*)\\)|)",z=RegExp("^"+P+"+|((?:^|[^\\\\])(?:\\\\.)*)"+P+"+$","g"),X=RegExp("^"+P+"*,"+P+"*"),U=RegExp("^"+P+"*([>+~]|"+P+")"+P+"*"),V=RegExp(P+"*[+~]"),Y=RegExp("="+P+"*([^\\]'\"]*)"+P+"*\\]","g"),J=RegExp(I),G=RegExp("^"+W+"$"),Q={ID:RegExp("^#("+R+")"),CLASS:RegExp("^\\.("+R+")"),TAG:RegExp("^("+R.replace("w","w*")+")"),ATTR:RegExp("^"+$),PSEUDO:RegExp("^"+I),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+P+"*(even|odd|(([+-]|)(\\d*)n|)"+P+"*(?:([+-]|)"+P+"*(\\d+)|))"+P+"*\\)|)","i"),bool:RegExp("^(?:"+B+")$","i"),needsContext:RegExp("^"+P+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+P+"*((?:-\\d)?\\d*)"+P+"*\\)|)(?=[^-]|$)","i")},K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/^(?:input|select|textarea|button)$/i,tt=/^h\d$/i,nt=/'|\\/g,rt=RegExp("\\\\([\\da-f]{1,6}"+P+"?|("+P+")|.)","ig"),it=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(55296|r>>10,56320|1023&r)};try{M.apply(H=O.call(w.childNodes),w.childNodes);H[w.childNodes.length].nodeType}catch(ot){M={apply:H.length?function(e,t){_.apply(e,O.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}s=at.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1};r=at.support={};p=at.setDocument=function(e){var n=e?e.ownerDocument||e:w,i=n.defaultView;return n!==f&&9===n.nodeType&&n.documentElement?(f=n,d=n.documentElement,h=!s(n),i&&i.attachEvent&&i!==i.top&&i.attachEvent("onbeforeunload",function(){p()}),r.attributes=ut(function(e){return e.className="i",!e.getAttribute("className")}),r.getElementsByTagName=ut(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),r.getElementsByClassName=ut(function(e){return e.innerHTML="<div class='a'><\/div><div class='a i'><\/div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),r.getById=ut(function(e){return d.appendChild(e).id=b,!n.getElementsByName||!n.getElementsByName(b).length}),r.getById?(o.find.ID=function(e,t){if(typeof t.getElementById!==j&&h){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},o.filter.ID=function(e){var t=e.replace(rt,it);return function(e){return e.getAttribute("id")===t}}):(delete o.find.ID,o.filter.ID=function(e){var t=e.replace(rt,it);return function(e){var n=typeof e.getAttributeNode!==j&&e.getAttributeNode("id");return n&&n.value===t}}),o.find.TAG=r.getElementsByTagName?function(e,n){return typeof n.getElementsByTagName!==j?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},o.find.CLASS=r.getElementsByClassName&&function(e,n){return typeof n.getElementsByClassName!==j&&h?n.getElementsByClassName(e):t},m=[],g=[],(r.qsa=K.test(n.querySelectorAll))&&(ut(function(e){e.innerHTML="<select><option selected=''><\/option><\/select>";e.querySelectorAll("[selected]").length||g.push("\\["+P+"*(?:value|"+B+")");e.querySelectorAll(":checked").length||g.push(":checked")}),ut(function(e){var t=n.createElement("input");t.setAttribute("type","hidden");e.appendChild(t).setAttribute("t","");e.querySelectorAll("[t^='']").length&&g.push("[*^$]="+P+"*(?:''|\"\")");e.querySelectorAll(":enabled").length||g.push(":enabled",":disabled");e.querySelectorAll("*,:x");g.push(",.*:")})),(r.matchesSelector=K.test(y=d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ut(function(e){r.disconnectedMatch=y.call(e,"div");y.call(e,"[s!='']:x");m.push("!=",I)}),g=g.length&&RegExp(g.join("|")),m=m.length&&RegExp(m.join("|")),v=K.test(d.contains)||d.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},A=d.compareDocumentPosition?function(e,t){if(e===t)return S=!0,0;var i=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return i?1&i||!r.sortDetached&&t.compareDocumentPosition(e)===i?e===n||v(w,e)?-1:t===n||v(w,t)?1:c?F.call(c,e)-F.call(c,t):0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(e===t)return S=!0,0;if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:c?F.call(c,e)-F.call(c,t):0;if(o===a)return pt(e,t);for(r=e;r=r.parentNode;)s.unshift(r);for(r=t;r=r.parentNode;)l.unshift(r);while(s[i]===l[i])i++;return i?pt(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},n):f};at.matches=function(e,t){return at(e,null,null,t)};at.matchesSelector=function(e,t){if((e.ownerDocument||e)!==f&&p(e),t=t.replace(Y,"='$1']"),!(!r.matchesSelector||!h||m&&m.test(t)||g&&g.test(t)))try{var n=y.call(e,t);if(n||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(i){}return at(t,f,null,[e]).length>0};at.contains=function(e,t){return(e.ownerDocument||e)!==f&&p(e),v(e,t)};at.attr=function(e,n){(e.ownerDocument||e)!==f&&p(e);var i=o.attrHandle[n.toLowerCase()],a=i&&L.call(o.attrHandle,n.toLowerCase())?i(e,n,!h):t;return a===t?r.attributes||!h?e.getAttribute(n):(a=e.getAttributeNode(n))&&a.specified?a.value:null:a};at.error=function(e){throw Error("Syntax error, unrecognized expression: "+e);};at.uniqueSort=function(e){var t,n=[],i=0,o=0;if(S=!r.detectDuplicates,c=!r.sortStable&&e.slice(0),e.sort(A),S){while(t=e[o++])t===e[o]&&(i=n.push(o));while(i--)e.splice(n[i],1)}return e};a=at.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=a(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=a(t);return n};o=at.selectors={cacheLength:50,createPseudo:lt,match:Q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(rt,it),e[3]=(e[4]||e[5]||"").replace(rt,it),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||at.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&at.error(e[0]),e},PSEUDO:function(e){var n,r=!e[5]&&e[2];return Q.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:r&&J.test(r)&&(n=mt(r,!0))&&(n=r.indexOf(")",r.length-n)-r.length)&&(e[0]=e[0].slice(0,n),e[2]=r.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(rt,it).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=N[e+" "];return t||(t=RegExp("(^|"+P+")"+e+"("+P+"|$)"))&&N(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==j&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=at.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,p,f,d,h,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!l&&!s;if(m){if(o){while(g){for(p=t;p=p[g];)if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&v){for(c=m[b]||(m[b]={}),u=c[e]||[],d=u[0]===T&&u[1],f=u[0]===T&&u[2],p=d&&m.childNodes[d];p=++d&&p&&p[g]||(f=d=0)||h.pop();)if(1===p.nodeType&&++f&&p===t){c[e]=[T,d,f];break}}else if(v&&(u=(t[b]||(t[b]={}))[e])&&u[0]===T)f=u[1];else while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===y:1===p.nodeType)&&++f&&(v&&((p[b]||(p[b]={}))[e]=[T,f]),p===t))break;return f-=i,f===r||0==f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=o.pseudos[e]||o.setFilters[e.toLowerCase()]||at.error("unsupported pseudo: "+e);return r[b]?r(t):r.length>1?(n=[e,e,"",t],o.setFilters.hasOwnProperty(e.toLowerCase())?lt(function(e,n){for(var i,o=r(e,t),a=o.length;a--;)i=F.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:lt(function(e){var t=[],n=[],r=l(e.replace(z,"$1"));return r[b]?lt(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:lt(function(e){return function(t){return at(e,t).length>0}}),contains:lt(function(e){return function(t){return(t.textContent||t.innerText||a(t)).indexOf(e)>-1}}),lang:lt(function(e){return G.test(e||"")||at.error("unsupported lang: "+e),e=e.replace(rt,it).toLowerCase(),function(t){var n;do if(n=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!o.pseudos.empty(e)},header:function(e){return tt.test(e.nodeName)},input:function(e){return et.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:ht(function(){return[0]}),last:ht(function(e,t){return[t-1]}),eq:ht(function(e,t,n){return[0>n?n+t:n]}),even:ht(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:ht(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:ht(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:ht(function(e,t,n){for(var r=0>n?n+t:n;t>++r;)e.push(r);return e})}};o.pseudos.nth=o.pseudos.eq;for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})o.pseudos[n]=ft(n);for(n in{submit:!0,reset:!0})o.pseudos[n]=dt(n);gt.prototype=o.filters=o.pseudos;o.setFilters=new gt;l=at.compile=function(e,t){var n,r=[],i=[],o=E[e+" "];if(!o){for(t||(t=mt(e)),n=t.length;n--;)o=Tt(t[n]),o[b]?r.push(o):i.push(o);o=E(e,Ct(i,r))}return o};r.sortStable=b.split("").sort(A).join("")===b;r.detectDuplicates=S;p();r.sortDetached=ut(function(e){return 1&e.compareDocumentPosition(f.createElement("div"))});ut(function(e){return e.innerHTML="<a href='#'><\/a>","#"===e.firstChild.getAttribute("href")})||ct("type|href|height|width",function(e,n,r){return r?t:e.getAttribute(n,"type"===n.toLowerCase()?1:2)});r.attributes&&ut(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ct("value",function(e,n,r){return r||"input"!==e.nodeName.toLowerCase()?t:e.defaultValue});ut(function(e){return null==e.getAttribute("disabled")})||ct(B,function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&i.specified?i.value:e[n]===!0?n.toLowerCase():null});x.find=at;x.expr=at.selectors;x.expr[":"]=x.expr.pseudos;x.unique=at.uniqueSort;x.text=at.getText;x.isXMLDoc=at.isXML;x.contains=at.contains}(e);O={};x.Callbacks=function(e){e="string"==typeof e?O[e]||F(e):x.extend({},e);var n,r,i,o,a,s,l=[],u=!e.once&&[],c=function(t){for(r=e.memory&&t,i=!0,a=s||0,s=0,o=l.length,n=!0;l&&o>a;a++)if(l[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1;l&&(u?u.length&&c(u.shift()):r?l=[]:p.disable())},p={add:function(){if(l){var t=l.length;(function i(t){x.each(t,function(t,n){var r=x.type(n);"function"===r?e.unique&&p.has(n)||l.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments);n?o=l.length:r&&(s=t,c(r))}return this},remove:function(){return l&&x.each(arguments,function(e,t){for(var r;(r=x.inArray(t,l,r))>-1;)l.splice(r,1),n&&(o>=r&&o--,a>=r&&a--)}),this},has:function(e){return e?x.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=u=r=t,this},disabled:function(){return!l},lock:function(){return u=t,r||p.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||i&&!u||(t=t||[],t=[e,t.slice?t.slice():t],n?u.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p};x.extend({Deferred:function(e){var t=[["resolve","done",x.Callbacks("once memory"),"resolved"],["reject","fail",x.Callbacks("once memory"),"rejected"],["notify","progress",x.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return x.Deferred(function(n){x.each(t,function(t,o){var a=o[0],s=x.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&x.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})});e=null}).promise()},promise:function(e){return null!=e?x.extend(e,r):r}},i={};return r.pipe=r.then,x.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add;s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock);i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this};i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=g.call(arguments),r=n.length,i=1!==r||e&&x.isFunction(e.promise)?r:0,o=1===i?e:x.Deferred(),a=function(e,t,n){return function(r){t[e]=this;n[e]=arguments.length>1?g.call(arguments):r;n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}},s,l,u;if(r>1)for(s=Array(r),l=Array(r),u=Array(r);r>t;t++)n[t]&&x.isFunction(n[t].promise)?n[t].promise().done(a(t,u,n)).fail(o.reject).progress(a(t,l,s)):--i;return i||o.resolveWith(u,n),o.promise()}});x.support=function(t){var n,r,o,s,l,u,c,p,f,d=a.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table><\/table><a href='/a'>a<\/a><input type='checkbox'/>",n=d.getElementsByTagName("*")||[],r=d.getElementsByTagName("a")[0],!r||!r.style||!n.length)return t;s=a.createElement("select");u=s.appendChild(a.createElement("option"));o=d.getElementsByTagName("input")[0];r.style.cssText="top:1px;float:left;opacity:.5";t.getSetAttribute="t"!==d.className;t.leadingWhitespace=3===d.firstChild.nodeType;t.tbody=!d.getElementsByTagName("tbody").length;t.htmlSerialize=!!d.getElementsByTagName("link").length;t.style=/top/.test(r.getAttribute("style"));t.hrefNormalized="/a"===r.getAttribute("href");t.opacity=/^0.5/.test(r.style.opacity);t.cssFloat=!!r.style.cssFloat;t.checkOn=!!o.value;t.optSelected=u.selected;t.enctype=!!a.createElement("form").enctype;t.html5Clone="<:nav><\/:nav>"!==a.createElement("nav").cloneNode(!0).outerHTML;t.inlineBlockNeedsLayout=!1;t.shrinkWrapBlocks=!1;t.pixelPosition=!1;t.deleteExpando=!0;t.noCloneEvent=!0;t.reliableMarginRight=!0;t.boxSizingReliable=!0;o.checked=!0;t.noCloneChecked=o.cloneNode(!0).checked;s.disabled=!0;t.optDisabled=!u.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}o=a.createElement("input");o.setAttribute("value","");t.input=""===o.getAttribute("value");o.value="t";o.setAttribute("type","radio");t.radioValue="t"===o.value;o.setAttribute("checked","t");o.setAttribute("name","t");l=a.createDocumentFragment();l.appendChild(o);t.appendChecked=o.checked;t.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked;d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(f in{submit:!0,change:!0,focusin:!0})d.setAttribute(c="on"+f,"t"),t[f+"Bubbles"]=c in e||d.attributes[c].expando===!1;d.style.backgroundClip="content-box";d.cloneNode(!0).style.backgroundClip="";t.clearCloneStyle="content-box"===d.style.backgroundClip;for(f in x(t))break;return t.ownLast="0"!==f,x(function(){var n,r,o,s="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",l=a.getElementsByTagName("body")[0];l&&(n=a.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",l.appendChild(n).appendChild(d),d.innerHTML="<table><tr><td><\/td><td>t<\/td><\/tr><\/table>",o=d.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",p=0===o[0].offsetHeight,o[0].style.display="",o[1].style.display="none",t.reliableHiddenOffsets=p&&0===o[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",x.swap(l,null!=l.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===d.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,r=d.appendChild(a.createElement("div")),r.style.cssText=d.style.cssText=s,r.style.marginRight=r.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof d.style.zoom!==i&&(d.innerHTML="",d.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div><\/div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(l.style.zoom=1)),l.removeChild(n),n=d=o=r=null)}),n=s=l=u=r=o=null,t}({});B=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/;P=/([A-Z])/g;x.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?x.cache[e[x.expando]]:e[x.expando],!!e&&!I(e)},data:function(e,t,n){return R(e,t,n)},removeData:function(e,t){return W(e,t)},_data:function(e,t,n){return R(e,t,n,!0)},_removeData:function(e,t){return W(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&x.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}});x.fn.extend({data:function(e,n){var r,i,o=null,a=0,s=this[0];if(e===t){if(this.length&&(o=x.data(s),1===s.nodeType&&!x._data(s,"parsedAttrs"))){for(r=s.attributes;r.length>a;a++)i=r[a].name,0===i.indexOf("data-")&&(i=x.camelCase(i.slice(5)),$(s,i,o[i]));x._data(s,"parsedAttrs",!0)}return o}return"object"==typeof e?this.each(function(){x.data(this,e)}):arguments.length>1?this.each(function(){x.data(this,e,n)}):s?$(s,e,x.data(s,e)):null},removeData:function(e){return this.each(function(){x.removeData(this,e)})}});x.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=x._data(e,n),r&&(!i||x.isArray(r)?i=x._data(e,n,x.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=x.queue(e,t),r=n.length,i=n.shift(),o=x._queueHooks(e,t),a=function(){x.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--);i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o));!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return x._data(e,n)||x._data(e,n,{empty:x.Callbacks("once memory").add(function(){x._removeData(e,t+"queue");x._removeData(e,n)})})}});x.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?x.queue(this[0],e):n===t?this:this.each(function(){var t=x.queue(this,e,n);x._queueHooks(this,e);"fx"===e&&"inprogress"!==t[0]&&x.dequeue(this,e)})},dequeue:function(e){return this.each(function(){x.dequeue(this,e)})},delay:function(e,t){return e=x.fx?x.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,o=x.Deferred(),a=this,s=this.length,l=function(){--i||o.resolveWith(a,[a])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";s--;)r=x._data(a[s],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(l));return l(),o.promise(n)}});var z,X,U=/[\t\r\n\f]/g,V=/\r/g,Y=/^(?:input|select|textarea|button|object)$/i,J=/^(?:a|area)$/i,G=/^(?:checked|selected)$/i,Q=x.support.getSetAttribute,K=x.support.input;x.fn.extend({attr:function(e,t){return x.access(this,x.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){x.removeAttr(this,e)})},prop:function(e,t){return x.access(this,x.prop,e,t,arguments.length>1)},removeProp:function(e){return e=x.propFix[e]||e,this.each(function(){try{this[e]=t;delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,l="string"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(T)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(U," "):" ")){for(o=0;i=t[o++];)0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=x.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,l=0===arguments.length||"string"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(T)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(U," "):"")){for(o=0;i=t[o++];)while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?x.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):x.isFunction(e)?this.each(function(n){x(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,r=0,o=x(this),a=e.match(T)||[];t=a[r++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else(n===i||"boolean"===n)&&(this.className&&x._data(this,"__className__",this.className),this.className=this.className||e===!1?"":x._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(U," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];return arguments.length?(i=x.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=i?e.call(this,n,x(this).val()):e,null==o?o="":"number"==typeof o?o+="":x.isArray(o)&&(o=x.map(o,function(e){return null==e?"":e+""})),r=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,o,"value")!==t||(this.value=o))})):o?(r=x.valHooks[o.type]||x.valHooks[o.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(o,"value"))!==t?n:(n=o.value,"string"==typeof n?n.replace(V,""):null==n?"":n)):void 0}});x.extend({valHooks:{option:{get:function(e){var t=x.find.attr(e,"value");return null!=t?t:e.text}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,l=0>i?s:o?i:0;s>l;l++)if(n=r[l],!(!n.selected&&l!==i||(x.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&x.nodeName(n.parentNode,"optgroup"))){if(t=x(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=x.makeArray(t),a=i.length;a--;)r=i[a],(r.selected=x.inArray(x(r).val(),o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}},attr:function(e,n,r){var o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===i?x.prop(e,n,r):(1===s&&x.isXMLDoc(e)||(n=n.toLowerCase(),o=x.attrHooks[n]||(x.expr.match.bool.test(n)?X:z)),r===t?o&&"get"in o&&null!==(a=o.get(e,n))?a:(a=x.find.attr(e,n),null==a?t:a):null!==r?o&&"set"in o&&(a=o.set(e,r,n))!==t?a:(e.setAttribute(n,r+""),r):(x.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(T);if(o&&1===e.nodeType)while(n=o[i++])r=x.propFix[n]||n,x.expr.match.bool.test(n)?K&&Q||!G.test(n)?e[r]=!1:e[x.camelCase("default-"+n)]=e[r]=!1:x.attr(e,n,""),e.removeAttribute(Q?n:r)},attrHooks:{type:{set:function(e,t){if(!x.support.radioValue&&"radio"===t&&x.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,r){var i,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!x.isXMLDoc(e),a&&(n=x.propFix[n]||n,o=x.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&null!==(i=o.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var t=x.find.attr(e,"tabindex");return t?parseInt(t,10):Y.test(e.nodeName)||J.test(e.nodeName)&&e.href?0:-1}}}});X={set:function(e,t,n){return t===!1?x.removeAttr(e,n):K&&Q||!G.test(n)?e.setAttribute(!Q&&x.propFix[n]||n,n):e[x.camelCase("default-"+n)]=e[n]=!0,n}};x.each(x.expr.match.bool.source.match(/\w+/g),function(e,n){var r=x.expr.attrHandle[n]||x.find.attr;x.expr.attrHandle[n]=K&&Q||!G.test(n)?function(e,n,i){var o=x.expr.attrHandle[n],a=i?t:(x.expr.attrHandle[n]=t)!=r(e,n,i)?n.toLowerCase():null;return x.expr.attrHandle[n]=o,a}:function(e,n,r){return r?t:e[x.camelCase("default-"+n)]?n.toLowerCase():null}});K&&Q||(x.attrHooks.value={set:function(e,n,r){return x.nodeName(e,"input")?(e.defaultValue=n,t):z&&z.set(e,n,r)}});Q||(z={set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},x.expr.attrHandle.id=x.expr.attrHandle.name=x.expr.attrHandle.coords=function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&""!==i.value?i.value:null},x.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&r.specified?r.value:t},set:z.set},x.attrHooks.contenteditable={set:function(e,t,n){z.set(e,""===t?!1:t,n)}},x.each(["width","height"],function(e,n){x.attrHooks[n]={set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}}}));x.support.hrefNormalized||x.each(["href","src"],function(e,t){x.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}});x.support.style||(x.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}});x.support.optSelected||(x.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}});x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this});x.support.enctype||(x.propFix.enctype="encoding");x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(e,n){return x.isArray(n)?e.checked=x.inArray(x(e).val(),n)>=0:t}};x.support.checkOn||(x.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;x.event={global:{},add:function(e,n,r,o,a){var s,l,u,c,p,f,d,h,g,m,y,v=x._data(e);if(v){for(r.handler&&(c=r,r=c.handler,a=c.selector),r.guid||(r.guid=x.guid++),(l=v.events)||(l=v.events={}),(f=v.handle)||(f=v.handle=function(e){return typeof x===i||e&&x.event.triggered===e.type?t:x.event.dispatch.apply(f.elem,arguments)},f.elem=e),n=(n||"").match(T)||[""],u=n.length;u--;)s=rt.exec(n[u])||[],g=y=s[1],m=(s[2]||"").split(".").sort(),g&&(p=x.event.special[g]||{},g=(a?p.delegateType:p.bindType)||g,p=x.event.special[g]||{},d=x.extend({type:g,origType:y,data:o,handler:r,guid:r.guid,selector:a,needsContext:a&&x.expr.match.needsContext.test(a),namespace:m.join(".")},c),(h=l[g])||(h=l[g]=[],h.delegateCount=0,p.setup&&p.setup.call(e,o,m,f)!==!1||(e.addEventListener?e.addEventListener(g,f,!1):e.attachEvent&&e.attachEvent("on"+g,f))),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),x.event.global[g]=!0);e=null}},remove:function(e,t,n,r,i){var o,a,s,l,u,c,p,f,d,h,g,m=x.hasData(e)&&x._data(e);if(m&&(c=m.events)){for(t=(t||"").match(T)||[""],u=t.length;u--;)if(s=rt.exec(t[u])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){for(p=x.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,f=c[d]||[],s=s[2]&&RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=f.length;o--;)a=f[o],!i&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,p.remove&&p.remove.call(e,a));l&&!f.length&&(p.teardown&&p.teardown.call(e,h,m.handle)!==!1||x.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)x.event.remove(e,d+t[u],n,r,!0);x.isEmptyObject(c)&&(delete m.handle,x._removeData(e,"events"))}},trigger:function(n,r,i,o){var s,l,u,c,p,f,d,h=[i||a],g=v.call(n,"type")?n.type:n,m=v.call(n,"namespace")?n.namespace.split("."):[];if(u=f=i=i||a,3!==i.nodeType&&8!==i.nodeType&&!nt.test(g+x.event.triggered)&&(g.indexOf(".")>=0&&(m=g.split("."),g=m.shift(),m.sort()),l=0>g.indexOf(":")&&"on"+g,n=n[x.expando]?n:new x.Event(g,"object"==typeof n&&n),n.isTrigger=o?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:x.makeArray(r,[n]),p=x.event.special[g]||{},o||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!o&&!p.noBubble&&!x.isWindow(i)){for(c=p.delegateType||g,nt.test(c+g)||(u=u.parentNode);u;u=u.parentNode)h.push(u),f=u;f===(i.ownerDocument||a)&&h.push(f.defaultView||f.parentWindow||e)}for(d=0;(u=h[d++])&&!n.isPropagationStopped();)n.type=d>1?c:p.bindType||g,s=(x._data(u,"events")||{})[n.type]&&x._data(u,"handle"),s&&s.apply(u,r),s=l&&u[l],s&&x.acceptData(u)&&s.apply&&s.apply(u,r)===!1&&n.preventDefault();if(n.type=g,!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(h.pop(),r)===!1)&&x.acceptData(i)&&l&&i[g]&&!x.isWindow(i)){f=i[l];f&&(i[l]=null);x.event.triggered=g;try{i[g]()}catch(y){}x.event.triggered=t;f&&(i[l]=f)}return n.result}},dispatch:function(e){e=x.event.fix(e);var n,r,i,o,a,s=[],l=g.call(arguments),u=(x._data(this,"events")||{})[e.type]||[],c=x.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(s=x.event.handlers.call(this,e,u),n=0;(o=s[n++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,a=0;(i=o.handlers[a++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((x.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,l),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],l=n.delegateCount,u=e.target;if(l&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==e.type)){for(o=[],a=0;l>a;a++)i=n[a],r=i.selector+" ",o[r]===t&&(o[r]=i.needsContext?x(r,this).index(u)>=0:x.find(r,this,null,[u]).length),o[r]&&o.push(i);o.length&&s.push({elem:u,handlers:o})}return n.length>l&&s.push({elem:this,handlers:n.slice(l)}),s},fix:function(e){if(e[x.expando])return e;var t,n,r,i=e.type,o=e,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new x.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||a),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,o,s=n.button,l=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||a,o=i.documentElement,r=i.body,e.pageX=n.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&l&&(e.relatedTarget=l===e.target?n.toElement:l),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==at()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===at()&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},click:{trigger:function(){return x.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t},_default:function(e){return x.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=x.extend(new x.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?x.event.trigger(i,null,t):x.event.dispatch.call(t,i);i.isDefaultPrevented()&&n.preventDefault()}};x.removeEvent=a.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))};x.Event=function(e,n){return this instanceof x.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:ot):this.type=e,n&&x.extend(this,n),this.timeStamp=e&&e.timeStamp||x.now(),this[x.expando]=!0,t):new x.Event(e,n)};x.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it;this.stopPropagation()}};x.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!x.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}});x.support.submitBubbles||(x.event.special.submit={setup:function(){return x.nodeName(this,"form")?!1:(x.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=x.nodeName(n,"input")||x.nodeName(n,"button")?n.form:t;r&&!x._data(r,"submitBubbles")&&(x.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),x._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&x.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return x.nodeName(this,"form")?!1:(x.event.remove(this,"._submit"),t)}});x.support.changeBubbles||(x.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(x.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),x.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1);x.event.simulate("change",this,e,!0)})),!1):(x.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!x._data(t,"changeBubbles")&&(x.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||x.event.simulate("change",this.parentNode,e,!0)}),x._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return x.event.remove(this,"._change"),!Z.test(this.nodeName)}});x.support.focusinBubbles||x.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){x.event.simulate(t,e.target,x.event.fix(e),!0)};x.event.special[t]={setup:function(){0==n++&&a.addEventListener(e,r,!0)},teardown:function(){0==--n&&a.removeEventListener(e,r,!0)}}});x.fn.extend({on:function(e,n,r,i,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=ot;else if(!i)return this;return 1===o&&(s=i,i=function(e){return x().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=x.guid++)),this.each(function(){x.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,x(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=ot),this.each(function(){x.event.remove(this,e,r,n)})},trigger:function(e,t){return this.each(function(){x.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?x.event.trigger(e,n,r,!0):t}});var st=/^.[^:#\[\.,]*$/,lt=/^(?:parents|prev(?:Until|All))/,ut=x.expr.match.needsContext,ct={children:!0,contents:!0,next:!0,prev:!0};x.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(x(e).filter(function(){for(t=0;i>t;t++)if(x.contains(r[t],this))return!0}));for(t=0;i>t;t++)x.find(e,r[t],n);return n=this.pushStack(i>1?x.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t,n=x(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(x.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e||[],!0))},filter:function(e){return this.pushStack(ft(this,e||[],!1))},is:function(e){return!!ft(this,"string"==typeof e&&ut.test(e)?x(e):e||[],!1).length},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=ut.test(e)||"string"!=typeof e?x(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(a?a.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,e))){n=o.push(n);break}return this.pushStack(o.length>1?x.unique(o):o)},index:function(e){return e?"string"==typeof e?x.inArray(this[0],x(e)):x.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?x(e,t):x.makeArray(e&&e.nodeType?[e]:e),r=x.merge(this.get(),n);return this.pushStack(x.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}});x.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x.dir(e,"parentNode")},parentsUntil:function(e,t,n){return x.dir(e,"parentNode",n)},next:function(e){return pt(e,"nextSibling")},prev:function(e){return pt(e,"previousSibling")},nextAll:function(e){return x.dir(e,"nextSibling")},prevAll:function(e){return x.dir(e,"previousSibling")},nextUntil:function(e,t,n){return x.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return x.dir(e,"previousSibling",n)},siblings:function(e){return x.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return x.sibling(e.firstChild)},contents:function(e){return x.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:x.merge([],e.childNodes)}},function(e,t){x.fn[e]=function(n,r){var i=x.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=x.filter(r,i)),this.length>1&&(ct[e]||(i=x.unique(i)),lt.test(e)&&(i=i.reverse())),this.pushStack(i)}});x.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?x.find.matchesSelector(r,e)?[r]:[]:x.find.matches(e,x.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,r){for(var i=[],o=e[n];o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!x(o).is(r));)1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var ht="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gt=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+ht+")[\\s/>]","i"),yt=/^\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,xt=/<tbody/i,wt=/<|&#?\w+;/,Tt=/<(?:script|style|link)/i,Ct=/^(?:checkbox|radio)$/i,Nt=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/^$|\/(?:java|ecma)script/i,Et=/^true\/(.*)/,St=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,At={option:[1,"<select multiple='multiple'>","<\/select>"],legend:[1,"<fieldset>","<\/fieldset>"],area:[1,"<map>","<\/map>"],param:[1,"<object>","<\/object>"],thead:[1,"<table>","<\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],col:[2,"<table><tbody><\/tbody><colgroup>","<\/colgroup><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],_default:x.support.htmlSerialize?[0,"",""]:[1,"X<div>","<\/div>"]},jt=dt(a),Dt=jt.appendChild(a.createElement("div"));At.optgroup=At.option;At.tbody=At.tfoot=At.colgroup=At.caption=At.thead;At.th=At.td;x.fn.extend({text:function(e){return x.access(this,function(e){return e===t?x.text(this):this.empty().append((this[0]&&this[0].ownerDocument||a).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Lt(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Lt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?x.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||x.cleanData(Ft(n)),n.parentNode&&(t&&x.contains(n.ownerDocument,n)&&_t(Ft(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&x.cleanData(Ft(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&x.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return x.clone(this,e,t)})},html:function(e){return x.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(gt,""):t;if(!("string"!=typeof e||Tt.test(e)||!x.support.htmlSerialize&&mt.test(e)||!x.support.leadingWhitespace&&yt.test(e)||At[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(vt,"<$1><\/$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(x.cleanData(Ft(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=x.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),x(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=d.apply([],e);var r,i,o,a,s,l,u=0,c=this.length,p=this,f=c-1,h=e[0],g=x.isFunction(h);if(g||!(1>=c||"string"!=typeof h||x.support.checkClone)&&Nt.test(h))return this.each(function(r){var i=p.eq(r);g&&(e[0]=h.call(this,r,i.html()));i.domManip(e,t,n)});if(c&&(l=x.buildFragment(e,this[0].ownerDocument,!1,!n&&this),r=l.firstChild,1===l.childNodes.length&&(l=r),r)){for(a=x.map(Ft(l,"script"),Ht),o=a.length;c>u;u++)i=l,u!==f&&(i=x.clone(i,!0,!0),o&&x.merge(a,Ft(i,"script"))),t.call(this[u],i,u);if(o)for(s=a[a.length-1].ownerDocument,x.map(a,qt),u=0;o>u;u++)i=a[u],kt.test(i.type||"")&&!x._data(i,"globalEval")&&x.contains(s,i)&&(i.src?x._evalUrl(i.src):x.globalEval((i.text||i.textContent||i.innerHTML||"").replace(St,"")));l=r=null}return this}});x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){x.fn[e]=function(e){for(var n,r=0,i=[],o=x(e),a=o.length-1;a>=r;r++)n=r===a?this:this.clone(!0),x(o[r])[t](n),h.apply(i,n.get());return this.pushStack(i)}});x.extend({clone:function(e,t,n){var r,i,o,a,s,l=x.contains(e.ownerDocument,e);if(x.support.html5Clone||x.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Dt.innerHTML=e.outerHTML,Dt.removeChild(o=Dt.firstChild)),!(x.support.noCloneEvent&&x.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||x.isXMLDoc(e)))for(r=Ft(o),s=Ft(e),a=0;null!=(i=s[a]);++a)r[a]&&Ot(i,r[a]);if(t)if(n)for(s=s||Ft(e),r=r||Ft(o),a=0;null!=(i=s[a]);a++)Mt(i,r[a]);else Mt(e,o);return r=Ft(o,"script"),r.length>0&&_t(r,!l&&Ft(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){for(var i,o,a,s,l,u,c,p=e.length,f=dt(t),d=[],h=0;p>h;h++)if(o=e[h],o||0===o)if("object"===x.type(o))x.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){for(s=s||f.appendChild(t.createElement("div")),l=(bt.exec(o)||["",""])[1].toLowerCase(),c=At[l]||At._default,s.innerHTML=c[1]+o.replace(vt,"<$1><\/$2>")+c[2],i=c[0];i--;)s=s.lastChild;if(!x.support.leadingWhitespace&&yt.test(o)&&d.push(t.createTextNode(yt.exec(o)[0])),!x.support.tbody)for(o="table"!==l||xt.test(o)?"<table>"!==c[1]||xt.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;i--;)x.nodeName(u=o.childNodes[i],"tbody")&&!u.childNodes.length&&o.removeChild(u);for(x.merge(d,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=f.lastChild}else d.push(t.createTextNode(o));for(s&&f.removeChild(s),x.support.appendChecked||x.grep(Ft(d,"input"),Bt),h=0;o=d[h++];)if((!r||-1===x.inArray(o,r))&&(a=x.contains(o.ownerDocument,o),s=Ft(f.appendChild(o),"script"),a&&_t(s),n))for(i=0;o=s[i++];)kt.test(o.type||"")&&n.push(o);return s=null,f},cleanData:function(e,t){for(var n,r,o,a,s=0,l=x.expando,u=x.cache,c=x.support.deleteExpando,f=x.event.special;null!=(n=e[s]);s++)if((t||x.acceptData(n))&&(o=n[l],a=o&&u[o])){if(a.events)for(r in a.events)f[r]?x.event.remove(n,r):x.removeEvent(n,r,a.handle);u[o]&&(delete u[o],c?delete n[l]:typeof n.removeAttribute!==i?n.removeAttribute(l):n[l]=null,p.push(o))}},_evalUrl:function(e){return x.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})}});x.fn.extend({wrapAll:function(e){if(x.isFunction(e))return this.each(function(t){x(this).wrapAll(e.call(this,t))});if(this[0]){var t=x(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]);t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return x.isFunction(e)?this.each(function(t){x(this).wrapInner(e.call(this,t))}):this.each(function(){var t=x(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=x.isFunction(e);return this.each(function(n){x(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){x.nodeName(this,"body")||x(this).replaceWith(this.childNodes)}).end()}});var Pt,Rt,Wt,$t=/alpha\([^)]*\)/i,It=/opacity\s*=\s*([^)]*)/,zt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Ut=/^margin/,Vt=RegExp("^("+w+")(.*)$","i"),Yt=RegExp("^("+w+")(?!px)[a-z%]+$","i"),Jt=RegExp("^([+-])=("+w+")","i"),Gt={BODY:"block"},Qt={position:"absolute",visibility:"hidden",display:"block"},Kt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];x.fn.extend({css:function(e,n){return x.access(this,function(e,n,r){var i,o,a={},s=0;if(x.isArray(n)){for(o=Rt(e),i=n.length;i>s;s++)a[n[s]]=x.css(e,n[s],!1,o);return a}return r!==t?x.style(e,n,r):x.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){nn(this)?x(this).show():x(this).hide()})}});x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:x.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,l=x.camelCase(n),u=e.style;if(n=x.cssProps[l]||(x.cssProps[l]=tn(u,l)),s=x.cssHooks[n]||x.cssHooks[l],r===t)return s&&"get"in s&&(o=s.get(e,!1,i))!==t?o:u[n];if(a=typeof r,"string"===a&&(o=Jt.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(x.css(e,n)),a="number"),!(null==r||"number"===a&&isNaN(r)||("number"!==a||x.cssNumber[l]||(r+="px"),x.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(u[n]="inherit"),s&&"set"in s&&(r=s.set(e,r,i))===t)))try{u[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,l=x.camelCase(n);return n=x.cssProps[l]||(x.cssProps[l]=tn(e.style,l)),s=x.cssHooks[n]||x.cssHooks[l],s&&"get"in s&&(a=s.get(e,!0,r)),a===t&&(a=Wt(e,n,i)),"normal"===a&&n in Kt&&(a=Kt[n]),""===r||r?(o=parseFloat(a),r===!0||x.isNumeric(o)?o||0:a):a}});e.getComputedStyle?(Rt=function(t){return e.getComputedStyle(t,null)},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),l=s?s.getPropertyValue(n)||s[n]:t,u=e.style;return s&&(""!==l||x.contains(e.ownerDocument,e)||(l=x.style(e,n)),Yt.test(l)&&Ut.test(n)&&(i=u.width,o=u.minWidth,a=u.maxWidth,u.minWidth=u.maxWidth=u.width=l,l=s.width,u.width=i,u.minWidth=o,u.maxWidth=a)),l}):a.documentElement.currentStyle&&(Rt=function(e){return e.currentStyle},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),l=s?s[n]:t,u=e.style;return null==l&&u&&u[n]&&(l=u[n]),Yt.test(l)&&!zt.test(n)&&(i=u.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),u.left="fontSize"===n?"1em":l,l=u.pixelLeft+"px",u.left=i,a&&(o.left=a)),""===l?"auto":l});x.each(["height","width"],function(e,n){x.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(x.css(e,"display"))?x.swap(e,Qt,function(){return sn(e,n,i)}):sn(e,n,i):t},set:function(e,t,r){var i=r&&Rt(e);return on(e,t,r?an(e,n,r,x.support.boxSizing&&"border-box"===x.css(e,"boxSizing",!1,i),i):0)}}});x.support.opacity||(x.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=x.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1;(t>=1||""===t)&&""===x.trim(o.replace($t,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=$t.test(o)?o.replace($t,i):o+" "+i)}});x(function(){x.support.reliableMarginRight||(x.cssHooks.marginRight={get:function(e,n){return n?x.swap(e,{display:"inline-block"},Wt,[e,"marginRight"]):t}});!x.support.pixelPosition&&x.fn.position&&x.each(["top","left"],function(e,n){x.cssHooks[n]={get:function(e,r){return r?(r=Wt(e,n),Yt.test(r)?x(e).position()[n]+"px":r):t}}})});x.expr&&x.expr.filters&&(x.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!x.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||x.css(e,"display"))},x.expr.filters.visible=function(e){return!x.expr.filters.hidden(e)});x.each({margin:"",padding:"",border:"Width"},function(e,t){x.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+Zt[r]+t]=o[r]||o[r-2]||o[0];return i}};Ut.test(e)||(x.cssHooks[e+t].set=on)});var cn=/%20/g,pn=/\[\]$/,fn=/\r?\n/g,dn=/^(?:submit|button|image|reset|file)$/i,hn=/^(?:input|select|textarea|keygen)/i;x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=x.prop(this,"elements");return e?x.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!x(this).is(":disabled")&&hn.test(this.nodeName)&&!dn.test(e)&&(this.checked||!Ct.test(e))}).map(function(e,t){var n=x(this).val();return null==n?null:x.isArray(n)?x.map(n,function(e){return{name:t.name,value:e.replace(fn,"\r\n")}}):{name:t.name,value:n.replace(fn,"\r\n")}}).get()}});x.param=function(e,n){var r,i=[],o=function(e,t){t=x.isFunction(t)?t():null==t?"":t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=x.ajaxSettings&&x.ajaxSettings.traditional),x.isArray(e)||e.jquery&&!x.isPlainObject(e))x.each(e,function(){o(this.name,this.value)});else for(r in e)gn(r,e[r],n,o);return i.join("&").replace(cn,"+")};x.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){x.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}});x.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var mn,yn,vn=x.now(),bn=/\?/,xn=/#.*$/,wn=/([?&])_=[^&]*/,Tn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Nn=/^(?:GET|HEAD)$/,kn=/^\/\//,En=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Sn=x.fn.load,An={},jn={},Dn="*/".concat("*");try{yn=o.href}catch(Ln){yn=a.createElement("a");yn.href="";yn=yn.href}mn=En.exec(yn.toLowerCase())||[];x.fn.load=function(e,n,r){if("string"!=typeof e&&Sn)return Sn.apply(this,arguments);var i,o,a,s=this,l=e.indexOf(" ");return l>=0&&(i=e.slice(l,e.length),e=e.slice(0,l)),x.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(a="POST"),s.length>0&&x.ajax({url:e,type:a,dataType:"html",data:n}).done(function(e){o=arguments;s.html(i?x("<div>").append(x.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this};x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){x.fn[t]=function(e){return this.on(t,e)}});x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Dn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":x.parseJSON,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?_n(_n(e,x.ajaxSettings),t):_n(x.ajaxSettings,e)},ajaxPrefilter:Hn(An),ajaxTransport:Hn(jn),ajax:function(e,n){function k(e,n,r,i){var c,y,v,w,T,N=n;2!==b&&(b=2,s&&clearTimeout(s),u=t,a=i||"",C.readyState=e>0?4:0,c=e>=200&&300>e||304===e,r&&(w=Mn(p,C,r)),w=On(p,w,C,c),c?(p.ifModified&&(T=C.getResponseHeader("Last-Modified"),T&&(x.lastModified[o]=T),T=C.getResponseHeader("etag"),T&&(x.etag[o]=T)),204===e||"HEAD"===p.type?N="nocontent":304===e?N="notmodified":(N=w.state,y=w.data,v=w.error,c=!v)):(v=N,(e||!N)&&(N="error",0>e&&(e=0))),C.status=e,C.statusText=(n||N)+"",c?h.resolveWith(f,[y,N,C]):h.rejectWith(f,[C,N,v]),C.statusCode(m),m=t,l&&d.trigger(c?"ajaxSuccess":"ajaxError",[C,p,c?y:v]),g.fireWith(f,[C,N]),l&&(d.trigger("ajaxComplete",[C,p]),--x.active||x.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t);n=n||{};var r,i,o,a,s,l,u,c,p=x.ajaxSetup({},n),f=p.context||p,d=p.context&&(f.nodeType||f.jquery)?x(f):x.event,h=x.Deferred(),g=x.Callbacks("once memory"),m=p.statusCode||{},y={},v={},b=0,w="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!c)for(c={};t=Tn.exec(a);)c[t[1].toLowerCase()]=t[2];t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return b||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else C.always(e[C.status]);return this},abort:function(e){var t=e||w;return u&&u.abort(t),k(0,t),this}};if(h.promise(C).complete=g.add,C.success=C.done,C.error=C.fail,p.url=((e||p.url||yn)+"").replace(xn,"").replace(kn,mn[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=x.trim(p.dataType||"*").toLowerCase().match(T)||[""],null==p.crossDomain&&(r=En.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(mn[3]||("http:"===mn[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=x.param(p.data,p.traditional)),qn(An,p,n,C),2===b)return C;l=p.global;l&&0==x.active++&&x.event.trigger("ajaxStart");p.type=p.type.toUpperCase();p.hasContent=!Nn.test(p.type);o=p.url;p.hasContent||(p.data&&(o=p.url+=(bn.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=wn.test(o)?o.replace(wn,"$1_="+vn++):o+(bn.test(o)?"&":"?")+"_="+vn++));p.ifModified&&(x.lastModified[o]&&C.setRequestHeader("If-Modified-Since",x.lastModified[o]),x.etag[o]&&C.setRequestHeader("If-None-Match",x.etag[o]));(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&C.setRequestHeader("Content-Type",p.contentType);C.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Dn+"; q=0.01":""):p.accepts["*"]);for(i in p.headers)C.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(p.beforeSend.call(f,C,p)===!1||2===b))return C.abort();w="abort";for(i in{success:1,error:1,complete:1})C[i](p[i]);if(u=qn(jn,p,n,C)){C.readyState=1;l&&d.trigger("ajaxSend",[C,p]);p.async&&p.timeout>0&&(s=setTimeout(function(){C.abort("timeout")},p.timeout));try{b=1;u.send(y,k)}catch(N){if(!(2>b))throw N;k(-1,N)}}else k(-1,"No Transport");return C},getJSON:function(e,t,n){return x.get(e,t,n,"json")},getScript:function(e,n){return x.get(e,t,n,"script")}});x.each(["get","post"],function(e,n){x[n]=function(e,r,i,o){return x.isFunction(r)&&(o=o||i,i=r,r=t),x.ajax({url:e,type:n,dataType:o,data:r,success:i})}});x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return x.globalEval(e),e}}});x.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1);e.crossDomain&&(e.type="GET",e.global=!1)});x.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=a.head||x("head")[0]||a.documentElement;return{send:function(t,i){n=a.createElement("script");n.async=!0;e.scriptCharset&&(n.charset=e.scriptCharset);n.src=e.url;n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))};r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});Fn=[];Bn=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Fn.pop()||x.expando+"_"+vn++;return this[e]=!0,e}});x.ajaxPrefilter("json jsonp",function(n,r,i){var o,a,s,l=n.jsonp!==!1&&(Bn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bn.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=x.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(Bn,"$1"+o):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return s||x.error(o+" was not called"),s[0]},n.dataTypes[0]="json",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a;n[o]&&(n.jsonpCallback=r.jsonpCallback,Fn.push(o));s&&x.isFunction(a)&&a(s[0]);s=a=t}),"script"):t});Wn=0;$n=e.ActiveXObject&&function(){for(var e in Pn)Pn[e](t,!0)};x.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&In()||zn()}:In;Rn=x.ajaxSettings.xhr();x.support.cors=!!Rn&&"withCredentials"in Rn;Rn=x.support.ajax=!!Rn;Rn&&x.ajaxTransport(function(n){if(!n.crossDomain||x.support.cors){var r;return{send:function(i,o){var a,s,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)l[s]=n.xhrFields[s];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType);n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(s in i)l.setRequestHeader(s,i[s])}catch(u){}l.send(n.hasContent&&n.data||null);r=function(e,i){var s,u,c,p;try{if(r&&(i||4===l.readyState))if(r=t,a&&(l.onreadystatechange=x.noop,$n&&delete Pn[a]),i)4!==l.readyState&&l.abort();else{p={};s=l.status;u=l.getAllResponseHeaders();"string"==typeof l.responseText&&(p.text=l.responseText);try{c=l.statusText}catch(f){c=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=p.text?200:404}}catch(d){i||o(-1,d)}p&&o(s,c,p,u)};n.async?4===l.readyState?setTimeout(r):(a=++Wn,$n&&(Pn||(Pn={},x(e).unload($n)),Pn[a]=r),l.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Un,Vn=/^(?:toggle|show|hide)$/,Yn=RegExp("^(?:([+-])=|)("+w+")([a-z%]*)$","i"),Jn=/queueHooks$/,Gn=[nr],Qn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Yn.exec(t),o=i&&i[3]||(x.cssNumber[e]?"":"px"),a=(x.cssNumber[e]||"px"!==o&&+r)&&Yn.exec(x.css(n.elem,e)),s=1,l=20;if(a&&a[3]!==o){o=o||a[3];i=i||[];a=+r||1;do s=s||".5",a/=s,x.style(n.elem,e,a+o);while(s!==(s=n.cur()/r)&&1!==s&&--l)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};x.Animation=x.extend(er,{tweener:function(e,t){x.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],Qn[n]=Qn[n]||[],Qn[n].unshift(t)},prefilter:function(e,t){t?Gn.unshift(e):Gn.push(e)}});x.Tween=rr;rr.prototype={constructor:rr,init:function(e,t,n,r,i,o){this.elem=e;this.prop=n;this.easing=i||"swing";this.options=t;this.start=this.now=this.cur();this.end=r;this.unit=o||(x.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}};rr.prototype.init.prototype=rr.prototype;rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=x.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){x.fx.step[e.prop]?x.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[x.cssProps[e.prop]]||x.cssHooks[e.prop])?x.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}};rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}};x.each(["toggle","show","hide"],function(e,t){var n=x.fn[t];x.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}});x.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=x.isEmptyObject(e),o=x.speed(t,n,r),a=function(){var t=er(this,x.extend({},e),o);(i||x._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop;t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=x.timers,a=x._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&Jn.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&x.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=x._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=x.timers,a=r?r.length:0;for(n.finish=!0,x.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}});x.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){x.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}});x.speed=function(e,t,n){var r=e&&"object"==typeof e?x.extend({},e):{complete:n||!n&&t||x.isFunction(e)&&e,duration:e,easing:n&&t||t&&!x.isFunction(t)&&t};return r.duration=x.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in x.fx.speeds?x.fx.speeds[r.duration]:x.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){x.isFunction(r.old)&&r.old.call(this);r.queue&&x.dequeue(this,r.queue)},r};x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}};x.timers=[];x.fx=rr.prototype.init;x.fx.tick=function(){var e,n=x.timers,r=0;for(Xn=x.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||x.fx.stop();Xn=t};x.fx.timer=function(e){e()&&x.timers.push(e)&&x.fx.start()};x.fx.interval=13;x.fx.start=function(){Un||(Un=setInterval(x.fx.tick,x.fx.interval))};x.fx.stop=function(){clearInterval(Un);Un=null};x.fx.speeds={slow:600,fast:200,_default:400};x.fx.step={};x.expr&&x.expr.filters&&(x.expr.filters.animated=function(e){return x.grep(x.timers,function(t){return e===t.elem}).length});x.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){x.offset.setOffset(this,e,t)});var n,r,o={top:0,left:0},a=this[0],s=a&&a.ownerDocument;if(s)return n=s.documentElement,x.contains(n,a)?(typeof a.getBoundingClientRect!==i&&(o=a.getBoundingClientRect()),r=or(s),{top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o};x.offset={setOffset:function(e,t,n){var r=x.css(e,"position");"static"===r&&(e.style.position="relative");var i=x(e),o=i.offset(),a=x.css(e,"top"),s=x.css(e,"left"),l=("absolute"===r||"fixed"===r)&&x.inArray("auto",[a,s])>-1,u={},c={},p,f;l?(c=i.position(),p=c.top,f=c.left):(p=parseFloat(a)||0,f=parseFloat(s)||0);x.isFunction(t)&&(t=t.call(e,n,o));null!=t.top&&(u.top=t.top-o.top+p);null!=t.left&&(u.left=t.left-o.left+f);"using"in t?t.using.call(e,u):i.css(u)}};x.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===x.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),x.nodeName(e[0],"html")||(n=e.offset()),n.top+=x.css(e[0],"borderTopWidth",!0),n.left+=x.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-x.css(r,"marginTop",!0),left:t.left-n.left-x.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||s;e&&!x.nodeName(e,"html")&&"static"===x.css(e,"position");)e=e.offsetParent;return e||s})}});x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);x.fn[e]=function(i){return x.access(this,function(e,i,o){var a=or(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?x(a).scrollLeft():o,r?o:x(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}});x.each({Height:"height",Width:"width"},function(e,n){x.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){x.fn[i]=function(i,o){var a=arguments.length&&(r||"boolean"!=typeof i),s=r||(i===!0||o===!0?"margin":"border");return x.access(this,function(n,r,i){var o;return x.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):i===t?x.css(n,r,s):x.style(n,r,i,s)},n,a?i:t,a,null)}})});x.fn.size=function(){return this.length};x.fn.andSelf=x.fn.addBack;"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=x:(e.jQuery=e.$=x,"function"==typeof define&&define.amd&&define("jquery",[],function(){return x}))})(window);
/*! jsviews.js v0.9.88 (Beta) single-file version: http://jsviews.com/ */
/*! includes JsRender, JsObservable and JsViews - see: http://jsviews.com/#download */
(function(factory,global){var $=global.jQuery;typeof exports=="object"?module.exports=$?factory(global,$):function($){return factory(global,$)}:typeof define=="function"&&define.amd?define(["jquery"],function($){return factory(global,$)}):factory(global,!1)})(function(global,$){"use strict";function getDerivedMethod(baseMethod,method){return function(){var ret,tag=this,prevBase=tag.base;return tag.base=baseMethod,ret=method.apply(tag,arguments),tag.base=prevBase,ret}}function getMethod(baseMethod,method){return $isFunction(method)&&(method=getDerivedMethod(baseMethod?baseMethod._d?baseMethod:getDerivedMethod(noop,baseMethod):noop,method),method._d=1),method}function tagHandlersFromProps(tag,tagCtx){for(var prop in tagCtx.props)!rHasHandlers.test(prop)||tag[prop]&&tag[prop].fix||(tag[prop]=getMethod(tag.constructor.prototype[prop],tagCtx.props[prop]))}function retVal(val){return val}function noop(){return""}function dbgBreak(val){try{console.log("JsRender dbg breakpoint: "+val);throw"dbg breakpoint";}catch(e){}return this.base?this.baseApply(arguments):val}function JsViewsError(message){this.name=($.link?"JsViews":"JsRender")+" Error";this.message=message||this.name}function $extend(target,source){if(target){for(var name in source)target[name]=source[name];return target}}function $viewsDelimiters(openChars,closeChars,link){return openChars?$isArray(openChars)?$viewsDelimiters.apply($views,openChars):($subSettings.delimiters=[openChars,closeChars,linkChar=link?link.charAt(0):linkChar],delimOpenChar0=openChars.charAt(0),delimOpenChar1=openChars.charAt(1),delimCloseChar0=closeChars.charAt(0),delimCloseChar1=closeChars.charAt(1),openChars="\\"+delimOpenChar0+"(\\"+linkChar+")?\\"+delimOpenChar1,closeChars="\\"+delimCloseChar0+"\\"+delimCloseChar1,rTag="(?:(\\w+(?=[\\/\\s\\"+delimCloseChar0+"]))|(\\w+)?(:)|(>)|(\\*))\\s*((?:[^\\"+delimCloseChar0+"]|\\"+delimCloseChar0+"(?!\\"+delimCloseChar1+"))*?)",$sub.rTag="(?:"+rTag+")",rTag=new RegExp("(?:"+openChars+rTag+"(\\/)?|\\"+delimOpenChar0+"(\\"+linkChar+")?\\"+delimOpenChar1+"(?:(?:\\/(\\w+))\\s*|!--[\\s\\S]*?--))"+closeChars,"g"),$sub.rTmpl=new RegExp("^\\s|\\s$|<.*>|([^\\\\]|^)[{}]|"+openChars+".*"+closeChars),$viewsSettings):$subSettings.delimiters}function getView(inner,type){type||inner===!0||(type=inner,inner=undefined);var views,i,l,found,view=this,root=!type||type==="root";if(inner){if(found=type&&view.type===type&&view,!found)if(views=view.views,view._.useKey){for(i in views)if(found=type?views[i].get(inner,type):views[i])break}else for(i=0,l=views.length;!found&&i<l;i++)found=type?views[i].get(inner,type):views[i]}else if(root)found=view.root;else while(view&&!found)found=view.type===type?view:undefined,view=view.parent;return found}function getNestedIndex(){var view=this.get("item");return view?view.index:undefined}function getIndex(){return this.index}function contextParameter(key,value,isContextCb){var wrapped,deps,res,obsCtxPrm,storeView=this,isUpdate=!isRenderCall&&value!==undefined,store=storeView.ctx;if(key in store||key in(store=$helpers)){if(res=store&&store[key],key==="tag"||key==="root"||key==="parentTags"||storeView._.it===key)return res}else store=undefined;if((!res||!$isFunction(res)&&storeView.linked||storeView.tagCtx)&&(res&&res._cxp||(store!==$helpers&&(storeView=storeView.ctx&&storeView.ctx.tag||storeView.root,store=storeView._ocps,res=store&&store[key]||res),res&&res._cxp||!(isContextCb||isUpdate)||(res=$sub._crcp(key,res,storeView,store))),obsCtxPrm=res&&res._cxp)){if(isUpdate)return $sub._ucp(key,value,storeView,obsCtxPrm);if(isContextCb)return deps=res[1]?$sub._ceo(res[1].deps):[_ocp],deps.unshift(res[0]),deps._cxp=obsCtxPrm,deps;res=res[1]?obsCtxPrm.tag&&obsCtxPrm.tag.cvtArgs?obsCtxPrm.tag.cvtArgs(undefined,1,obsCtxPrm.tagElse)[obsCtxPrm.ind]:res[1](res[0].data,res[0],$sub):res[0]._ocp}return res&&$isFunction(res)&&(wrapped=function(){return res.apply(!this||this===global?storeView:this,arguments)},$extend(wrapped,res),wrapped._vw=storeView),wrapped||res}function getTemplate(tmpl){return tmpl&&(tmpl.fn?tmpl:this.getRsc("templates",tmpl)||$templates(tmpl))}function convertVal(converter,view,tagCtx,onError){var tag,value,boundTag=typeof tagCtx=="number"&&view.tmpl.bnds[tagCtx-1],linkCtx=view.linkCtx;return onError===undefined&&boundTag&&boundTag._lr&&(onError=""),onError!==undefined?tagCtx=onError={props:{},args:[onError]}:boundTag&&(tagCtx=boundTag(view.data,view,$sub)),boundTag=boundTag._bd&&boundTag,value=tagCtx.args[0],(converter||boundTag)&&(tag=linkCtx&&linkCtx.tag,tagCtx.view=view,tag||(tag=$extend(new $sub._tg,{_:{inline:!linkCtx,bnd:boundTag,unlinked:!0},tagName:":",cvt:converter,flow:!0,tagCtx:tagCtx}),linkCtx&&(linkCtx.tag=tag,tag.linkCtx=linkCtx),tagCtx.ctx=extendCtx(tagCtx.ctx,(linkCtx?linkCtx.view:view).ctx),tagHandlersFromProps(tag,tagCtx)),tag._er=onError&&value,tag.ctx=tagCtx.ctx||tag.ctx||{},tagCtx.ctx=undefined,value=tag.cvtArgs(converter!=="true"&&converter)[0]),value=boundTag&&view._.onRender?view._.onRender(value,view,tag):value,value!=undefined?value:""}function convertArgs(converter,bound,tagElse){var l,key,boundArgs,args,bindTo,tag,tagCtx=this;if(tagCtx.tagName?(tag=tagCtx,tagCtx=tag.tagCtxs?tag.tagCtxs[tagElse||0]:tag.tagCtx):(tag=tagCtx.tag,tagElse=tagCtx.index),bindTo=tag.bindTo,args=tagCtx.args,converter=converter||tag.convert,""+converter===converter&&(converter=tagCtx.view.getRsc("converters",converter)||error("Unknown converter: '"+converter+"'")),args.length||tag.argDefault===!1||tagCtx.index?converter&&!bound&&(args=args.slice()):args=[tagCtx.view.data],bindTo){for(boundArgs=[],l=bindTo.length;l--;)key=bindTo[l],boundArgs.unshift(argOrProp(tagCtx,key));bound&&(args=boundArgs)}if(converter)if(bindTo=bindTo||[0],converter=converter.apply(tag,boundArgs||args),l=bindTo.length,converter=l<2?[converter]:converter||[],bound)args=converter;else while(l--)key=bindTo[l],+key===key&&(args[key]=converter?converter[l]:undefined);return args}function argOrProp(context,key){return context=context[+key===key?"args":"props"],context&&context[key]}function convertBoundArgs(tagElse){return this.cvtArgs(undefined,!0,tagElse)}function getResource(resourceType,itemName){for(var res,store,view=this;res===undefined&&view;)store=view.tmpl&&view.tmpl[resourceType],res=store&&store[itemName],view=view.parent;return res||$views[resourceType][itemName]}function renderTag(tagName,parentView,tmpl,tagCtxs,isUpdate,onError){parentView=parentView||topView;var tag,tagDef,template,tags,attr,parentTag,l,m,itemRet,tagCtx,tagCtxCtx,ctxPrm,bindTo,content,callInit,mapDef,thisMap,args,props,tagDataMap,contentCtx,key,i=0,ret="",linkCtx=parentView.linkCtx||0,ctx=parentView.ctx,parentTmpl=tmpl||parentView.tmpl,boundTag=typeof tagCtxs=="number"&&parentView.tmpl.bnds[tagCtxs-1];for(tagName._is==="tag"?(tag=tagName,tagName=tag.tagName,tagCtxs=tag.tagCtxs,template=tag.template):(tagDef=parentView.getRsc("tags",tagName)||error("Unknown tag: {{"+tagName+"}} "),template=tagDef.template),onError===undefined&&boundTag&&boundTag._lr&&(onError=""),onError!==undefined?(ret+=onError,tagCtxs=onError=[{props:{},args:[]}]):boundTag&&(tagCtxs=boundTag(parentView.data,parentView,$sub)),l=tagCtxs.length;i<l;i++)tagCtx=tagCtxs[i],linkCtx&&linkCtx.tag&&(!i||linkCtx.tag._.inline)&&!tag._er||((content=parentTmpl.tmpls&&tagCtx.tmpl)&&(content=tagCtx.content=parentTmpl.tmpls[content-1]),tagCtx.index=i,tagCtx.tmpl=content,tagCtx.render=renderContent,tagCtx.view=parentView,tagCtx.ctx=extendCtx(tagCtx.ctx,ctx)),(tmpl=tagCtx.props.tmpl)&&(tagCtx.tmpl=parentView.getTmpl(tmpl)),tag||(tag=new tagDef._ctr,callInit=!!tag.init,tag.parent=parentTag=ctx&&ctx.tag,tag.tagCtxs=tagCtxs,tagDataMap=tag.dataMap,linkCtx&&(tag._.inline=!1,linkCtx.tag=tag,tag.linkCtx=linkCtx),(tag._.bnd=boundTag||linkCtx.fn)?tag._.arrVws={}:tag.dataBoundOnly&&error(tagName+" must be data-bound:\n{^{"+tagName+"}}")),bindTo=tag.bindTo||[0],tagCtxs=tag.tagCtxs,tagDataMap=tag.dataMap,tagCtx.tag=tag,tagDataMap&&tagCtxs&&(tagCtx.map=tagCtxs[i].map),tag.flow||(tagCtxCtx=tagCtx.ctx=tagCtx.ctx||{},tags=tag.parents=tagCtxCtx.parentTags=ctx&&extendCtx(tagCtxCtx.parentTags,ctx.parentTags)||{},parentTag&&(tags[parentTag.tagName]=parentTag),tags[tag.tagName]=tagCtxCtx.tag=tag);if(!(tag._er=onError)){for(tagHandlersFromProps(tag,tagCtxs[0]),tag.rendering={},i=0;i<l;i++){if(tagCtx=tag.tagCtx=tagCtxs[i],props=tagCtx.props,tag.ctx=tagCtx.ctx,i||(callInit&&(tag.init(tagCtx,linkCtx,tag.ctx),callInit=undefined),linkCtx&&(linkCtx.attr=tag.attr=linkCtx.attr||tag.attr),attr=tag.attr,tag._.noVws=attr&&attr!==HTML),args=tag.cvtArgs(undefined,undefined,i),tag.linkedCtxParam)for(m=bindTo.length;m--;)(ctxPrm=tag.linkedCtxParam[m])&&(key=bindTo[m],tagCtx.ctx[ctxPrm]=$sub._cp(argOrProp(tagCtx,key),argOrProp(tagCtx.params,key),tagCtx.view,tag._.bnd&&{tag:tag,ind:m,tagElse:i}));(mapDef=props.dataMap||tagDataMap)&&(args.length||props.dataMap)&&(thisMap=tagCtx.map,(!thisMap||thisMap.src!==args[0]||isUpdate)&&(thisMap&&thisMap.src&&thisMap.unmap(),thisMap=tagCtx.map=mapDef.map(args[0],props,undefined,!tag._.bnd)),args=[thisMap.tgt]);itemRet=undefined;tag.render&&(itemRet=tag.render.apply(tag,args),parentView.linked&&itemRet&&!rWrappedInViewMarker.test(itemRet)&&(tmpl={links:[]},tmpl.render=tmpl.fn=function(){return itemRet},itemRet=renderWithViews(tmpl,parentView.data,undefined,!0,parentView,undefined,undefined,tag)));args.length||(args=[parentView]);itemRet===undefined&&(contentCtx=args[0],tag.contentCtx&&(contentCtx=tag.contentCtx===!0?parentView:tag.contentCtx(contentCtx)),itemRet=tagCtx.render(contentCtx,!0)||(isUpdate?undefined:""));ret=ret?ret+(itemRet||""):itemRet}tag.rendering=undefined}return tag.tagCtx=tagCtxs[0],tag.ctx=tag.tagCtx.ctx,tag._.noVws&&tag._.inline&&(ret=attr==="text"?$converters.html(ret):""),boundTag&&parentView._.onRender?parentView._.onRender(ret,parentView,tag):ret}function View(context,type,parentView,data,template,key,onRender,contentTmpl){var views,parentView_,self_,self=this,isArray=type==="array";self.content=contentTmpl;self.views=isArray?[]:{};self.parent=parentView;self.type=type||"top";self.root=parentView&&parentView.root||type&&self;self.data=data;self.tmpl=template;self_=self._={key:0,useKey:isArray?0:1,id:""+viewId++,onRender:onRender,bnds:{}};self.linked=!!onRender;parentView?(views=parentView.views,parentView_=parentView._,parentView_.useKey?(views[self_.key="_"+parentView_.useKey++]=self,self.index=indexStr,self.getIndex=getNestedIndex):views.length===(self_.key=self.index=key)?views.push(self):views.splice(key,0,self),self.ctx=context||parentView.ctx):self.ctx=context||{}}function compileChildResources(parentTmpl){var storeName,storeNames,resources;for(storeName in jsvStores)storeNames=storeName+"s",parentTmpl[storeNames]&&(resources=parentTmpl[storeNames],parentTmpl[storeNames]={},$views[storeNames](resources,parentTmpl))}function compileTag(name,tagDef,parentTmpl){function Tag(){var tag=this;tag._={inline:!0,unlinked:!0};tag.tagName=name}function makeArray(type){var linkedElement;(linkedElement=tagDef[type])&&(tagDef[type]=linkedElement=$isArray(linkedElement)?linkedElement:[linkedElement],(bindToLength||1)!==linkedElement.length&&error(type+" length not same as bindTo "))}var tmpl,baseTag,prop,l,key,bindToLength,bindTo=tagDef.bindTo,compiledDef=new $sub._tg;if($isFunction(tagDef)?tagDef={depends:tagDef.depends,render:tagDef}:""+tagDef===tagDef&&(tagDef={template:tagDef}),bindTo!==undefined)for(bindTo=tagDef.bindTo=$isArray(bindTo)?bindTo:[bindTo],l=bindToLength=bindTo.length;l--;)key=bindTo[l],isNaN(parseInt(key))||(key=parseInt(key)),bindTo[l]=key;if(makeArray("linkedElement"),makeArray("linkedCtxParam"),baseTag=tagDef.baseTag){tagDef.flow=!!tagDef.flow;tagDef.baseTag=baseTag=""+baseTag===baseTag?parentTmpl&&parentTmpl.tags[baseTag]||$tags[baseTag]:baseTag;compiledDef=$extend(compiledDef,baseTag);for(prop in tagDef)compiledDef[prop]=getMethod(baseTag[prop],tagDef[prop])}else compiledDef=$extend(compiledDef,tagDef);return(tmpl=compiledDef.template)!==undefined&&(compiledDef.template=""+tmpl===tmpl?$templates[tmpl]||$templates(tmpl):tmpl),(Tag.prototype=compiledDef).constructor=compiledDef._ctr=Tag,parentTmpl&&(compiledDef._parentTmpl=parentTmpl),compiledDef}function baseApply(args){return this.base.apply(this,args)}function compileTmpl(name,tmpl,parentTmpl,options){function lookupTemplate(value){var currentName,tmpl;if(""+value===value||value.nodeType>0&&(elem=value)){if(!elem)if(/^\.\/[^\\:*?"<>]*$/.test(value))(tmpl=$templates[name=name||value])?value=tmpl:elem=document.getElementById(value);else if($.fn&&!$sub.rTmpl.test(value))try{elem=$(value,document)[0]}catch(e){}elem&&(options?value=elem.innerHTML:(currentName=elem.getAttribute(tmplAttr),currentName&&(currentName!==jsvTmpl?(value=$templates[currentName],delete $templates[currentName]):$.fn&&(value=$.data(elem)[jsvTmpl])),currentName&&value||(name=name||($.fn?jsvTmpl:value),value=compileTmpl(name,elem.innerHTML,parentTmpl,options)),value.tmplName=name=name||currentName,name!==jsvTmpl&&($templates[name]=value),elem.setAttribute(tmplAttr,name),$.fn&&$.data(elem,jsvTmpl,value)));elem=undefined}else value.fn||(value=undefined);return value}var elem,compiledTmpl,tmplOrMarkup=tmpl=tmpl||"";return options===0&&(options=undefined,tmplOrMarkup=lookupTemplate(tmplOrMarkup)),options=options||(tmpl.markup?tmpl:{}),options.tmplName=name,parentTmpl&&(options._parentTmpl=parentTmpl),!tmplOrMarkup&&tmpl.markup&&(tmplOrMarkup=lookupTemplate(tmpl.markup))&&tmplOrMarkup.fn&&(tmplOrMarkup=tmplOrMarkup.markup),tmplOrMarkup!==undefined?(tmplOrMarkup.fn||tmpl.fn?tmplOrMarkup.fn&&(compiledTmpl=tmplOrMarkup):(tmpl=tmplObject(tmplOrMarkup,options),tmplFn(tmplOrMarkup.replace(rEscapeQuotes,"\\$&"),tmpl)),compiledTmpl||(compiledTmpl=$extend(function(){return compiledTmpl.render.apply(compiledTmpl,arguments)},tmpl),compileChildResources(compiledTmpl)),compiledTmpl):void 0}function getDefaultVal(defaultVal,data){return $isFunction(defaultVal)?defaultVal.call(data):defaultVal}function unmapArray(modelArr){for(var arr=[],i=0,l=modelArr.length;i<l;i++)arr.push(modelArr[i].unmap());return arr}function compileViewModel(name,type){function GetNew(args){constructor.apply(this,args)}function vm(){return new GetNew(arguments)}function iterate(data,action){for(var getterType,defaultVal,prop,ob,j=0;j<g;j++)prop=getters[j],getterType=undefined,prop+""!==prop&&(getterType=prop,prop=getterType.getter),(ob=data[prop])===undefined&&getterType&&(defaultVal=getterType.defaultVal)!==undefined&&(ob=getDefaultVal(defaultVal,data)),action(ob,getterType&&viewModels[getterType.type],prop)}function map(data){data=data+""===data?JSON.parse(data):data;var l,prop,j=0,ob=data,arr=[];if($isArray(data)){for(data=data||[],l=data.length;j<l;j++)arr.push(this.map(data[j]));return arr._is=name,arr.unmap=unmap,arr.merge=merge,arr}if(data){iterate(data,function(ob,viewModel){viewModel&&(ob=viewModel.map(ob));arr.push(ob)});ob=this.apply(this,arr);for(prop in data)prop===$expando||getterNames[prop]||(ob[prop]=data[prop])}return ob}function merge(data){data=data+""===data?JSON.parse(data):data;var j,l,m,prop,mod,found,assigned,ob,newModArr,k=0,model=this;if($isArray(model)){for(assigned={},newModArr=[],l=data.length,m=model.length;k<l;k++){for(ob=data[k],found=!1,j=0;j<m&&!found;j++)assigned[j]||(mod=model[j],id&&(assigned[j]=found=id+""===id?ob[id]&&(getterNames[id]?mod[id]():mod[id])===ob[id]:id(mod,ob)));found?(mod.merge(ob),newModArr.push(mod)):newModArr.push(vm.map(ob))}$observable?$observable(model).refresh(newModArr,!0):model.splice.apply(model,[0,model.length].concat(newModArr));return}iterate(data,function(ob,viewModel,getter){viewModel?model[getter]().merge(ob):model[getter](ob)});for(prop in data)prop===$expando||getterNames[prop]||(model[prop]=data[prop])}function unmap(){var ob,prop,getterType,value,k=0,model=this;if($isArray(model))return unmapArray(model);for(ob={};k<g;k++)prop=getters[k],getterType=undefined,prop+""!==prop&&(getterType=prop,prop=getterType.getter),value=model[prop](),ob[prop]=getterType&&value&&viewModels[getterType.type]?$isArray(value)?unmapArray(value):value.unmap():value;for(prop in model)prop==="_is"||getterNames[prop]||prop===$expando||prop.charAt(0)==="_"&&getterNames[prop.slice(1)]||$isFunction(model[prop])||(ob[prop]=model[prop]);return ob}var i,constructor,viewModels=this,getters=type.getters,extend=type.extend,id=type.id,proto=$.extend({_is:name||"unnamed",unmap:unmap,merge:merge},extend),args="",body="",g=getters?getters.length:0,$observable=$.observable,getterNames={};for(GetNew.prototype=proto,i=0;i<g;i++)(function(getter){getter=getter.getter||getter;getterNames[getter]=i+1;var privField="_"+getter;args+=(args?",":"")+getter;body+="this."+privField+" = "+getter+";\n";proto[getter]=proto[getter]||function(val){if(!arguments.length)return this[privField];$observable?$observable(this).setProperty(getter,val):this[privField]=val};$observable&&(proto[getter].set=proto[getter].set||function(val){this[privField]=val})})(getters[i]);return constructor=new Function(args,body.slice(0,-1)),constructor.prototype=proto,proto.constructor=constructor,vm.map=map,vm.getters=getters,vm.extend=extend,vm.id=id,vm}function tmplObject(markup,options){var htmlTag,wrapMap=$subSettingsAdvanced._wm||{},tmpl=$extend({tmpls:[],links:{},bnds:[],_is:"template",render:renderContent},options);return tmpl.markup=markup,options.htmlTag||(htmlTag=rFirstElem.exec(markup),tmpl.htmlTag=htmlTag?htmlTag[1].toLowerCase():""),htmlTag=wrapMap[tmpl.htmlTag],htmlTag&&htmlTag!==wrapMap.div&&(tmpl.markup=$.trim(tmpl.markup)),tmpl}function registerStore(storeName,storeSettings){function theStore(name,item,parentTmpl){var compile,itemName,thisStore,onStore=$sub.onStore[storeName];if(name&&typeof name===OBJECT&&!name.nodeType&&!name.markup&&!name.getTgt&&!(storeName==="viewModel"&&name.getters||name.extend)){for(itemName in name)theStore(itemName,name[itemName],item);return item||$views}return item===undefined&&(item=name,name=undefined),name&&""+name!==name&&(parentTmpl=item,item=name,name=undefined),thisStore=parentTmpl?storeName==="viewModel"?parentTmpl:parentTmpl[storeNames]=parentTmpl[storeNames]||{}:theStore,compile=storeSettings.compile,item===null?name&&delete thisStore[name]:(compile&&(item=compile.call(thisStore,name,item,parentTmpl,0),item._is=storeName),name&&(thisStore[name]=item)),onStore&&onStore(name,item,parentTmpl,compile),item}var storeNames=storeName+"s";$views[storeNames]=theStore}function addSetting(st){$viewsSettings[st]=function(value){return arguments.length?($subSettings[st]=value,$viewsSettings):$subSettings[st]}}function dataMap(mapDef){function Map(source,options){this.tgt=mapDef.getTgt(source,options)}return $isFunction(mapDef)&&(mapDef={getTgt:mapDef}),mapDef.baseMap&&(mapDef=$extend($extend({},mapDef.baseMap),mapDef)),mapDef.map=function(source,options){return new Map(source,options)},mapDef}function renderContent(data,context,noIteration,parentView,key,onRender){var i,l,tag,tmpl,tagCtx,isTopRenderCall,prevData,prevIndex,view=parentView,result="";if(context===!0?(noIteration=context,context=undefined):typeof context!==OBJECT&&(context=undefined),(tag=this.tag)?(tagCtx=this,view=view||tagCtx.view,tmpl=view.getTmpl(tag.template||tagCtx.tmpl),arguments.length||(data=view)):tmpl=this,tmpl){if(!parentView&&data&&data._is==="view"&&(view=data),view&&data===view&&(data=view.data),isTopRenderCall=!view,isRenderCall=isRenderCall||isTopRenderCall,view||((context=context||{}).root=data),!isRenderCall||$subSettingsAdvanced.useViews||tmpl.useViews||view&&view!==topView)result=renderWithViews(tmpl,data,context,noIteration,view,key,onRender,tag);else{if(view?(prevData=view.data,prevIndex=view.index,view.index=indexStr):(view=topView,view.data=data,view.ctx=context),$isArray(data)&&!noIteration)for(i=0,l=data.length;i<l;i++)view.index=i,view.data=data[i],result+=tmpl.fn(data[i],view,$sub);else view.data=data,result+=tmpl.fn(data,view,$sub);view.data=prevData;view.index=prevIndex}isTopRenderCall&&(isRenderCall=undefined)}return result}function renderWithViews(tmpl,data,context,noIteration,view,key,onRender,tag){function setItemVar(item){newCtx=$extend({},context);newCtx[itemVar]=item}var i,l,newView,childView,itemResult,swapContent,contentTmpl,outerOnRender,tmplName,itemVar,newCtx,tagCtx,result="";if(tag&&(tmplName=tag.tagName,tagCtx=tag.tagCtx,context=context?extendCtx(context,tag.ctx):tag.ctx,tmpl===view.content?contentTmpl=tmpl!==view.ctx._wrp?view.ctx._wrp:undefined:tmpl!==tagCtx.content?tmpl===tag.template?(contentTmpl=tagCtx.tmpl,context._wrp=tagCtx.content):contentTmpl=tagCtx.content||view.content:contentTmpl=view.content,tagCtx.props.link===!1&&(context=context||{},context.link=!1),(itemVar=tagCtx.props.itemVar)&&(itemVar.charAt(0)!=="~"&&syntaxError("Use itemVar='~myItem'"),itemVar=itemVar.slice(1))),view&&(onRender=onRender||view._.onRender,context=extendCtx(context,view.ctx)),key===!0&&(swapContent=!0,key=0),onRender&&(context&&context.link===!1||tag&&tag._.noVws)&&(onRender=undefined),outerOnRender=onRender,onRender===!0&&(outerOnRender=undefined,onRender=view._.onRender),context=tmpl.helpers?extendCtx(tmpl.helpers,context):context,newCtx=context,$isArray(data)&&!noIteration)for(newView=swapContent?view:key!==undefined&&view||new View(context,"array",view,data,tmpl,key,onRender,contentTmpl),view&&view._.useKey&&(newView._.bnd=!tag||tag._.bnd&&tag),i=0,l=data.length;i<l;i++)itemVar&&setItemVar(data[i]),childView=new View(newCtx,"item",newView,data[i],tmpl,(key||0)+i,onRender,newView.content),childView._.it=itemVar,itemResult=tmpl.fn(data[i],childView,$sub),result+=newView._.onRender?newView._.onRender(itemResult,childView):itemResult;else itemVar&&setItemVar(data),newView=swapContent?view:new View(newCtx,tmplName||"data",view,data,tmpl,key,onRender,contentTmpl),newView._.it=itemVar,result+=tmpl.fn(data,newView,$sub);return tag&&(newView.tag=tag,newView.tagElse=tagCtx.index,tagCtx.contentView=newView),outerOnRender?outerOnRender(result,newView):result}function onRenderError(e,view,fallback){var message=fallback!==undefined?$isFunction(fallback)?fallback.call(view.data,e,view):fallback||"":"{Error: "+(e.message||e)+"}";return $subSettings.onError&&(fallback=$subSettings.onError.call(view.data,e,fallback&&message,view))!==undefined&&(message=fallback),view&&!view.linkCtx?$converters.html(message):message}function error(message){throw new $sub.Err(message);}function syntaxError(message){error("Syntax error\n"+message)}function tmplFn(markup,tmpl,isLinkExpr,convertBack,hasElse){function pushprecedingContent(shift){shift-=loc;shift&&content.push(markup.substr(loc,shift).replace(rNewLine,"\\n"))}function blockTagCheck(tagName,block){tagName&&(tagName+="}}",syntaxError((block?"{{"+block+"}} block has {{/"+tagName+" without {{"+tagName:"Unmatched or missing {{/"+tagName)+", in template:\n"+markup))}function parseTag(all,bind,tagName,converter,colon,html,codeTag,params,slash,bind2,closeBlock,index){(codeTag&&bind||slash&&!tagName||params&&params.slice(-1)===":"||bind2)&&syntaxError(all);html&&(colon=":",converter=HTML);slash=slash||isLinkExpr&&!hasElse;var late,pathBindings=(bind||isLinkExpr)&&[[]],props="",args="",ctxProps="",paramsArgs="",paramsProps="",paramsCtxProps="",onError="",useTrigger="",block=!slash&&!colon;tagName=tagName||(params=params||"#data",colon);pushprecedingContent(index);loc=index+all.length;codeTag?allowCode&&content.push(["*","\n"+params.replace(/^:/,"ret+= ").replace(rUnescapeQuotes,"$1")+";\n"]):tagName?(tagName==="else"&&(rTestElseIf.test(params)&&syntaxError('for "{{else if expr}}" use "{{else expr}}"'),pathBindings=current[8]&&[[]],current[9]=markup.substring(current[9],index),current=stack.pop(),content=current[2],block=!0),params&&parseParams(params.replace(rNewLine," "),pathBindings,tmpl).replace(rBuildHash,function(all,onerror,isCtx,key,keyToken,keyValue,arg,param){return key="'"+keyToken+"':",arg?(args+=keyValue+",",paramsArgs+="'"+param+"',"):isCtx?(ctxProps+=key+"j._cp("+keyValue+',"'+param+'",view),',paramsCtxProps+=key+"'"+param+"',"):onerror?onError+=keyValue:(keyToken==="trigger"&&(useTrigger+=keyValue),keyToken==="lateRender"&&(late=1),props+=key+keyValue+",",paramsProps+=key+"'"+param+"',",hasHandlers=hasHandlers||rHasHandlers.test(keyToken)),""}).slice(0,-1),pathBindings&&pathBindings[0]&&pathBindings.pop(),newNode=[tagName,converter||!!convertBack||hasHandlers||"",block&&[],parsedParam(paramsArgs||(tagName===":"?"'#data',":""),paramsProps,paramsCtxProps),parsedParam(args||(tagName===":"?"data,":""),props,ctxProps),onError,useTrigger,late,pathBindings||0],content.push(newNode),block&&(stack.push(current),current=newNode,current[9]=loc)):closeBlock&&(blockTagCheck(closeBlock!==current[0]&&current[0]!=="else"&&closeBlock,current[0]),current[9]=markup.substring(current[9],index),current=stack.pop());blockTagCheck(!current&&closeBlock);content=current[2]}var i,result,newNode,hasHandlers,bindings,allowCode=$subSettings.allowCode||tmpl&&tmpl.allowCode||$viewsSettings.allowCode===!0,astTop=[],loc=0,stack=[],content=astTop,current=[,,astTop];if(allowCode&&tmpl._is&&(tmpl.allowCode=allowCode),isLinkExpr&&(convertBack!==undefined&&(markup=markup.slice(0,-convertBack.length-2)+delimCloseChar0),markup=delimOpenChar0+markup+delimCloseChar1),blockTagCheck(stack[0]&&stack[0][2].pop()[0]),markup.replace(rTag,parseTag),pushprecedingContent(markup.length),(loc=astTop[astTop.length-1])&&blockTagCheck(""+loc!==loc&&+loc[9]===loc[9]&&loc[0]),isLinkExpr){for(result=buildCode(astTop,markup,isLinkExpr),bindings=[],i=astTop.length;i--;)bindings.unshift(astTop[i][8]);setPaths(result,bindings)}else result=buildCode(astTop,tmpl);return result}function setPaths(fn,pathsArr){var key,paths,i=0,l=pathsArr.length;for(fn.deps=[],fn.paths=[];i<l;i++){fn.paths.push(paths=pathsArr[i]);for(key in paths)key!=="_jsvto"&&paths.hasOwnProperty(key)&&paths[key].length&&!paths[key].skp&&(fn.deps=fn.deps.concat(paths[key]))}}function parsedParam(args,props,ctx){return[args.slice(0,-1),props.slice(0,-1),ctx.slice(0,-1)]}function paramStructure(parts,type){return"\n\t"+(type?type+":{":"")+"args:["+parts[0]+"]"+(parts[1]||!type?",\n\tprops:{"+parts[1]+"}":"")+(parts[2]?",\n\tctx:{"+parts[2]+"}":"")}function parseParams(params,pathBindings,tmpl){function parseTokens(all,lftPrn0,lftPrn,bound,path,operator,err,eq,path2,prn,comma,lftPrn2,apos,quot,rtPrn,rtPrnDot,prn2,space,index,full){function parsePath(allPath,not,object,helper,view,viewProperty,pathTokens,leafToken){var subPath=object===".";if(object&&(path=path.slice(not.length),/^\.?constructor$/.test(leafToken||path)&&syntaxError(allPath),subPath||(allPath=(helper?'view.ctxPrm("'+helper+'")':view?"view":"data")+(leafToken?(viewProperty?"."+viewProperty:helper?"":view?"":"."+object)+(pathTokens||""):(leafToken=helper?"":view?viewProperty||"":object,"")),allPath=allPath+(leafToken?"."+leafToken:""),allPath=not+(allPath.slice(0,9)==="view.data"?allPath.slice(5):allPath)),bindings)){if(binds=named==="linkTo"?bindto=pathBindings._jsvto=pathBindings._jsvto||[]:bndCtx.bd,theOb=subPath&&binds[binds.length-1]){if(theOb._cpfn){while(theOb.sb)theOb=theOb.sb;theOb.bnd&&(path="^"+path.slice(1));theOb.sb=path;theOb.bnd=theOb.bnd||path.charAt(0)==="^"}}else binds.push(path);pathStart[parenDepth]=index+(subPath?1:0)}return allPath}bound&&!eq&&(path=bound+path);operator=operator||"";lftPrn=lftPrn||lftPrn0||lftPrn2;path=path||path2;prn=prn||prn2||"";var expr,exprFn,binds,theOb,newOb,rtSq=")";if(prn==="["&&(prn="[j._sq(",rtSq=")]"),!err||aposed||quoted){if(bindings&&rtPrnDot&&!aposed&&!quoted&&(!named||boundName||bindto)&&(expr=pathStart[parenDepth-1],full.length-1>index-(expr||0))){if(expr=full.slice(expr,index+all.length),exprFn!==!0)if(binds=bindto||bndStack[parenDepth-1].bd,theOb=binds[binds.length-1],theOb&&theOb.prm){while(theOb.sb&&theOb.sb.prm)theOb=theOb.sb;newOb=theOb.sb={path:theOb.sb,bnd:theOb.bnd}}else binds.push(newOb={path:binds.pop()});rtPrnDot=delimOpenChar1+":"+expr+" onerror=''"+delimCloseChar0;exprFn=tmplLinks[rtPrnDot];exprFn||(tmplLinks[rtPrnDot]=!0,tmplLinks[rtPrnDot]=exprFn=tmplFn(rtPrnDot,tmpl,!0));exprFn!==!0&&newOb&&(newOb._cpfn=exprFn,newOb.prm=bndCtx.bd,newOb.bnd=newOb.bnd||newOb.path&&newOb.path.indexOf("^")>=0)}return aposed?(aposed=!apos,aposed?all:lftPrn2+'"'):quoted?(quoted=!quot,quoted?all:lftPrn2+'"'):(lftPrn?(pathStart[parenDepth]=index++,bndCtx=bndStack[++parenDepth]={bd:[]},lftPrn):"")+(space?parenDepth?"":(paramIndex=full.slice(paramIndex,index),named?(named=boundName=bindto=!1,"\b"):"\b,")+paramIndex+(paramIndex=index+all.length,bindings&&pathBindings.push(bndCtx.bd=[]),"\b"):eq?(parenDepth&&syntaxError(params),bindings&&pathBindings.pop(),named=path,boundName=bound,paramIndex=index+all.length,bindings&&(bindings=bndCtx.bd=pathBindings[named]=[],bindings.skp=!bound),path+":"):path?path.split("^").join(".").replace(rPath,parsePath)+(prn?(bndCtx=bndStack[++parenDepth]={bd:[]},fnCall[parenDepth]=rtSq,prn):operator):operator?operator:rtPrn?(rtPrn=fnCall[parenDepth]||rtPrn,fnCall[parenDepth]=!1,bndCtx=bndStack[--parenDepth],rtPrn)+(prn?(bndCtx=bndStack[++parenDepth],fnCall[parenDepth]=rtSq,prn):""):comma?(fnCall[parenDepth]||syntaxError(params),","):lftPrn0?"":(aposed=apos,quoted=quot,'"'))}syntaxError(params)}var named,bindto,boundName,quoted,aposed,bindings=pathBindings&&pathBindings[0],bndCtx={bd:bindings},bndStack={0:bndCtx},paramIndex=0,tmplLinks=(tmpl?tmpl.links:bindings&&(bindings.links=bindings.links||{}))||topView.tmpl.links,parenDepth=0,fnCall={},pathStart={},result=(params+(tmpl?" ":"")).replace(rParams,parseTokens);return!parenDepth&&result||syntaxError(params)}function buildCode(ast,tmpl,isLinkExpr){var i,node,tagName,converter,tagCtx,hasTag,hasEncoder,getsVal,hasCnvt,useCnvt,tmplBindings,pathBindings,params,boundOnErrStart,boundOnErrEnd,tagRender,nestedTmpls,tmplName,nestedTmpl,tagAndElses,content,markup,nextIsElse,oldCode,isElse,isGetVal,tagCtxFn,onError,tagStart,trigger,lateRender,tmplBindingKey=0,useViews=$subSettingsAdvanced.useViews||tmpl.useViews||tmpl.tags||tmpl.templates||tmpl.helpers||tmpl.converters,code="",tmplOptions={},l=ast.length;for(""+tmpl===tmpl?(tmplName=isLinkExpr?'data-link="'+tmpl.replace(rNewLine," ").slice(1,-1)+'"':tmpl,tmpl=0):(tmplName=tmpl.tmplName||"unnamed",tmpl.allowCode&&(tmplOptions.allowCode=!0),tmpl.debug&&(tmplOptions.debug=!0),tmplBindings=tmpl.bnds,nestedTmpls=tmpl.tmpls),i=0;i<l;i++)if(node=ast[i],""+node===node)code+='\n+"'+node+'"';else if(tagName=node[0],tagName==="*")code+=";\n"+node[1]+"\nret=ret";else{if(converter=node[1],content=!isLinkExpr&&node[2],tagCtx=paramStructure(node[3],"params")+"},"+paramStructure(params=node[4]),onError=node[5],trigger=node[6],lateRender=node[7],markup=node[9]&&node[9].replace(rUnescapeQuotes,"$1"),(isElse=tagName==="else")?pathBindings&&pathBindings.push(node[8]):tmplBindings&&(pathBindings=node[8])&&(pathBindings=[pathBindings],tmplBindingKey=tmplBindings.push(1)),useViews=useViews||params[1]||params[2]||pathBindings||/view.(?!index)/.test(params[0]),(isGetVal=tagName===":")?converter&&(tagName=converter===HTML?">":converter+tagName):(content&&(nestedTmpl=tmplObject(markup,tmplOptions),nestedTmpl.tmplName=tmplName+"/"+tagName,nestedTmpl.useViews=nestedTmpl.useViews||useViews,buildCode(content,nestedTmpl),useViews=nestedTmpl.useViews,nestedTmpls.push(nestedTmpl)),isElse||(tagAndElses=tagName,useViews=useViews||tagName&&(!$tags[tagName]||!$tags[tagName].flow),oldCode=code,code=""),nextIsElse=ast[i+1],nextIsElse=nextIsElse&&nextIsElse[0]==="else"),tagStart=onError?";\ntry{\nret+=":"\n+",boundOnErrStart="",boundOnErrEnd="",isGetVal&&(pathBindings||trigger||converter&&converter!==HTML||lateRender)){if(tagCtxFn=new Function("data,view,j,u","// "+tmplName+" "+ ++tmplBindingKey+" "+tagName+"\nreturn {"+tagCtx+"};"),tagCtxFn._er=onError,tagCtxFn._tag=tagName,tagCtxFn._bd=!!pathBindings,tagCtxFn._lr=lateRender,isLinkExpr)return tagCtxFn;setPaths(tagCtxFn,pathBindings);tagRender='c("'+converter+'",view,';useCnvt=!0;boundOnErrStart=tagRender+tmplBindingKey+",";boundOnErrEnd=")"}if(code+=isGetVal?(isLinkExpr?(onError?"try{\n":"")+"return ":tagStart)+(useCnvt?(useCnvt=undefined,useViews=hasCnvt=!0,tagRender+(tagCtxFn?(tmplBindings[tmplBindingKey-1]=tagCtxFn,tmplBindingKey):"{"+tagCtx+"}")+")"):tagName===">"?(hasEncoder=!0,"h("+params[0]+")"):(getsVal=!0,"((v="+params[0]+")!=null?v:"+(isLinkExpr?"null)":'"")'))):(hasTag=!0,"\n{view:view,tmpl:"+(content?nestedTmpls.length:"0")+","+tagCtx+"},"),tagAndElses&&!nextIsElse){if(code="["+code.slice(0,-1)+"]",tagRender='t("'+tagAndElses+'",view,this,',isLinkExpr||pathBindings){if(code=new Function("data,view,j,u"," // "+tmplName+" "+tmplBindingKey+" "+tagAndElses+"\nreturn "+code+";"),code._er=onError,code._tag=tagAndElses,pathBindings&&setPaths(tmplBindings[tmplBindingKey-1]=code,pathBindings),code._lr=lateRender,isLinkExpr)return code;boundOnErrStart=tagRender+tmplBindingKey+",undefined,";boundOnErrEnd=")"}code=oldCode+tagStart+tagRender+(code.deps&&tmplBindingKey||code)+")";pathBindings=0;tagAndElses=0}onError&&(useViews=!0,code+=";\n}catch(e){ret"+(isLinkExpr?"urn ":"+=")+boundOnErrStart+"j._err(e,view,"+onError+")"+boundOnErrEnd+";}"+(isLinkExpr?"":"ret=ret"))}code="// "+tmplName+"\nvar v"+(hasTag?",t=j._tag":"")+(hasCnvt?",c=j._cnvt":"")+(hasEncoder?",h=j._html":"")+(isLinkExpr?";\n":',ret=""\n')+(tmplOptions.debug?"debugger;":"")+code+(isLinkExpr?"\n":";\nreturn ret;");$subSettings.debugMode!==!1&&(code="try {\n"+code+"\n}catch(e){\nreturn j._err(e, view);\n}");try{code=new Function("data,view,j,u",code)}catch(e){syntaxError("Compiled template code:\n\n"+code+'\n: "'+(e.message||e)+'"')}return tmpl&&(tmpl.fn=code,tmpl.useViews=!!useViews),code}function extendCtx(context,parentContext){return context&&context!==parentContext?parentContext?$extend($extend({},parentContext),context):context:parentContext&&$extend({},parentContext)}function getCharEntity(ch){return charEntities[ch]||(charEntities[ch]="&#"+ch.charCodeAt(0)+";")}function getTargetProps(source){var key,prop,props=[];if(typeof source===OBJECT)for(key in source)prop=source[key],key!==$expando&&source.hasOwnProperty(key)&&!$isFunction(prop)&&props.push({key:key,prop:prop});return props}function $fnRender(data,context,noIteration){var tmplElem=this.jquery&&(this[0]||error("Unknown template")),tmpl=tmplElem.getAttribute(tmplAttr);return renderContent.call(tmpl&&$.data(tmplElem)[jsvTmpl]||$templates(tmplElem),data,context,noIteration)}function htmlEncode(text){return text!=undefined?rIsHtml.test(text)&&(""+text).replace(rHtmlEncode,getCharEntity)||text:""}function updateValues(sourceValues,tagElse,bindId,ev){var linkCtx,cvtBack,cnvtName,target,view,binding,sourceValue,origVals,sourceElem,sourceEl,oldLinkCtx,tos,to,tcpTag,exprOb,contextCb,l,tag;if(bindId&&bindId._tgId&&(tag=bindId,bindId=tag._tgId,tag._.chg=1),(binding=bindingStore[bindId])&&(tos=binding.to)){for(tos=tos[tagElse||0],linkCtx=binding.linkCtx,linkCtx.ev=ev,sourceElem=linkCtx.elem,view=linkCtx.view,tag=linkCtx.tag,!tag&&tos._cxp&&(tag=tos._cxp.path!==_ocp&&tos._cxp.tag,sourceValue=sourceValues[0],sourceValues=[],sourceValues[tos._cxp.ind]=sourceValue),(cnvtName=tag&&tag.convertBack)&&(cvtBack=$isFunction(cnvtName)?cnvtName:view.getRsc("converters",cnvtName)),sourceElem.nodeName==="SELECT"&&(sourceElem.multiple&&sourceValues[0]===null&&(sourceValues=[[]]),sourceElem._jsvSel=sourceValues),origVals=sourceValues,cvtBack&&(sourceValues=cvtBack.apply(tag,sourceValues),sourceValues=tos.length>1?sourceValues||[]:[sourceValues]),oldLinkCtx=view.linkCtx,view.linkCtx=linkCtx,sourceElem._jsvChg=1,l=tos.length;l--;)if((to=tos[l])&&(to=to+""===to?[linkCtx.data,to]:to,target=to[0],tcpTag=to.tag,sourceValue=(to[1]===_ocp?origVals:sourceValues)[l],sourceValue!==undefined&&(!ev||!tag||!tag.onBeforeUpdateVal||tag.onBeforeUpdateVal(ev,{change:"change",data:target,path:to[1],index:l,tagElse:tagElse,value:sourceValue})!==!1)))if(tcpTag)tcpTag.updateValue(sourceValue,to.ind,to.tagElse,undefined,ev),tcpTag.setValue&&tcpTag.setValue(sourceValue,to.ind,to.tagElse);else if(sourceValue!==undefined&&target){if((tcpTag=ev&&(sourceEl=ev.target)._jsvInd===l&&sourceEl._jsvLkEl)&&tcpTag.setValue(origVals[l],l,sourceEl._jsvElse),target._cpfn)for(contextCb=linkCtx._ctxCb,exprOb=target,target=linkCtx.data,exprOb._cpCtx&&(target=exprOb.data,contextCb=exprOb._cpCtx);exprOb&&exprOb.sb;)target=contextCb(exprOb,target),exprOb=exprOb.sb;$observable(target).setProperty(to[1],sourceValue)}sourceElem._jsvChg=linkCtx.ev=undefined;view.linkCtx=oldLinkCtx}if(tag)return tag._.chg=undefined,tag}function onElemChange(ev){var bindId,val,source=ev.target,fromAttr=defaultAttr(source),setter=fnSetters[fromAttr];if(!source._jsvTr||ev.delegateTarget!==activeBody&&ev.target.type!=="number"||ev.type==="input"){for(val=$isFunction(fromAttr)?fromAttr(source):(source=$(source),setter?source[setter]():source.attr(fromAttr)),ev.target._jsvChg=1,rSplitBindings.lastIndex=0;bindId=rSplitBindings.exec(ev.target._jsvBnd);)updateValue(val,source._jsvInd,source._jsvElse,bindId[1],ev);ev.target._jsvChg=undefined}}function onDataLinkedTagChange(ev,eventArgs){function callBeforeLink(){if(!tag.flow){var mainElem,props=tag.tagCtx.props,bindTo=tag.bindTo||{},displayElem;if(tag.mainElement&&(tag.mainElem=tag._.inline?tag.contents(!0,tag.mainElement).first():$(target)),tag.onBeforeBind&&tag._.unlinked)tag.onBeforeBind(tag.tagCtx,linkCtx,tag.ctx,ev,eventArgs);(mainElem=tag.mainElem||tag.linkedElem)&&(props.id&&!mainElem[0].id&&(mainElem[0].id=props.id),tag.setSize&&(props.height&&!bindTo.height&&mainElem.height(props.height),props.width&&!bindTo.width&&mainElem.width(props.width)));props["class"]&&!bindTo["class"]&&(displayElem=tag.displayElem||mainElem)&&(eventArgs&&displayElem.hasClass(eventArgs.oldValue)&&displayElem.removeClass(eventArgs.oldValue),displayElem.addClass(props["class"]))}}var attr,sourceValue,noUpdate,forceUpdate,hasError,onError,bindEarly,linkCtx=this,linkFn=linkCtx.fn,tag=linkCtx.tag,source=linkCtx.data,target=linkCtx.elem,cvt=linkCtx.convert,parentElem=target.parentNode,view=linkCtx.view,oldLinkCtx=view.linkCtx,onEvent=eventArgs&&changeHandler(view,onBeforeChangeStr,tag);if(view.linkCtx=linkCtx,parentElem&&(!onEvent||onEvent.call(linkCtx,ev,eventArgs)!==!1)&&(!eventArgs||ev.data.prop==="*"||ev.data.prop===eventArgs.path)){if(eventArgs&&(linkCtx.eventArgs=eventArgs),eventArgs||linkCtx._toLk){if(linkCtx._toLk=0,linkFn._er)try{sourceValue=linkFn(source,view,$sub)}catch(e){hasError=linkFn._er;onError=onRenderError(e,view,new Function("data,view","return "+hasError+";")(source,view));sourceValue=[{props:{},args:[onError],tag:tag}]}else sourceValue=linkFn(source,view,$sub);if(attr=tag&&tag.attr||linkCtx.attr||defaultAttr(target,!0,cvt!==undefined),attr===VALUE&&(tag&&tag.parentElem||linkCtx.elem).type===CHECKBOX&&(attr=CHECKED),tag){if(forceUpdate=hasError||tag._er,sourceValue=sourceValue[0]?sourceValue:[sourceValue],noUpdate=!forceUpdate&&(tag.onUpdate===!1||eventArgs&&$isFunction(tag.onUpdate)&&tag.onUpdate(ev,eventArgs,sourceValue)===!1),mergeCtxs(tag,sourceValue,forceUpdate),callBeforeLink(),target._jsvChg&&(attr===HTML||attr===VALUE)||noUpdate||attr===NONE){callAfterLink(tag,ev,eventArgs);target._jsvChg||observeAndBind(linkCtx,source,target);view.linkCtx=oldLinkCtx;eventArgs&&(onEvent=changeHandler(view,onAfterChangeStr,tag))&&onEvent.call(linkCtx,ev,eventArgs);return}if(tag.onUnbind)tag.onUnbind(tag.tagCtx,linkCtx,tag.ctx,ev,eventArgs);sourceValue=tag.tagName===":"?$sub._cnvt(tag.cvt,view,sourceValue[0]):$sub._tag(tag,view,view.tmpl,sourceValue,!0,onError)}else linkFn._tag&&(cvt=cvt===""?TRUE:cvt,sourceValue=cvt?$sub._cnvt(cvt,view,sourceValue[0]||sourceValue):$sub._tag(linkFn._tag,view,view.tmpl,sourceValue,!0,onError),addLinkMethods(tag=linkCtx.tag),callBeforeLink(),attr=linkCtx.attr||attr);(bindEarly=tag&&!tag._.inline&&tag.template)&&observeAndBind(linkCtx,source,target);updateContent(sourceValue,linkCtx,attr,tag);linkCtx._noUpd=0;tag&&(tag._er=hasError,callAfterLink(tag,ev,eventArgs))}else callBeforeLink();bindEarly||observeAndBind(linkCtx,source,target);eventArgs&&(onEvent=changeHandler(view,onAfterChangeStr,tag))&&onEvent.call(linkCtx,ev,eventArgs);view.linkCtx=oldLinkCtx}}function setDefer(elem,value){elem._df=value;elem[(value?"set":"remove")+"Attribute"](deferAttr,"")}function updateContent(sourceValue,linkCtx,attr,tag){var setter,prevNode,nextNode,late,nodesToRemove,useProp,tokens,id,openIndex,closeIndex,testElem,nodeName,cStyle,jsvSel,renders=attr!==NONE&&sourceValue!==undefined&&!linkCtx._noUpd&&!(linkCtx.elem._jsvChg&&(attr===VALUE||attr===HTML)),source=linkCtx.data,target=tag&&tag.parentElem||linkCtx.elem,targetParent=target.parentNode,$target=$(target),view=linkCtx.view,targetVal=linkCtx._val,oldLinkCtx=view.linkCtx,change=tag;if(tag&&(tag._.unlinked=!0,tag.parentElem=tag.parentElem||linkCtx.expr||tag._elCnt?target:targetParent,prevNode=tag._prv,nextNode=tag._nxt),!renders){linkCtx._val=sourceValue;return}return attr==="visible"&&(attr="css-display"),/^css-/.test(attr)?(linkCtx.attr==="visible"&&(cStyle=(target.currentStyle||getComputedStyle.call(global,target,"")).display,sourceValue?(sourceValue=target._jsvd||cStyle,sourceValue!==NONE||(sourceValue=displayStyles[nodeName=target.nodeName])||(testElem=document.createElement(nodeName),document.body.appendChild(testElem),sourceValue=displayStyles[nodeName]=(testElem.currentStyle||getComputedStyle.call(global,testElem,"")).display,document.body.removeChild(testElem))):(target._jsvd=cStyle,sourceValue=NONE)),(change=change||targetVal!==sourceValue)&&$.style(target,attr.slice(4),sourceValue)):attr!=="link"&&(/^data-/.test(attr)&&$.data(target,attr.slice(5),sourceValue),attr===CHECKED?(useProp=!0,sourceValue=sourceValue&&sourceValue!=="false"):attr===RADIO?(useProp=!0,attr=CHECKED,sourceValue=target.value===sourceValue):attr==="selected"||attr==="disabled"||attr==="multiple"||attr==="readonly"?sourceValue=sourceValue&&sourceValue!=="false"?attr:null:attr===VALUE&&target.nodeName==="SELECT"&&(target._jsvSel=$isArray(sourceValue)?sourceValue:""+sourceValue),(setter=fnSetters[attr])?attr===HTML?(view.linkCtx=linkCtx,tag&&tag._.inline?(nodesToRemove=tag.nodes(!0),bindingStore[tag._tgId].to=undefined,tag._elCnt&&(prevNode&&prevNode!==nextNode?transferViewTokens(prevNode,nextNode,target,tag._tgId,"^",!0):(tokens=target._df)&&(id=tag._tgId+"^",openIndex=tokens.indexOf("#"+id)+1,closeIndex=tokens.indexOf("/"+id),openIndex&&closeIndex>0&&(openIndex+=id.length,closeIndex>openIndex&&(setDefer(target,tokens.slice(0,openIndex)+tokens.slice(closeIndex)),disposeTokens(tokens.slice(openIndex,closeIndex))))),prevNode=prevNode?prevNode.previousSibling:nextNode?nextNode.previousSibling:target.lastChild),$(nodesToRemove).remove(),late=view.link(view.data,target,prevNode,nextNode,sourceValue,tag&&{tag:tag._tgId})):(renders=renders&&targetVal!==sourceValue,renders&&($target.empty(),late=view.link(source,target,prevNode,nextNode,sourceValue,tag&&{tag:tag._tgId}))),view.linkCtx=oldLinkCtx):((change=change||targetVal!==sourceValue)&&(attr==="text"&&target.children&&!target.children[0]?target.textContent!==undefined?target.textContent=sourceValue:target.innerText=sourceValue===null?"":sourceValue:$target[setter](sourceValue)),(jsvSel=targetParent._jsvSel)&&(attr===VALUE||!$target.attr(VALUE))&&(target.selected=$.inArray(""+sourceValue,$isArray(jsvSel)?jsvSel:[jsvSel])>-1)):(change=change||targetVal!==sourceValue)&&$target[useProp?"prop":"attr"](attr,sourceValue===undefined&&!useProp?null:sourceValue)),linkCtx._val=sourceValue,lateLink(late),change}function arrayChangeHandler(ev,eventArgs){var self=this,onBeforeChange=changeHandler(self,onBeforeChangeStr,self.tag),onAfterChange=changeHandler(self,onAfterChangeStr,self.tag);if(!onBeforeChange||onBeforeChange.call(self,ev,eventArgs)!==!1){if(eventArgs){var action=eventArgs.change,index=eventArgs.index,items=eventArgs.items;self._.srt=eventArgs.refresh;switch(action){case"insert":self.addViews(index,items);break;case"remove":self.removeViews(index,items.length);break;case"move":self.moveViews(eventArgs.oldIndex,index,items.length);break;case"refresh":self._.srt=undefined;self.fixIndex(0)}}onAfterChange&&onAfterChange.call(self,ev,eventArgs)}}function setArrayChangeLink(view){var handler,arrayBinding,type=view.type,data=view.data,bound=view._.bnd;if(!view._.useKey&&bound)if((arrayBinding=view._.bndArr)&&($([arrayBinding[1]]).off(arrayChangeStr,arrayBinding[0]),view._.bndArr=undefined),bound!==!!bound)type?bound._.arrVws[view._.id]=view:delete bound._.arrVws[view._.id];else if(type&&data){handler=function(ev){ev.data&&ev.data.off||arrayChangeHandler.apply(view,arguments)};$([data]).on(arrayChangeStr,handler);view._.bndArr=[handler,data]}}function defaultAttr(elem,to,linkGetVal){var nodeName=elem.nodeName.toLowerCase(),attr=$subSettingsAdvanced._fe[nodeName]||elem.contentEditable===TRUE&&{to:HTML,from:HTML};return attr?to?nodeName==="input"&&elem.type===RADIO?RADIO:attr.to:attr.from:to?linkGetVal?"text":HTML:""}function renderAndLink(view,index,tmpl,views,data,context,refresh){var html,linkToNode,prevView,nodesToRemove,bindId,parentNode=view.parentElem,prevNode=view._prv,nextNode=view._nxt,elCnt=view._elCnt;if(prevNode&&prevNode.parentNode!==parentNode&&error("Missing parentNode"),refresh){nodesToRemove=view.nodes();elCnt&&prevNode&&prevNode!==nextNode&&transferViewTokens(prevNode,nextNode,parentNode,view._.id,"_",!0);view.removeViews(undefined,undefined,!0);linkToNode=nextNode;elCnt&&(prevNode=prevNode?prevNode.previousSibling:nextNode?nextNode.previousSibling:parentNode.lastChild);$(nodesToRemove).remove();for(bindId in view._.bnds)removeViewBinding(bindId)}else{if(index){if(prevView=views[index-1],!prevView)return!1;prevNode=prevView._nxt}elCnt?(linkToNode=prevNode,prevNode=linkToNode?linkToNode.previousSibling:parentNode.lastChild):linkToNode=prevNode.nextSibling}html=tmpl.render(data,context,view._.useKey&&refresh,view,refresh||index,!0);lateLink(view.link(data,parentNode,prevNode,linkToNode,html,prevView))}function addBindingMarkers(value,view,tag){var id,end;return tag?(end="^`",addLinkMethods(tag),id=tag._tgId,id||(bindingStore[id=bindingKey++]=tag,tag._tgId=""+id)):(end="_`",viewStore[id=view._.id]=view),"#"+id+end+(value!=undefined?value:"")+"/"+id+end}function observeAndBind(linkCtx,source,target){var binding,l,k,linkedElem,exprFnDeps,exprOb,prop,propDeps,depends,bindId,linkedElems,tag=linkCtx.tag,cvtBk=linkCtx.convertBack,handler=linkCtx._hdl;if(tag&&((depends=tag.cvt)&&(depends=depends==="true"?tag.tagCtx.props.convert:linkCtx.view.getRsc("converters",depends),depends=depends&&depends.depends),depends=tag.depends?depends?tag.depends.concat(depends):tag.depends:depends,depends=depends&&$sub._dp(depends,tag,handler),linkedElems=tag.linkedElems),depends=depends||[],!linkCtx._depends||""+linkCtx._depends!=""+depends){if(exprFnDeps=linkCtx.fn.deps.slice(),linkCtx._depends&&(bindId=linkCtx._depends.bdId,$observable._apply(1,[source],exprFnDeps,linkCtx._depends,handler,linkCtx._ctxCb,!0)),tag&&tag.boundProps)for(l=tag.boundProps.length;l--;)for(prop=tag.boundProps[l],k=tag._.bnd.paths.length;k--;)propDeps=tag._.bnd.paths[k][prop],propDeps&&propDeps.skp&&(exprFnDeps=exprFnDeps.concat(propDeps));for(l=exprFnDeps.length;l--;)exprOb=exprFnDeps[l],exprOb._cpfn&&(exprFnDeps[l]=$extend({},exprOb));if(binding=$observable._apply(1,[source],exprFnDeps,depends,handler,linkCtx._ctxCb),bindId||(bindId=linkCtx._bndId||""+bindingKey++,linkCtx._bndId=undefined,target._jsvBnd=(target._jsvBnd||"")+"&"+bindId,linkCtx.view._.bnds[bindId]=bindId),binding.elem=target,binding.linkCtx=linkCtx,binding._tgId=bindId,depends.bdId=bindId,linkCtx._depends=depends,bindingStore[bindId]=binding,(linkedElems||cvtBk!==undefined||tag&&(tag.bindTo||tag.linkedElement||tag.linkedCtxParam))&&defineBindToDataTargets(binding,tag,cvtBk),linkedElems)for(l=linkedElems.length;l--;)for(linkedElem=linkedElems[l],k=linkedElem&&linkedElem.length;k--;)linkedElem[k]._jsvLkEl=tag,bindLinkedElChange(tag,linkedElem[k]),linkedElem[k]._jsvBnd="&"+bindId+"+";else cvtBk!==undefined&&bindLinkedElChange(tag,target);tag&&(tag.flow||tag._.inline||(target.setAttribute(jsvAttrStr,(target.getAttribute(jsvAttrStr)||"")+"#"+bindId+"^/"+bindId+"^"),tag._tgId=""+bindId))}}function lateLink(late){var lnkCtx;if(late)while(lnkCtx=late.pop())lnkCtx._hdl()}function tmplLink(to,from,context,noIteration,parentView,prevNode,nextNode){return $link(this,to,from,context,noIteration,parentView,prevNode,nextNode)}function $link(tmplOrLinkExpr,to,from,context,noIteration,parentView,prevNode,nextNode){if(context===!0?(noIteration=context,context=undefined):context=typeof context!="object"?undefined:$extend({},context),tmplOrLinkExpr&&to){if(to=to.jquery?to:$(to),!activeBody){activeBody=document.body;useInput="oninput"in activeBody;$(activeBody).on(elementChangeStr,onElemChange).on("blur.jsv","[contenteditable]",onElemChange)}for(var i,k,html,vwInfos,view,placeholderParent,targetEl,refresh,topLevelCall,late,onRender=addBindingMarkers,replaceMode=context&&context.target==="replace",l=to.length;l--;){if(targetEl=to[l],parentView=parentView||$view(targetEl),(topLevelCall=parentView===topView)&&(topView.data=(topView.ctx=context||{}).root=from),""+tmplOrLinkExpr===tmplOrLinkExpr)addDataBinding(late=[],tmplOrLinkExpr,targetEl,parentView,undefined,!0,from,context);else{if(tmplOrLinkExpr.markup!==undefined)replaceMode&&(placeholderParent=targetEl.parentNode),html=tmplOrLinkExpr.render(from,context,noIteration,parentView,undefined,onRender),placeholderParent?(prevNode=targetEl.previousSibling,nextNode=targetEl.nextSibling,$.cleanData([targetEl],!0),placeholderParent.removeChild(targetEl),targetEl=placeholderParent):(prevNode=nextNode=undefined,$(targetEl).empty());else if(tmplOrLinkExpr===!0&&parentView===topView)refresh={lnk:1};else break;if(targetEl._df&&!nextNode){for(vwInfos=viewInfos(targetEl._df,!0,rOpenViewMarkers),i=0,k=vwInfos.length;i<k;i++)view=vwInfos[i],(view=viewStore[view.id])&&view.data!==undefined&&view.parent.removeViews(view._.key,undefined,!0);setDefer(targetEl)}late=parentView.link(from,targetEl,prevNode,nextNode,html,refresh,context)}lateLink(late)}}return to}function viewLink(outerData,parentNode,prevNode,nextNode,html,refresh,context,validateOnly){function convertMarkers(all,preceding,selfClose,closeTag,spaceBefore,id,boundId,spaceAfter,tag1,tag2,closeTag2,spaceAfterClose,selfClose2,endOpenTag){var errorMsg,bndId,endOfElCnt="";return endOpenTag?(inTag=0,all):(tag=tag1||tag2||"",closeTag=closeTag||closeTag2,selfClose=selfClose||selfClose2,isVoid&&!selfClose&&(!all||closeTag||tag||id&&!inTag)&&(isVoid=undefined,parentTag=tagStack.shift()),closeTag=closeTag||selfClose,closeTag&&(inTag=0,isVoid=undefined,validate&&(selfClose||selfClose2?voidElems[parentTag]||/;svg;|;math;/.test(";"+tagStack.join(";")+";")||(errorMsg="'<"+parentTag+".../"):voidElems[closeTag]?errorMsg="'<\/"+closeTag:tagStack.length&&closeTag===parentTag||(errorMsg="Mismatch: '<\/"+closeTag),errorMsg&&syntaxError(errorMsg+">' in:\n"+html)),prevElCnt=elCnt,parentTag=tagStack.shift(),elCnt=elContent[parentTag],closeTag2=closeTag2?"<\/"+closeTag2+">":"",prevElCnt&&(defer+=ids,ids="",elCnt?defer+="-":(endOfElCnt=closeTag2+openScript+"@"+defer+closeScript+(spaceAfterClose||""),defer=deferStack.shift()))),elCnt?(id?ids+=id:preceding=closeTag2||selfClose2||"",tag&&(preceding+=tag,ids&&(preceding+=" "+jsvAttrStr+'="'+ids+'"',ids=""))):preceding=id?preceding+endOfElCnt+spaceBefore+(inTag?"":openScript+id+closeScript)+spaceAfter+tag:endOfElCnt||all,validate&&boundId&&(inTag&&syntaxError("{^{ within elem markup ("+inTag+' ). Use data-link="..."'),id.charAt(0)==="#"?tagStack.unshift(id.slice(1)):id.slice(1)!==(bndId=tagStack.shift())&&syntaxError("Closing tag for {^{...}} under different elem: <"+bndId+">")),tag&&(inTag=tag,tagStack.unshift(parentTag),parentTag=tag.slice(1),validate&&tagStack[0]&&tagStack[0]===badParent[parentTag]&&error("Parent of <tr> must be <tbody>"),isVoid=voidElems[parentTag],(elCnt=elContent[parentTag])&&!prevElCnt&&(deferStack.unshift(defer),defer=""),prevElCnt=elCnt,defer&&elCnt&&(defer+="+")),preceding)}function processViewInfos(vwInfos,targetParent){var deferPath,deferChar,bindChar,parentElem,id,onAftCr,deep,addedBindEls=[];if(vwInfos){for(vwInfos._tkns.charAt(0)==="@"&&(targetParent=elem.previousSibling,elem.parentNode.removeChild(elem),elem=undefined),len=vwInfos.length;len--;){if(vwInfo=vwInfos[len],bindChar=vwInfo.ch,deferPath=vwInfo.path)for(j=deferPath.length-1;deferChar=deferPath.charAt(j--);)deferChar==="+"?deferPath.charAt(j)==="-"?(j--,targetParent=targetParent.previousSibling):targetParent=targetParent.parentNode:targetParent=targetParent.lastChild;bindChar==="^"?(tag=bindingStore[id=vwInfo.id])&&(deep=targetParent&&(!elem||elem.parentNode!==targetParent),(!elem||deep)&&(tag.parentElem=targetParent),vwInfo.elCnt&&deep&&setDefer(targetParent,(vwInfo.open?"#":"/")+id+bindChar+(targetParent._df||"")),addedBindEls.push([deep?null:elem,vwInfo])):(view=viewStore[id=vwInfo.id])&&(view.parentElem||(view.parentElem=targetParent||elem&&elem.parentNode||parentNode,view._.onRender=addBindingMarkers,view._.onArrayChange=arrayChangeHandler,setArrayChangeLink(view)),parentElem=view.parentElem,vwInfo.open?(view._elCnt=vwInfo.elCnt,targetParent&&!elem?setDefer(targetParent,"#"+id+bindChar+(targetParent._df||"")):(view._prv||setDefer(parentElem,removeSubStr(parentElem._df,"#"+id+bindChar)),view._prv=elem)):(targetParent&&(!elem||elem.parentNode!==targetParent)?(setDefer(targetParent,"/"+id+bindChar+(targetParent._df||"")),view._nxt=undefined):elem&&(view._nxt||setDefer(parentElem,removeSubStr(parentElem._df,"/"+id+bindChar)),view._nxt=elem),(onAftCr=view.ctx&&view.ctx[onAfterCreateStr]||onAfterCreate)&&onAftCr.call(view.ctx.tag,view)))}for(len=addedBindEls.length;len--;)bindEls.push(addedBindEls[len])}return!vwInfos||vwInfos.elCnt}function getViewInfos(vwInfos){var level,parentTag,named;if(vwInfos)for(len=vwInfos.length,j=0;j<len;j++)if(vwInfo=vwInfos[j],tag=bindingStore[vwInfo.id],!tag._is&&tag.linkCtx&&(parentTag=tag=tag.linkCtx.tag,named=tag.tagName===tagName,!tag.flow||named)){if(!deep){for(level=1;parentTag=parentTag.parent;)level++;tagDepth=tagDepth||level}(deep||level===tagDepth)&&(!tagName||named)&&tags.push(tag)}}function dataLink(late){var j,index,tokens="",wrap={},selector=linkViewsSel+(get?",["+deferAttr+"]":"");for(elems=qsa?parentNode.querySelectorAll(selector):$(selector,parentNode).get(),l=elems.length,prevNode&&prevNode.innerHTML&&(prevNodes=qsa?prevNode.querySelectorAll(selector):$(selector,prevNode).get(),prevNode=prevNodes.length?prevNodes[prevNodes.length-1]:prevNode),tagDepth=0,i=0;i<l;i++)if(elem=elems[i],prevNode&&!found)found=elem===prevNode;else if(nextNode&&elem===nextNode){get&&(tokens+=markerNodeInfo(elem));break}else if(elem.parentNode)if(get){if(tokens+=markerNodeInfo(elem),elem._df){for(j=i+1;j<l&&elem.contains(elems[j]);)j++;wrap[j-1]=elem._df}wrap[i]&&(tokens+=wrap[i]||"")}else isLink&&(vwInfo=viewInfos(elem,undefined,rViewMarkers))&&(vwInfo=vwInfo[0])&&(skip=skip?vwInfo.id!==skip&&skip:vwInfo.open&&vwInfo.id),!skip&&processInfos(viewInfos(elem))&&elem.getAttribute($viewsLinkAttr)&&bindEls.push([elem]);if(get&&(tokens+=parentNode._df||"",(index=tokens.indexOf("#"+get.id)+1)&&(tokens=tokens.slice(index+get.id.length)),index=tokens.indexOf("/"+get.id),index+1&&(tokens=tokens.slice(0,index)),getViewInfos(viewInfos(tokens,undefined,rOpenTagMarkers))),html===undefined&&parentNode.getAttribute($viewsLinkAttr)&&bindEls.push([parentNode]),unmarkPrevOrNextNode(prevNode,elCnt),unmarkPrevOrNextNode(nextNode,elCnt),!get)for(elCnt&&defer+ids&&(elem=nextNode,defer&&(nextNode?processViewInfos(viewInfos(defer+"+",!0),nextNode):processViewInfos(viewInfos(defer,!0),parentNode)),processViewInfos(viewInfos(ids,!0),parentNode),nextNode&&(tokens=nextNode.getAttribute(jsvAttrStr),(l=tokens.indexOf(prevIds)+1)&&(tokens=tokens.slice(l+prevIds.length-1)),nextNode.setAttribute(jsvAttrStr,ids+tokens))),l=bindEls.length,i=0;i<l;i++)elem=bindEls[i],linkInfo=elem[1],elem=elem[0],linkInfo?(tag=bindingStore[linkInfo.id])&&((linkCtx=tag.linkCtx)&&(tag=linkCtx.tag,tag.linkCtx=linkCtx),linkInfo.open?(elem&&(tag.parentElem=elem.parentNode,tag._prv=elem),tag._elCnt=linkInfo.elCnt,view=tag.tagCtx.view,addDataBinding(late,undefined,tag._prv,view,linkInfo.id)):(tag._nxt=elem,tag._.unlinked&&!tag._toLk&&(tagCtx=tag.tagCtx,view=tagCtx.view,callAfterLink(tag)))):addDataBinding(late,elem.getAttribute($viewsLinkAttr),elem,$view(elem),undefined,isLink,outerData,context)}var inTag,linkCtx,tag,i,l,j,len,elems,elem,view,vwInfo,linkInfo,prevNodes,token,prevView,nextView,node,tags,deep,tagName,tagCtx,validate,tagDepth,depth,fragment,copiedNode,firstTag,parentTag,isVoid,wrapper,div,tokens,elCnt,prevElCnt,htmlTag,ids,prevIds,found,skip,isLink,get,self=this,thisId=self._.id+"_",defer="",bindEls=[],tagStack=[],deferStack=[],late=[],onAfterCreate=changeHandler(self,onAfterCreateStr),processInfos=processViewInfos;if(refresh&&(refresh.tmpl?prevView="/"+refresh._.id+"_":(isLink=refresh.lnk,refresh.tag&&(thisId=refresh.tag+"^",refresh=!0),(get=refresh.get)&&(processInfos=getViewInfos,tags=get.tags,deep=get.deep,tagName=get.name)),refresh=refresh===!0),parentNode=parentNode?""+parentNode===parentNode?$(parentNode)[0]:parentNode.jquery?parentNode[0]:parentNode:self.parentElem||document.body,validate=!$subSettingsAdvanced.noValidate&&parentNode.contentEditable!==TRUE,parentTag=parentNode.tagName.toLowerCase(),elCnt=!!elContent[parentTag],prevNode=prevNode&&markPrevOrNextNode(prevNode,elCnt),nextNode=nextNode&&markPrevOrNextNode(nextNode,elCnt)||null,html!=undefined){if(div=document.createElement("div"),wrapper=div,prevIds=ids="",htmlTag=parentNode.namespaceURI==="http://www.w3.org/2000/svg"?"svg_ns":(firstTag=rFirstElem.exec(html))&&firstTag[1]||"",elCnt){for(node=nextNode;node&&!(nextView=viewInfos(node));)node=node.nextSibling;(tokens=nextView?nextView._tkns:parentNode._df)&&(token=prevView||"",(refresh||!prevView)&&(token+="#"+thisId),j=tokens.indexOf(token),j+1&&(j+=token.length,prevIds=ids=tokens.slice(0,j),tokens=tokens.slice(j),nextView?node.setAttribute(jsvAttrStr,tokens):setDefer(parentNode,tokens)))}if(isVoid=undefined,html=(""+html).replace(rConvertMarkers,convertMarkers),validate&&tagStack.length&&syntaxError("Mismatched '<"+parentTag+"...>' in:\n"+html),validateOnly)return;for(safeFragment.appendChild(div),htmlTag=wrapMap[htmlTag]||wrapMap.div,depth=htmlTag[0],wrapper.innerHTML=htmlTag[1]+html+htmlTag[2];depth--;)wrapper=wrapper.lastChild;for(safeFragment.removeChild(div),fragment=document.createDocumentFragment();copiedNode=wrapper.firstChild;)fragment.appendChild(copiedNode);parentNode.insertBefore(fragment,nextNode)}return dataLink(late),late}function addDataBinding(late,linkMarkup,node,currentView,boundTagId,isLink,data,context){var tmpl,tokens,attr,convertBack,tagExpr,linkFn,linkCtx,tag,rTagIndex,hasElse,lastIndex,linkExpressions=[];if(boundTagId)tag=bindingStore[boundTagId],tag=tag.linkCtx?tag.linkCtx.tag:tag,linkCtx=tag.linkCtx||{type:"inline",data:currentView.data,elem:tag._elCnt?tag.parentElem:node,view:currentView,ctx:currentView.ctx,attr:HTML,fn:tag._.bnd,tag:tag,_bndId:boundTagId},tag.linkCtx=linkCtx,bindDataLinkTarget(linkCtx,late),tag._toLk=linkCtx._bndId;else if(linkMarkup&&node){for(data=isLink?data:currentView.data,tmpl=currentView.tmpl,linkMarkup=normalizeLinkTag(linkMarkup,defaultAttr(node)),lastIndex=rTagDatalink.lastIndex=0;tokens=rTagDatalink.exec(linkMarkup);)linkExpressions.push(tokens),lastIndex=rTagDatalink.lastIndex;for(lastIndex<linkMarkup.length&&syntaxError(linkMarkup);tokens=linkExpressions.shift();){for(rTagIndex=rTagDatalink.lastIndex,attr=tokens[1],tagExpr=tokens[3];linkExpressions[0]&&linkExpressions[0][4]==="else";)tagExpr+=delimCloseChar1+delimOpenChar0+linkExpressions.shift()[3],hasElse=!0;hasElse&&(tagExpr+=delimCloseChar1+delimOpenChar0+delimOpenChar1+"/"+tokens[4]+delimCloseChar0);linkCtx={type:isLink?"top":"link",data:data,elem:node,view:currentView,ctx:context,attr:attr,isLk:isLink,_toLk:1,_noUpd:tokens[2]};convertBack=undefined;tokens[6]&&(convertBack=tokens[10]||undefined,linkCtx.convert=tokens[5]||"",!attr&&convertBack!==undefined&&defaultAttr(node)&&(linkCtx.convertBack=convertBack=convertBack.slice(1)));linkCtx.expr=attr+tagExpr;linkFn=tmpl.links[tagExpr];linkFn||(tmpl.links[tagExpr]=linkFn=$sub.tmplFn(tagExpr,tmpl,!0,convertBack,hasElse));linkCtx.fn=linkFn;bindDataLinkTarget(linkCtx,late);rTagDatalink.lastIndex=rTagIndex}}}function bindDataLinkTarget(linkCtx,late){function handler(ev,eventArgs){onDataLinkedTagChange.call(linkCtx,ev,eventArgs)}linkCtx.isLk&&(linkCtx.view=new $sub.View($sub.extendCtx(linkCtx.ctx,linkCtx.view.ctx),"link",linkCtx.view,linkCtx.data,linkCtx.expr,undefined,addBindingMarkers));linkCtx._ctxCb=$sub._gccb(linkCtx.view);linkCtx._hdl=handler;linkCtx.fn._lr?(linkCtx._toLk=1,late.push(linkCtx)):handler(!0)}function removeSubStr(str,substr){var k;return str?(k=str.indexOf(substr),k+1?str.slice(0,k)+str.slice(k+substr.length):str):""}function markerNodeInfo(node){return node&&(""+node===node?node:node.tagName===SCRIPT?node.type.slice(3):node.nodeType===1&&node.getAttribute(jsvAttrStr)||"")}function viewInfos(node,isVal,rBinding){function getInfos(all,open,close,id,ch,elPath){infos.push({elCnt:elCnt,id:id,ch:ch,open:open,close:close,path:elPath,token:all})}var elCnt,tokens,infos=[];if(tokens=isVal?node:markerNodeInfo(node))return elCnt=infos.elCnt=node.tagName!==SCRIPT,elCnt=tokens.charAt(0)==="@"||elCnt,infos._tkns=tokens,tokens.replace(rBinding||rMarkerTokens,getInfos),infos}function unmarkPrevOrNextNode(node,elCnt){node&&(node.type==="jsv"?node.parentNode.removeChild(node):elCnt&&node.getAttribute($viewsLinkAttr)===""&&node.removeAttribute($viewsLinkAttr))}function markPrevOrNextNode(node,elCnt){for(var marker=node;elCnt&&marker&&marker.nodeType!==1;)marker=marker.previousSibling;return marker&&(marker.nodeType!==1?(marker=document.createElement(SCRIPT),marker.type="jsv",node.parentNode.insertBefore(marker,node)):markerNodeInfo(marker)||marker.getAttribute($viewsLinkAttr)||marker.setAttribute($viewsLinkAttr,"")),marker}function normalizeLinkTag(linkMarkup,twoway){return linkMarkup=$.trim(linkMarkup).replace(rEscapeQuotes,"\\$&"),linkMarkup.slice(-1)!==delimCloseChar0?linkMarkup=delimOpenChar1+":"+linkMarkup+(twoway?":":"")+delimCloseChar0:linkMarkup}function callAfterLink(tag,ev,eventArgs){var linkedElems,linkedElements,linkedElem,l,m,$linkCtxElem,tagCtxElse,tagCtx=tag.tagCtx,linkCtx=tag.linkCtx,bindTo=tag.bindTo;if(tag._.unlinked){if($linkCtxElem=$(linkCtx.elem),linkedElements=tag.linkedElement){for(m=tag.tagCtxs.length;m--;)for(tagCtxElse=tag.tagCtxs[m],l=linkedElements.length,linkedElems=tagCtxElse.linkedElems=tagCtxElse.linkedElems||new Array(l);l--;)linkedElements[l]&&(linkedElem=tag._.inline?tagCtxElse.contents(!0,linkedElements[l]):$linkCtxElem,linkedElem[0]&&linkedElem[0].type!==RADIO&&(linkedElem=linkedElem.first(),linkedElem[0]._jsvLkEl||(linkedElems[l]=linkedElem)));tag.linkedElems=tagCtx.linkedElems;tag.linkedElem=tag.linkedElems[0]}if(tag.onBind)tag.onBind(tagCtx,linkCtx,tag.ctx,ev,eventArgs)}if(tag.onAfterLink)tag.onAfterLink(tagCtx,linkCtx,tag.ctx,ev,eventArgs);(linkedElems=tagCtx.linkedElems||tag.linkedElems||tag.linkedElem&&[tag.linkedElem])&&(tag.linkedElems=tagCtx.linkedElems=linkedElems,tag.linkedElem=linkedElems[0]=tag.linkedElem||tag.linkedElems[0]);tag.flow||linkCtx.elem._jsvChg||(tag._.inline&&tag._.unlinked&&(tag.linkedElems||bindTo)&&defineBindToDataTargets(bindingStore[tag._tgId],tag),bindTo=bindTo||{},tag.setValue());tag._.unlinked=undefined}function asyncOnElemChange(ev){var which=ev.which;which>15&&which<21||which>32&&which<41||which>111&&which<131||which===27||which===144||setTimeout(function(){onElemChange(ev)})}function bindTriggerEvent($elem,trig,onoff){trig&&(useInput&&$elem[onoff]("input.jsv",onElemChange),trig=""+trig===trig?trig:"keydown.jsv",$elem[onoff](trig,trig.indexOf("keydown")>=0?asyncOnElemChange:onElemChange))}function bindLinkedElChange(tag,linkedElem){var $linkedElem,newTrig,oldTrig=linkedElem._jsvTr||!1;tag&&(newTrig=tag.tagCtx.props.trigger);newTrig===undefined&&(newTrig=$subSettings.trigger);newTrig=newTrig&&(linkedElem.tagName==="INPUT"&&linkedElem.type!==CHECKBOX&&linkedElem.type!==RADIO||linkedElem.type==="textarea"||linkedElem.contentEditable===TRUE)&&newTrig||!1;oldTrig!==newTrig&&($linkedElem=$(linkedElem),bindTriggerEvent($linkedElem,oldTrig,"off"),bindTriggerEvent($linkedElem,linkedElem._jsvTr=newTrig,"on"))}function defineBindToDataTargets(binding,tag,cvtBk){var pathIndex,path,lastPath,bindtoOb,to,bindTo,paths,k,obsCtxPrm,linkedCtxParam,contextCb,targetPaths,bindTos,tagElse=1,tos=[],linkCtx=binding.linkCtx,source=linkCtx.data,targetPathsElses=linkCtx.fn.paths;if(binding&&!binding.to){for(tag&&(tag.convertBack=tag.convertBack||cvtBk,bindTo=tag.bindTo,tagElse=tag.tagCtxs?tag.tagCtxs.length:1);tagElse--;){if(bindTos=[],targetPaths=targetPathsElses[tagElse])for(bindTo=targetPaths._jsvto?["_jsvto"]:bindTo||[0],k=bindTo.length;k--;){if(path="",contextCb=linkCtx._ctxCb,paths=targetPaths[bindTo[k]],pathIndex=paths&&paths.length){if(lastPath=paths[pathIndex-1],lastPath._cpfn){for(bindtoOb=lastPath;lastPath.sb&&lastPath.sb._cpfn;)path=lastPath=lastPath.sb;path=lastPath.sb||path&&path.path;lastPath=path?path.slice(1):bindtoOb.path}to=path?[bindtoOb,lastPath]:resolveDataTargetPath(lastPath,source,contextCb)}else linkedCtxParam=tag.linkedCtxParam,to=[],linkedCtxParam&&linkedCtxParam[k]&&(to=[tag.tagCtxs[tagElse].ctx[linkedCtxParam[k]][0],_ocp]);(obsCtxPrm=to._cxp)&&obsCtxPrm.tag&&(to=obsCtxPrm);bindTos.unshift(to)}tos.unshift(bindTos)}binding.to=tos}}function resolveDataTargetPath(targetPath,source,contextCb){for(var path,bindtoOb,to,l,obsCtxPrm,view,topCp,data;targetPath&&targetPath!==_ocp&&(to=contextCb(path=targetPath.split("^").join("."),source))&&(l=to.length);){if(obsCtxPrm=to[0]._cxp)if(topCp=topCp||obsCtxPrm,view=to[0][0],_ocp in view?(data=view,view=view._vw):data=view.data,topCp.path=targetPath=to[0][1],to=[topCp.data=data,targetPath],contextCb=$sub._gccb(view),targetPath._cpfn){for(bindtoOb=targetPath,bindtoOb.data=to[0],bindtoOb._cpCtx=contextCb;targetPath.sb&&targetPath.sb._cpfn;)path=targetPath=targetPath.sb;path=targetPath.sb||path&&path.path;targetPath=path?path.slice(1):bindtoOb.path;to=[bindtoOb,targetPath]}else obsCtxPrm.tag&&obsCtxPrm.path===_ocp&&(to=obsCtxPrm);else to=l>2?[to[l-3],to[l-2]]:[to[l-2]];source=to[0];targetPath=to[1]}return to=to||[source,path],to._cxp=topCp,to}function mergeCtxs(tag,newCtxs,replace){var tagCtx,newTagCtx,view=tag.tagCtx.view,tagCtxs=tag.tagCtxs||[tag.tagCtx],l=tagCtxs.length,refresh=!newCtxs;if(newCtxs=newCtxs||tag._.bnd.call(view.tmpl,(tag.linkCtx||view).data,view,$sub),replace)tagCtxs=tag.tagCtxs=newCtxs,tag.tagCtx=tagCtxs[0];else while(l--)tagCtx=tagCtxs[l],newTagCtx=newCtxs[l],$observable(tagCtx.props).setProperty(newTagCtx.props),$extend(tagCtx.ctx,newTagCtx.ctx),tagCtx.args=newTagCtx.args,refresh&&(tagCtx.tmpl=newTagCtx.tmpl);return $sub._ths(tag,tagCtxs[0]),tagCtxs}function clean(elems){for(var l,elem,bindings,elemArray=[],len=elems.length,i=len;i--;)elemArray.push(elems[i]);for(i=len;i--;)if(elem=elemArray[i],elem.parentNode){if(bindings=elem._jsvBnd)for(bindings=bindings.slice(1).split("&"),elem._jsvBnd="",l=bindings.length;l--;)removeViewBinding(bindings[l],elem._jsvLkEl,elem);disposeTokens(markerNodeInfo(elem)+(elem._df||""),elem)}}function removeViewBinding(bindId,linkedElemTag,elem){var objId,linkCtx,tag,object,obsId,tagCtxs,l,map,linkedElem,trigger,view,tagCtx,linkedElems,allLinkedElems,binding=bindingStore[bindId];if(linkedElemTag)elem._jsvLkEl=undefined;else if(binding&&(!elem||elem===binding.elem)){delete bindingStore[bindId];for(objId in binding.bnd)object=binding.bnd[objId],obsId=binding.cbId,$isArray(object)?$([object]).off(arrayChangeStr+obsId).off(propertyChangeStr+obsId):$(object).off(propertyChangeStr+obsId),delete binding.bnd[objId];if(linkCtx=binding.linkCtx){if(tag=linkCtx.tag){if(tagCtxs=tag.tagCtxs)for(l=tagCtxs.length;l--;)tagCtx=tagCtxs[l],(map=tagCtx.map)&&map.unmap(),(linkedElems=tagCtx.linkedElems)&&(allLinkedElems=(allLinkedElems||[]).concat(linkedElems));if(tag.onUnbind)tag.onUnbind(tag.tagCtx,linkCtx,tag.ctx,!0);tag.onDispose&&tag.onDispose();tag._elCnt||(tag._prv&&tag._prv.parentNode.removeChild(tag._prv),tag._nxt&&tag._nxt.parentNode.removeChild(tag._nxt))}for(linkedElems=allLinkedElems||[$(linkCtx.elem)],l=linkedElems.length;l--;)linkedElem=linkedElems[l],(trigger=linkedElem&&linkedElem[0]&&linkedElem[0]._jsvTr)&&(bindTriggerEvent(linkedElem,trigger,"off"),linkedElem[0]._jsvTr=undefined);view=linkCtx.view;view.type==="link"?view.parent.removeViews(view._.key,undefined,!0):delete view._.bnds[bindId]}delete cbBindingsStore[binding.cbId]}}function $unlink(to){to?(to=to.jquery?to:$(to),to.each(function(){for(var innerView;(innerView=$view(this,!0))&&innerView.parent;)innerView.parent.removeViews(innerView._.key,undefined,!0);clean(this.getElementsByTagName("*"))}),clean(to)):(activeBody&&($(activeBody).off(elementChangeStr,onElemChange).off("blur.jsv","[contenteditable]",onElemChange),activeBody=undefined),topView.removeViews(),clean(document.body.getElementsByTagName("*")))}function inputAttrib(elem){return elem.type===CHECKBOX?elem[CHECKED]:elem.value}function changeHandler(view,name,tag){return tag&&tag[name]||view.ctx[name]&&view.ctxPrm(name)||$views.helpers[name]}function transferViewTokens(prevNode,nextNode,parentElem,id,viewOrTagChar,refresh){var i,l,vwInfos,vwInfo,viewOrTag,viewId,tokens,precedingLength=0,emptyView=prevNode===nextNode;if(prevNode){for(vwInfos=viewInfos(prevNode)||[],i=0,l=vwInfos.length;i<l;i++){if(vwInfo=vwInfos[i],viewId=vwInfo.id,viewId===id&&vwInfo.ch===viewOrTagChar)if(refresh)l=0;else break;emptyView||(viewOrTag=vwInfo.ch==="_"?viewStore[viewId]:bindingStore[viewId].linkCtx.tag,vwInfo.open?viewOrTag._prv=nextNode:vwInfo.close&&(viewOrTag._nxt=nextNode));precedingLength+=viewId.length+2}precedingLength&&prevNode.setAttribute(jsvAttrStr,prevNode.getAttribute(jsvAttrStr).slice(precedingLength));tokens=nextNode?nextNode.getAttribute(jsvAttrStr):parentElem._df;(l=tokens.indexOf("/"+id+viewOrTagChar)+1)&&(tokens=vwInfos._tkns.slice(0,precedingLength)+tokens.slice(l+(refresh?-1:id.length+1)));tokens&&(nextNode?nextNode.setAttribute(jsvAttrStr,tokens):setDefer(parentElem,tokens))}else setDefer(parentElem,removeSubStr(parentElem._df,"#"+id+viewOrTagChar)),refresh||nextNode||setDefer(parentElem,removeSubStr(parentElem._df,"/"+id+viewOrTagChar))}function disposeTokens(tokens,elem){var i,l,vwItem,vwInfos;if(vwInfos=viewInfos(tokens,!0,rOpenMarkers))for(i=0,l=vwInfos.length;i<l;i++)vwItem=vwInfos[i],vwItem.ch==="_"?(vwItem=viewStore[vwItem.id])&&vwItem.type&&(!elem||vwItem._prv===elem||vwItem.parentElem===elem)&&vwItem.parent.removeViews(vwItem._.key,undefined,!0):removeViewBinding(vwItem.id,undefined,elem)}function updateValue(val,index,tagElse,bindId,ev){var values=[];return this&&this._tgId&&(bindId=this),values[index||0]=val,updateValues(values,tagElse,bindId,ev),this}function setValues(){var args=arguments,m=args.length;for(m||(args=this.tag.cvtArgs(undefined,1,this.index),m=args.length);m--;)this.tag.setValue(args[m],m,this.index)}function addLinkMethods(tagOrView){var l,m,tagCtx,boundProps,bindTo,key,theTag,theView;if(tagOrView.contents=function(deep,select){deep!==!!deep&&(select=deep,deep=undefined);var filtered,nodes=$(this.nodes());return nodes[0]&&(filtered=select?nodes.filter(select):nodes,nodes=deep&&select?filtered.add(nodes.find(select)):filtered),nodes},tagOrView.nodes=function(withMarkers,prevNode,nextNode){var node,self=this.contentView||this,elCnt=self._elCnt,prevIsFirstNode=!prevNode&&elCnt,nodes=[];if(!self.args)for(prevNode=prevNode||self._prv,nextNode=nextNode||self._nxt,node=prevIsFirstNode?prevNode===self._nxt?self.parentElem.lastSibling:prevNode:self._.inline===!1?prevNode||self.linkCtx.elem.firstChild:prevNode&&prevNode.nextSibling;node&&(!nextNode||node!==nextNode);)(withMarkers||elCnt||node.tagName!==SCRIPT)&&nodes.push(node),node=node.nextSibling;return nodes},tagOrView.childTags=function(deep,tagName){deep!==!!deep&&(tagName=deep,deep=undefined);var self=this.contentView||this,view=self.link?self:self.tagCtx.view,prevNode=self._prv,elCnt=self._elCnt,tags=[];return self.args||view.link(undefined,self.parentElem,elCnt?prevNode&&prevNode.previousSibling:prevNode,self._nxt,undefined,{get:{tags:tags,deep:deep,name:tagName,id:self.link?self._.id+"_":self._tgId+"^"}}),tags},tagOrView._is==="tag"){for(theTag=tagOrView,m=theTag.tagCtxs.length;m--;)tagCtx=theTag.tagCtxs[m],tagCtx.setValues=setValues,tagCtx.cvtArgs=convertArgs,tagCtx.bndArgs=convertBoundArgs,tagCtx.contents=tagOrView.contents,tagCtx.childTags=tagOrView.childTags,tagCtx.nodes=tagOrView.nodes;if(boundProps=theTag.boundProps=theTag.boundProps||[],bindTo=theTag.linkTo?["linkTo"]:theTag.bindTo)for(l=bindTo.length;l--;)key=bindTo[l],key+""===key&&(bindTo[key]=1,$.inArray(key,boundProps)<0&&boundProps.push(key));theTag.setValue=$sub._gm(theTag.constructor.prototype.setValue,function(val,index,tagElse){if(!theTag._.chg){if(!arguments.length)return theTag.setValues(),theTag;var linkedElem,linkedEl,linkedTag,linkedCtxParam=theTag.linkedCtxParam,tagCtx=theTag.tagCtxs[tagElse||0],props=tagCtx.props,linkCtx=theTag.linkCtx,linkedElems=tagCtx.linkedElems||theTag.linkedElem&&[theTag.linkedElem];if(val!==undefined?theTag.base.call(theTag,val,index,tagElse):theTag.getValue&&(val=theTag.getValue(tagElse))&&val!==undefined&&(theTag.bindTo.length>1&&(val=val[index]),linkedCtxParam&&linkedCtxParam[index]&&$.observable(tagCtx.ctx[linkedCtxParam[index]][0]).setProperty(_ocp,val)),(linkedElem=linkedElems&&linkedElems[index])&&linkedElem[0])for(l=linkedElem.length;l--;)linkedEl=linkedElem[l],theTag._.unlinked&&linkedEl!==linkCtx.elem&&(linkedTag=linkedEl._jsvLkEl,theTag._.inline&&(!linkedTag||linkedTag!==theTag)&&(linkedTag&&(val=linkedTag.cvtArgs(undefined,1,tagElse)[index]),linkedEl._jsvLkEl=theTag,linkedEl._jsvInd=index,linkedEl._jsvElse=tagElse,bindLinkedElChange(theTag,linkedEl),linkedEl._jsvBnd="&"+theTag._tgId+"+")),val===undefined||linkedEl._jsvChg||linkCtx._val===val||(linkedEl.value!==undefined?linkedEl.type===CHECKBOX?linkedEl[CHECKED]=val&&val!=="false":linkedEl.type===RADIO?linkedEl[CHECKED]=linkedEl.value===val:$isArray(val)?linkedEl.value=val:$(linkedEl).val(val):linkedEl.contentEditable===TRUE&&(linkedEl.innerHTML=val)),props.name&&(linkedEl.name=linkedEl.name||props.name)}return theTag});theTag.updateValue=updateValue;theTag.updateValues=function(){return updateValues(arguments,undefined,this)};theTag.setValues=function(){for(var m=arguments.length?1:theTag.tagCtxs.length;m--;)setValues.apply(theTag.tagCtxs[m],arguments)};theTag.refresh=function(sourceValue){var attr,linkCtx=theTag.linkCtx,view=theTag.tagCtx.view;if(sourceValue===undefined&&(sourceValue=$sub._tag(theTag,view,view.tmpl,mergeCtxs(theTag),!0)),sourceValue+""===sourceValue){if(theTag.onUnbind)theTag.onUnbind(theTag.tagCtx,linkCtx,theTag.ctx);attr=theTag._.inline?HTML:linkCtx.attr||defaultAttr(theTag.parentElem,!0);updateContent(sourceValue,linkCtx,attr,theTag)}return callAfterLink(theTag),theTag};theTag.domChange=function(){var elem=this.parentElem,hasListener=$.hasData(elem)&&$._data(elem).events,domChangeNotification="jsv-domchange";hasListener&&hasListener[domChangeNotification]&&$(elem).triggerHandler(domChangeNotification,arguments)}}else theView=tagOrView,theView.addViews=function(index,dataItems){var viewsCount,view=this,itemsCount=dataItems.length,views=view.views;!view._.useKey&&itemsCount&&(viewsCount=views.length+itemsCount,viewsCount===view.data.length&&renderAndLink(view,index,view.tmpl,views,dataItems,view.ctx)!==!1&&(view._.srt||view.fixIndex(index+itemsCount)))},theView.removeViews=function(index,itemsCount,keepNodes,isMove){function removeView(index){var id,bindId,parentElem,prevNode,nextNode,nodesToRemove,viewToRemove=views[index];if(viewToRemove&&viewToRemove.link){if(id=viewToRemove._.id,keepNodes||(nodesToRemove=viewToRemove.nodes()),viewToRemove.removeViews(undefined,undefined,!0),viewToRemove.type=undefined,prevNode=viewToRemove._prv,nextNode=viewToRemove._nxt,parentElem=viewToRemove.parentElem,keepNodes||(viewToRemove._elCnt&&transferViewTokens(prevNode,nextNode,parentElem,id,"_"),$(nodesToRemove).remove()),!viewToRemove._elCnt)try{prevNode.parentNode.removeChild(prevNode);nextNode.parentNode.removeChild(nextNode)}catch(e){}setArrayChangeLink(viewToRemove);for(bindId in viewToRemove._.bnds)removeViewBinding(bindId);delete viewStore[id]}}var current,childView,viewsCount,view=this,isArray=!view._.useKey,views=view.views;if(isArray&&(viewsCount=views.length),index===undefined)if(isArray){for(current=viewsCount;current--;)removeView(current);view.views=[]}else{for(childView in views)removeView(childView);view.views={}}else if(itemsCount===undefined&&(isArray?itemsCount=1:(removeView(index),delete views[index])),isArray&&itemsCount&&(isMove||viewsCount-itemsCount===view.data.length)){for(current=index+itemsCount;current-->index;)removeView(current);views.splice(index,itemsCount);view._.srt||view.fixIndex(index)}},theView.moveViews=function(oldIndex,index,itemsCount){function parts(itemView,str){return RegExp("^(.*)("+(str?"\\/":"#")+itemView._.id+"_.*)$").exec(str||itemView._prv.getAttribute(jsvAttrStr))}function setPrv(itemView,tokens){itemView._prv.setAttribute(jsvAttrStr,tokens)}var nodes,childView,insertBefore,view=this,selfNxt=view._nxt,views=view.views,backwards=index<oldIndex,firstChange=backwards?index:oldIndex,lastChange=backwards?oldIndex:index,i=index,movedNodes=[],viewsToMove=views.splice(oldIndex,itemsCount);for(index>views.length&&(index=views.length),views.splice.apply(views,[index,0].concat(viewsToMove)),itemsCount=viewsToMove.length,insertBefore=index+itemsCount,lastChange+=itemsCount,i;i<insertBefore;i++)childView=views[i],nodes=childView.nodes(!0),movedNodes=view._elCnt?movedNodes.concat(nodes):movedNodes.concat(childView._prv,nodes,childView._nxt);if(movedNodes=$(movedNodes),insertBefore<views.length?movedNodes.insertBefore(views[insertBefore]._prv):selfNxt?movedNodes.insertBefore(selfNxt):movedNodes.appendTo(view.parentElem),view._elCnt){var afterParts,endChange=backwards?firstChange+itemsCount:lastChange-itemsCount,beforeView=views[firstChange-1],startView=views[firstChange],endView=views[endChange],afterView=views[lastChange],startParts=parts(startView),endParts=parts(endView);setPrv(startView,endParts[1]+startParts[2]);afterView?(afterParts=parts(afterView),setPrv(afterView,startParts[1]+afterParts[2])):selfNxt?(afterParts=parts(view,selfNxt.getAttribute(jsvAttrStr)),selfNxt.setAttribute(jsvAttrStr,startParts[1]+afterParts[2])):(afterParts=parts(view,view.parentElem._df),setDefer(view.parentElem,startParts[1]+afterParts[2]));setPrv(endView,afterParts[1]+endParts[2]);beforeView?beforeView._nxt=startView._prv:view._prv=startView._prv;views[endChange-1]._nxt=endView._prv;views[lastChange-1]._nxt=afterView?afterView._prv:selfNxt}view.fixIndex(firstChange)},theView.refresh=function(){var view=this,parent=view.parent;parent&&(renderAndLink(view,view.index,view.tmpl,parent.views,view.data,undefined,!0),setArrayChangeLink(view))},theView.fixIndex=function(fromIndex){for(var views=this.views,index=views.length;fromIndex<index--;)views[index].index!==index&&$observable(views[index]).setProperty("index",index)},theView.link=viewLink}function observeProps(map,ev,eventArgs){if(eventArgs.change==="set"){for(var target=map.tgt,l=target.length;l--;)if(target[l].key===eventArgs.path)break;l===-1?eventArgs.path&&!eventArgs.remove&&$observable(target).insert({key:eventArgs.path,prop:eventArgs.value}):eventArgs.remove?$observable(target).remove(l):$observable(target[l]).setProperty("prop",eventArgs.value)}}function observeMappedProps(map,ev,eventArgs){var item,source=map.src,change=eventArgs.change;change==="set"?eventArgs.path==="prop"?$observable(source).setProperty(ev.target.key,eventArgs.value):($observable(source).removeProperty(eventArgs.oldValue),$observable(source).setProperty(eventArgs.value,ev.target.prop)):change==="remove"?(item=eventArgs.items[0],$observable(source).removeProperty(item.key),delete source[item.key]):change==="insert"&&(item=eventArgs.items[0],item.key&&$observable(source).setProperty(item.key,item.prop))}function shallowArrayFilter(allPath){return allPath.indexOf(".")<0}var setGlobals=$===!1;if($=$||global.jQuery,!$||!$.fn)throw"JsViews requires jQuery";var versionNumber="v0.9.88",jsvStoreName,rTag,topView,$views,$observe,$observable,$expando,_ocp="_ocp",$isFunction,$isArray,$templates,$converters,$helpers,$tags,$sub,$subSettings,$subSettingsAdvanced,$viewsSettings,delimOpenChar0,delimOpenChar1,delimCloseChar0,delimCloseChar1,linkChar,setting,rPath=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,rParams=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*[.^]|\s*$|[^([])|[)\]])([([]?))|(\s+)/g,isRenderCall,rNewLine=/[ \t]*(\r\n|\n|\r)/g,rUnescapeQuotes=/\\(['"])/g,rEscapeQuotes=/['"\\]/g,rBuildHash=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$_\.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,rTestElseIf=/^if\s/,rFirstElem=/<(\w+)[>\s]/,rIsHtml=/[\x00`><\"'&=]/,rHasHandlers=/^on[A-Z]|^convert(Back)?$/,rWrappedInViewMarker=/^\#\d+_`[\s\S]*\/\d+_`$/,rHtmlEncode=/[\x00`><"'&=]/g,viewId=0,charEntities={"&":"&amp;","<":"&lt;",">":"&gt;","\x00":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;","=":"&#61;"},HTML="html",OBJECT="object",tmplAttr="data-jsv-tmpl",jsvTmpl="jsvTmpl",indexStr="For #index in nested block use #getIndex().",$render={},jsr=global.jsrender,jsrToJq=jsr&&$&&!$.render,jsvStores={template:{compile:compileTmpl},tag:{compile:compileTag},viewModel:{compile:compileViewModel},helper:{},converter:{}};if($views={jsviews:versionNumber,sub:{View:View,Err:JsViewsError,tmplFn:tmplFn,parse:parseParams,extend:$extend,extendCtx:extendCtx,syntaxErr:syntaxError,onStore:{template:function(name,item){item===null?delete $render[name]:$render[name]=item}},addSetting:addSetting,settings:{allowCode:!1},advSet:noop,_ths:tagHandlersFromProps,_gm:getMethod,_tg:function(){},_cnvt:convertVal,_tag:renderTag,_er:error,_err:onRenderError,_html:htmlEncode,_cp:retVal,_sq:function(token){return token==="constructor"&&syntaxError(""),token}},settings:{delimiters:$viewsDelimiters,advanced:function(value){return value?($extend($subSettingsAdvanced,value),$sub.advSet(),$viewsSettings):$subSettingsAdvanced}},map:dataMap},(JsViewsError.prototype=new Error).constructor=JsViewsError,getNestedIndex.depends=function(){return[this.get("item"),"index"]},getIndex.depends="index",View.prototype={get:getView,getIndex:getIndex,getRsc:getResource,getTmpl:getTemplate,ctxPrm:contextParameter,_is:"view"},$sub=$views.sub,$viewsSettings=$views.settings,!(jsr||$&&$.render)){for(jsvStoreName in jsvStores)registerStore(jsvStoreName,jsvStores[jsvStoreName]);$converters=$views.converters;$helpers=$views.helpers;$tags=$views.tags;$sub._tg.prototype={baseApply:baseApply,cvtArgs:convertArgs,bndArgs:convertBoundArgs,ctxPrm:contextParameter};topView=$sub.topView=new View;$?($.fn.render=$fnRender,$expando=$.expando,$.observable&&($extend($sub,$.views.sub),$views.map=$.views.map)):($={},setGlobals&&(global.jsrender=$),$.renderFile=$.__express=$.compile=function(){throw"Node.js: use npm jsrender, or jsrender-node.js";},$.isFunction=function(ob){return typeof ob=="function"},$.isArray=Array.isArray||function(obj){return{}.toString.call(obj)==="[object Array]"},$sub._jq=function(jq){jq!==$&&($extend(jq,$),$=jq,$.fn.render=$fnRender,delete $.jsrender,$expando=$.expando)},$.jsrender=versionNumber);$subSettings=$sub.settings;$subSettings.allowCode=!1;$isFunction=$.isFunction;$.render=$render;$.views=$views;$.templates=$templates=$views.templates;for(setting in $subSettings)addSetting(setting);($viewsSettings.debugMode=function(debugMode){return debugMode===undefined?$subSettings.debugMode:($subSettings.debugMode=debugMode,$subSettings.onError=debugMode+""===debugMode?new Function("","return '"+debugMode+"';"):$isFunction(debugMode)?debugMode:undefined,$viewsSettings)})(!1);$subSettingsAdvanced=$subSettings.advanced={useViews:!1,_jsv:!1};$tags({"if":{render:function(val){var self=this,tagCtx=self.tagCtx;return self.rendering.done||!val&&(arguments.length||!tagCtx.index)?"":(self.rendering.done=!0,self.selected=tagCtx.index,tagCtx.render(tagCtx.view,!0))},flow:!0},"for":{render:function(val){var finalElse=!arguments.length,value,self=this,tagCtx=self.tagCtx,result="",done=0;return self.rendering.done||(value=finalElse?tagCtx.view.data:val,value!==undefined&&(result+=tagCtx.render(value,finalElse),done+=$isArray(value)?value.length:1),(self.rendering.done=done)&&(self.selected=tagCtx.index)),result},flow:!0},props:{baseTag:"for",dataMap:dataMap(getTargetProps),flow:!0},include:{flow:!0},"*":{render:retVal,flow:!0},":*":{render:retVal,flow:!0},dbg:$helpers.dbg=$converters.dbg=dbgBreak});$converters({html:htmlEncode,attr:htmlEncode,url:function(text){return text!=undefined?encodeURI(""+text):text===null?text:""}})}if($subSettings=$sub.settings,$isArray=($||jsr).isArray,$viewsSettings.delimiters("{{","}}","^"),jsrToJq&&jsr.views.sub._jq($),$views=$.views,$sub=$views.sub,$isFunction=$.isFunction,$isArray=$.isArray,$expando=$.expando,!$.observe){var $eventSpecial=$.event.special,slice=[].slice,splice=[].splice,concat=[].concat,PARSEINT=parseInt,rNotWhite=/\S+/g,propertyChangeStr=$sub.propChng=$sub.propChng||"propertyChange",arrayChangeStr=$sub.arrChng=$sub.arrChng||"arrayChange",cbBindingsStore={},observeStr=propertyChangeStr+".observe",observeObjKey=1,observeCbKey=1,observeInnerCbKey=1,$hasData=$.hasData,$data=$.data,remove={},getCbKey=function(cb){return cb._cId=cb._cId||".obs"+observeCbKey++},ObjectObservable=function(ns,data){return this._data=data,this._ns=ns,this},ArrayObservable=function(ns,data){return this._data=data,this._ns=ns,this},wrapArray=function(data){return $isArray(data)?[data]:data},dependsPaths=function(paths,root,callback){paths=paths?$isArray(paths)?paths:[paths]:[];for(var path,object,rt,nextObj=object=root,l=paths&&paths.length,out=[],i=0;i<l;i++){if(path=paths[i],$isFunction(path)){rt=root._ocp?root.view.data:root;out=out.concat(dependsPaths(path.call(rt,rt,callback),root,callback));continue}else if(""+path!==path){root=nextObj=path;nextObj!==object&&out.push(object=nextObj);continue}nextObj!==object&&out.push(object=nextObj);out.push(path)}return out.length&&(out.unshift({_ar:1}),out.push({_ar:-1})),out},removeCbBindings=function(cbBindings,cbBindingsId){for(var cb in cbBindings)return;delete cbBindingsStore[cbBindingsId]},onDataChange=function(ev,eventArgs){function isOb(val){return typeof val===OBJECT&&(paths[0]||allowArray&&$isArray(val))}if(!(ev.data&&ev.data.off)){var allPath,filter,parentObs,oldValue=eventArgs.oldValue,value=eventArgs.value,ctx=ev.data,observeAll=ctx.observeAll,cb=ctx.cb,allowArray=ctx.arOk,paths=ctx.paths,ns=ctx.ns;ev.type===arrayChangeStr?(cb.array||cb).call(ctx,ev,eventArgs):(ctx.prop===eventArgs.path||ctx.prop==="*")&&(observeAll?(allPath=observeAll._path+"."+eventArgs.path,filter=observeAll.filter,parentObs=[ev.target].concat(observeAll.parents()),isOb(oldValue)&&observe_apply(undefined,ns,[oldValue],paths,cb,!0,filter,[parentObs],allPath),isOb(value)&&observe_apply(undefined,ns,[value],paths,cb,undefined,filter,[parentObs],allPath)):(isOb(oldValue)&&observe_apply(undefined,ns,[oldValue],paths,cb,!0),isOb(value)&&observe_apply(undefined,ns,[value],paths,cb)),ctx.cb(ev,eventArgs))}},observe_apply=function(){var args=concat.apply([],arguments);return $observe.apply(args.shift(),args)},$observeAll=function(cb,filter,unobserve){observeAll(this._ns,this._data,cb,filter,[],"root",unobserve)},$unobserveAll=function(cb,filter){$observeAll.call(this,cb,filter,!0)},observeAll=function(namespace,object,cb,filter,parentObs,allPath,unobserve,objMap){function observeArrayItems(arr,unobs){for(l=arr.length,newAllPath=allPath+"[]";l--;)filterAndObserveAll(arr,l,unobs,1)}function filterAndObserveAll(obj,prop,unobs,nestedArray){var newObject,newParentObs;prop!==$expando&&(newObject=$observable._fltr(newAllPath,obj[prop],nextParentObs,filter))&&(newParentObs=nextParentObs.slice(),nestedArray&&updatedTgt&&newParentObs[0]!==updatedTgt&&newParentObs.unshift(updatedTgt),observeAll(namespace,newObject,cb,filter||(nestedArray?undefined:0),newParentObs,newAllPath,unobs,objMap))}function wrappedCb(ev,eventArgs){allPath=ev.data.observeAll._path;updatedTgt=ev.target;switch(eventArgs.change){case"insert":observeArrayItems(eventArgs.items);break;case"remove":observeArrayItems(eventArgs.items,!0);break;case"set":newAllPath=allPath+"."+eventArgs.path;filterAndObserveAll(eventArgs,"oldValue",!0);filterAndObserveAll(eventArgs,"value")}updatedTgt=undefined;cb.apply(this,arguments)}wrappedCb._wrp=1;var l,isObject,newAllPath,nextParentObs,updatedTgt,obId,notRemoving=!objMap||objMap.un||!unobserve;if(object&&typeof object===OBJECT){if(nextParentObs=[object].concat(parentObs),isObject=$isArray(object)?"":"*",objMap&&notRemoving&&$hasData(object)&&objMap[obId=$data(object).obId]){objMap[obId]++;return}if(objMap||(objMap={un:unobserve}),cb){if(isObject||filter!==0)if(wrappedCb._cId=getCbKey(cb),notRemoving)$observe(namespace,object,isObject,wrappedCb,unobserve,filter,nextParentObs,allPath),obId=$data(object).obId,objMap[obId]=(objMap[obId]||0)+1;else{if(--objMap[$data(object).obId])return;$observe(namespace,object,isObject,wrappedCb,unobserve,filter,nextParentObs,allPath)}}else objMap&&(objMap[$data(object).obId]=1),$observe(namespace,object,isObject,undefined,unobserve,filter,nextParentObs,allPath);if(isObject)for(l in object)newAllPath=allPath+"."+l,filterAndObserveAll(object,l,unobserve);else observeArrayItems(object,unobserve)}},shallowFilter=function(allPath){return allPath.indexOf(".")<0&&allPath.indexOf("[")<0},$unobserve=function(){return[].push.call(arguments,!0),$observe.apply(undefined,arguments)};$observe=function(){function innerObserve(){function observeOnOff(namespace,pathStr,isArrayBinding,off){var j,evData,obIdExpando=$hasData(object),boundObOrArr=wrapArray(object),prntObs=parentObs,allPth=allPath;if(namespace=initialNs?namespace+"."+initialNs:namespace,!unobserve&&(off||isArrayBinding))for(events=obIdExpando&&$._data(object),events=events&&events.events,events=events&&events[isArrayBinding?arrayChangeStr:propertyChangeStr],el=events&&events.length;el--;)if(data=events[el]&&events[el].data,data&&(off&&data.ns!==initialNs||!off&&data.ns===initialNs&&data.cb&&data.cb._cId===callback._cId&&(!callback._wrp||data.cb._wrp)))return;if(unobserve||off)$(boundObOrArr).off(namespace,onDataChange);else{evData=isArrayBinding?{}:{fullPath:path,paths:pathStr?[pathStr]:[],prop:prop,arOk:allowArray};evData.ns=initialNs;evData.cb=callback;allPath&&(evData.observeAll={_path:allPth,path:function(){return j=prntObs.length,allPth.replace(/[[.]/g,function(all){return j--,all==="["?"["+$.inArray(prntObs[j-1],prntObs[j]):"."})},parents:function(){return prntObs},filter:filter});$(boundObOrArr).on(namespace,null,evData,onDataChange);cbBindings&&(cbBindings[$data(object).obId||$data(object,"obId",observeObjKey++)]=object)}}function getInnerCb(exprOb){var origRt=root;return exprOb.ob=contextCb(exprOb,origRt),exprOb.cb=function(ev,eventArgs){var obj=exprOb.ob,sub=exprOb.sb,newObj=contextCb(exprOb,origRt);newObj!==obj&&(typeof obj===OBJECT&&(bindArray(obj,!0),(sub||allowArray&&$isArray(obj))&&innerObserve([obj],sub,callback,contextCb,!0)),exprOb.ob=newObj,typeof newObj===OBJECT&&(bindArray(newObj),(sub||allowArray&&$isArray(newObj))&&innerObserve([newObj],sub,callback,contextCb)));callback(ev,eventArgs)}}function bindArray(arr,unbind,isArray,relPath){if(allowArray){var prevObj=object,prevAllPath=allPath;object=arr;relPath&&(object=arr[relPath],allPath+="."+relPath);filter&&object&&(object=$observable._fltr(allPath,object,relPath?[arr].concat(parentObs):parentObs,filter));object&&(isArray||$isArray(object))&&observeOnOff(arrayChangeStr+".observe"+(callback?getCbKey(callback):""),undefined,!0,unbind);object=prevObj;allPath=prevAllPath}}var i,p,skip,parts,prop,path,dep,unobserve,callback,cbId,inId,el,data,events,contextCb,innerContextCb,items,cbBindings,depth,innerCb,parentObs,allPath,filter,initNsArr,initNsArrLen,view,cbItemCount,ns=observeStr,paths=this!=1?concat.apply([],arguments):slice.call(arguments),lastArg=paths.pop()||!1,root=paths.shift(),object=root,l=paths.length;if(origRoots.unshift(root),lastArg+""===lastArg&&(allPath=lastArg,parentObs=paths.pop(),filter=paths.pop(),lastArg=!!paths.pop(),l-=3),lastArg===!!lastArg&&(unobserve=lastArg,lastArg=paths[l-1],lastArg=l&&lastArg+""!==lastArg&&(!lastArg||$isFunction(lastArg))?(l--,paths.pop()):undefined,unobserve&&!l&&$isFunction(root)&&(lastArg=root,root=undefined)),callback=lastArg,l&&$isFunction(paths[l-1])&&(innerContextCb=contextCb=callback,callback=paths.pop(),l--),unobserve&&callback&&!callback._cId){origRoots.shift();return}for(ns+=callback?(inId=callback._inId||"",unobserve)?callback._cId+inId:(cbId=getCbKey(callback))+inId:"",cbId&&!unobserve&&(cbBindings=cbBindingsStore[cbId]=cbBindingsStore[cbId]||{}),initNsArr=initialNs&&initialNs.match(rNotWhite)||[""],initNsArrLen=initNsArr.length;initNsArrLen--;){if(initialNs=initNsArr[initNsArrLen],root&&!paths[0]&&($isArray(root)&&bindArray(root,unobserve,!0),unobserve&&observeOnOff(ns,"")),unobserve&&!l&&!root)for(p in cbBindingsStore){p=cbBindingsStore[p];for(data in p)object=p[data],$isArray(object)?bindArray(object,unobserve,unobserve):observeOnOff(ns,"")}for(depth=0,cbItemCount=0,i=0;i<l;i++)if(cbItemCount?cbItemCount--:contextCb=innerContextCb,path=paths[i],path!==""&&path!==root){if(path&&path._ar){allowArray+=path._ar;continue}if(object=root,""+path===path?(parts=path.split("^"),parts[1]&&(depth=parts[0].split(".").length,path=parts.join("."),depth=path.split(".").length-depth),contextCb&&(items=contextCb(path,root,depth)),contextCb=innerContextCb,parts=path.split(".")):path&&path._cxp?(view=path.shift(),_ocp in view?(root=view,contextCb=0):(contextCb=$sub._gccb(view),root=view.data),items=path,items.push(origRoot),cbItemCount=items.length):($isFunction(path)||path&&path._cpfn&&(innerCb=unobserve?path.cb:getInnerCb(path),innerCb._cId=callback._cId,innerCb._inId=innerCb._inId||".obIn"+observeInnerCbKey++,(path.bnd||path.prm&&path.prm.length||!path.sb)&&innerObserve([object],path.path,[path.root||root],path.prm,innerCb,contextCb,unobserve),path.sb&&(path.sb.prm&&(path.sb.root=root),innerObserve([path.ob],path.sb,callback,contextCb,unobserve)),path=origRoot,object=undefined),parts=[root=path]),items){l+=items.length-1;splice.apply(paths,[i--,1].concat(items));items=undefined;continue}while(object&&(prop=parts.shift())!==undefined)if(typeof object===OBJECT){if(""+prop===prop){if(prop==="")continue;if(parts.length<depth+1&&!object.nodeType){if(!unobserve&&(events=$hasData(object)&&$._data(object))){for(events=events.events,events=events&&events[propertyChangeStr],el=events&&events.length,skip=0;el--;)data=events[el].data,data&&data.ns===initialNs&&data.cb._cId===callback._cId&&data.cb._inId===callback._inId&&(data.prop===prop||data.prop==="*"||data.prop==="**")&&((p=parts.join("."))&&data.paths.push(p),skip++);if(skip){object=object[prop];continue}}if(prop==="*"||prop==="**"){if(!unobserve&&events&&events.length&&observeOnOff(ns,"",!1,!0),prop==="*"){observeOnOff(ns,"");for(p in object)p!==$expando&&bindArray(object,unobserve,undefined,p)}else $.observable(initialNs,object)[(unobserve?"un":"")+"observeAll"](callback);break}else prop&&observeOnOff(ns+".p_"+prop,parts.join("^"))}allPath&&(allPath+="."+prop);prop=object[prop];parts[0]||bindArray(prop,unobserve)}if($isFunction(prop)){(dep=prop.depends)&&innerObserve([object._ocp?object.view.data:object],dependsPaths(dep,object,callback),callback,contextCb,unobserve);break}object=prop}}}return cbId&&removeCbBindings(cbBindings,cbId),origRoots.shift(),{cbId:cbId,bnd:cbBindings}}var initialNs,allowArray=this==1?0:1,paths=slice.call(arguments),origRoot=paths[0],origRoots=[origRoot];return origRoot+""===origRoot&&allowArray&&(initialNs=origRoot,paths.shift(),origRoot=paths[0]),innerObserve.apply(1,paths)};$observable=function(ns,data){return arguments.length===1&&(data=ns,ns=""),$isArray(data)?new ArrayObservable(ns,data):new ObjectObservable(ns,data)};$.observable=$observable;$observable._fltr=function(allPath,object,parentObs,filter){if(filter&&$isFunction(filter)?filter(allPath,object,parentObs):!0)return object=$isFunction(object)?object.set&&object.call(parentObs[0]):object,typeof object===OBJECT&&object};$observable.Object=ObjectObservable;$observable.Array=ArrayObservable;$.observe=$observable.observe=$observe;$.unobserve=$observable.unobserve=$unobserve;$observable._apply=observe_apply;ObjectObservable.prototype={_data:null,observeAll:$observeAll,unobserveAll:$unobserveAll,data:function(){return this._data},setProperty:function(path,value,nonStrict){path=path||"";var key,pair,parts,multi=path+""!==path&&!path._is,self=this,object=self._data;if(object)if(multi)if(nonStrict=value,$isArray(path))for(key=path.length;key--;)pair=path[key],self.setProperty(pair.name,pair.value,nonStrict===undefined||nonStrict);else for(key in path)self.setProperty(key,path[key],nonStrict);else if(path!==$expando){if(path._is)parts=[path];else for(parts=path.split(/[.^]/);object&&parts.length>1;)object=object[parts.shift()];object&&self._setProperty(object,parts[0],value,nonStrict)}return self},removeProperty:function(path){return this.setProperty(path,remove),this},_setProperty:function(leaf,path,value,nonStrict){var setter,getter,removeProp,property=path?leaf[path]:leaf;$isFunction(property)&&property.set&&(leaf=leaf._vw||leaf,getter=property,setter=getter.set===!0?getter:getter.set,property=getter.call(leaf));(property!==value||nonStrict&&property!=value)&&(!(property instanceof Date&&value instanceof Date)||property>value||property<value)&&(setter?(setter.call(leaf,value),value=getter.call(leaf)):(removeProp=value===remove)?property!==undefined?(delete leaf[path],value=undefined):path=undefined:path&&(leaf[path]=value),path&&this._trigger(leaf,{change:"set",path:path,value:value,oldValue:property,remove:removeProp}))},_trigger:function(target,eventArgs){$(target).triggerHandler(propertyChangeStr+(this._ns?"."+/^\S+/.exec(this._ns)[0]:""),eventArgs)}};ArrayObservable.prototype={_data:null,observeAll:$observeAll,unobserveAll:$unobserveAll,data:function(){return this._data},insert:function(index,data){var _data=this._data;return arguments.length===1&&(data=index,index=_data.length),index=PARSEINT(index),index>-1&&(data=$isArray(data)?data:[data],data.length&&this._insert(index,data)),this},_insert:function(index,data){var _data=this._data,oldLength=_data.length;index>oldLength&&(index=oldLength);splice.apply(_data,[index,0].concat(data));this._trigger({change:"insert",index:index,items:data},oldLength)},remove:function(index,numToRemove){var items,_data=this._data;return index===undefined&&(index=_data.length-1),index=PARSEINT(index),numToRemove=numToRemove?PARSEINT(numToRemove):numToRemove===0?0:1,numToRemove>0&&index>-1&&(items=_data.slice(index,index+numToRemove),(numToRemove=items.length)&&this._remove(index,numToRemove,items)),this},_remove:function(index,numToRemove,items){var _data=this._data,oldLength=_data.length;_data.splice(index,numToRemove);this._trigger({change:"remove",index:index,items:items},oldLength)},move:function(oldIndex,newIndex,numToMove){return numToMove=numToMove?PARSEINT(numToMove):numToMove===0?0:1,oldIndex=PARSEINT(oldIndex),newIndex=PARSEINT(newIndex),numToMove>0&&oldIndex>-1&&newIndex>-1&&oldIndex!==newIndex&&this._move(oldIndex,newIndex,numToMove),this},_move:function(oldIndex,newIndex,numToMove){var items,_data=this._data,oldLength=_data.length,excess=oldIndex+numToMove-oldLength;excess>0&&(numToMove-=excess);numToMove&&(items=_data.splice(oldIndex,numToMove),newIndex>_data.length&&(newIndex=_data.length),splice.apply(_data,[newIndex,0].concat(items)),newIndex!==oldIndex&&this._trigger({change:"move",oldIndex:oldIndex,index:newIndex,items:items},oldLength))},refresh:function(newItems){function insertAdded(){k&&(self.insert(j-k,addedItems),dataLength+=k,i+=k,k=0,addedItems=[])}var i,j,k,newItem,num,self=this,addedItems=[],data=self._data,oldItems=data.slice(),oldLength=data.length,dataLength=oldLength,newLength=newItems.length;for(self._srt=!0,j=k=0;j<newLength;j++)if((newItem=newItems[j])===data[j-k])insertAdded();else{for(i=j-k;i<dataLength;i++)if(newItem===data[i])break;if(i<dataLength){for(insertAdded(),num=0;num++<newLength-i&&newItems[j+num]===data[i+num];);self.move(i,j,num);j+=num-1}else k++,addedItems.push(newItem)}return insertAdded(),dataLength>j&&self.remove(j,dataLength-j),self._srt=undefined,self._trigger({change:"refresh",oldItems:oldItems},oldLength),self},_trigger:function(eventArgs,oldLength){var self=this,_data=self._data,length=_data.length,$_data=$([_data]);self._srt?eventArgs.refresh=!0:length!==oldLength&&$_data.triggerHandler(propertyChangeStr,{change:"set",path:"length",value:length,oldValue:oldLength});$_data.triggerHandler(arrayChangeStr+(self._ns?"."+/^\S+/.exec(self._ns)[0]:""),eventArgs)}};$eventSpecial[propertyChangeStr]=$eventSpecial[arrayChangeStr]={remove:function(handleObj){var cbBindings,found,events,l,data,evData=handleObj.data;if(evData&&(evData.off=!0,evData=evData.cb)&&(cbBindings=cbBindingsStore[evData._cId])){for(events=$._data(this).events[handleObj.type],l=events.length;l--&&!found;)found=(data=events[l].data)&&data.cb&&data.cb._cId===evData._cId;found||(delete cbBindings[$data(this).obId],removeCbBindings(cbBindings,evData._cId))}}};$views.map=function(mapDef){function Map(source,options,target,unbound){var changing,map=this;this.src&&this.unmap();typeof source===OBJECT&&(map.src=source,map.tgt=target||map.tgt||[],map.options=options||map.options,map.update(),unbound||(mapDef.obsSrc&&$observable(map.src).observeAll(map.obs=function(ev,eventArgs){changing||(changing=!0,mapDef.obsSrc(map,ev,eventArgs),changing=undefined)},map.srcFlt),mapDef.obsTgt&&$observable(map.tgt).observeAll(map.obt=function(ev,eventArgs){changing||(changing=!0,mapDef.obsTgt(map,ev,eventArgs),changing=undefined)},map.tgtFlt)))}return $isFunction(mapDef)&&(mapDef={getTgt:mapDef}),mapDef.baseMap&&(mapDef=$.extend({},mapDef.baseMap,mapDef)),mapDef.map=function(source,options,target,unbound){return new Map(source,options,target,unbound)},(Map.prototype={srcFlt:mapDef.srcFlt||shallowFilter,tgtFlt:mapDef.tgtFlt||shallowFilter,update:function(options){var map=this;$observable(map.tgt).refresh(mapDef.getTgt(map.src,map.options=options||map.options))},unmap:function(){var map=this;map.src&&(map.obs&&$observable(map.src).unobserveAll(map.obs,map.srcFlt),map.obt&&$observable(map.tgt).unobserveAll(map.obt,map.tgtFlt),map.src=undefined)},map:Map,_def:mapDef}).constructor=Map,mapDef};$sub.advSet=function(){$sub._gccb=this._gccb;global._jsv=$subSettings.advanced._jsv?{cbBindings:cbBindingsStore}:undefined};$sub._dp=dependsPaths}if($viewsSettings=$views.settings,$subSettings=$sub.settings,$subSettingsAdvanced=$subSettings.advanced,$converters=$views.converters,$.templates=$templates=$views.templates,$tags=$views.tags,rFirstElem=/<(?!script)(\w+)[>\s]/,$.link)return $;$subSettings.trigger=!0;var activeBody,rTagDatalink,$view,$viewsLinkAttr,linkViewsSel,wrapMap,viewStore,oldAdvSet,useInput,jsvAttrStr="data-jsv",elementChangeStr="change.jsv",onBeforeChangeStr="onBeforeChange",onAfterChangeStr="onAfterChange",onAfterCreateStr="onAfterCreate",CHECKED="checked",CHECKBOX="checkbox",RADIO="radio",NONE="none",VALUE="value",SCRIPT="SCRIPT",TRUE="true",closeScript='"><\/script>',openScript='<script type="jsv',deferAttr=jsvAttrStr+"-df",bindElsSel="script,["+jsvAttrStr+"]",fnSetters={value:"val",input:"val",html:HTML,text:"text"},valueBinding={from:VALUE,to:VALUE},isCleanCall=0,oldCleanData=$.cleanData,oldJsvDelimiters=$viewsSettings.delimiters,safeFragment=document.createDocumentFragment(),qsa=document.querySelector,elContent={ol:1,ul:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,colgroup:1,dl:1,select:1,optgroup:1,svg:1,svg_ns:1},badParent={tr:"table"},voidElems={br:1,img:1,input:1,hr:1,area:1,base:1,col:1,link:1,meta:1,command:1,embed:1,keygen:1,param:1,source:1,track:1,wbr:1},displayStyles={},bindingStore={},bindingKey=1,rViewPath=/^#(view\.?)?/,rConvertMarkers=/((\/>)|<\/(\w+)>|)(\s*)([#\/]\d+(?:_|(\^)))`(\s*)(<\w+(?=[\s\/>]))?|\s*(?:(<\w+(?=[\s\/>]))|<\/(\w+)>(\s*)|(\/>)\s*|(>)|$)/g,rOpenViewMarkers=/(#)()(\d+)(_)/g,rOpenMarkers=/(#)()(\d+)([_^])/g,rViewMarkers=/(?:(#)|(\/))(\d+)(_)/g,rOpenTagMarkers=/(#)()(\d+)(\^)/g,rMarkerTokens=/(?:(#)|(\/))(\d+)([_^])([-+@\d]+)?/g,rSplitBindings=/&(\d+)\+?/g,getComputedStyle=global.getComputedStyle;if($observable=$.observable,!$observable)throw requiresStr+"JsObservable";return $observe=$observable.observe,addLinkMethods($sub.View.prototype),$sub.onStore.template=function(name,item,parentTmpl){item===null?(delete $.link[name],delete $.render[name]):(item.link=tmplLink,name&&!parentTmpl&&name!=="jsvTmpl"&&($.render[name]=item,$.link[name]=function(){return tmplLink.apply(item,arguments)}))},$sub.viewInfos=viewInfos,($viewsSettings.delimiters=function(){var ret=oldJsvDelimiters.apply(0,arguments);return oldJsvDelimiters!==$viewsDelimiters&&(ret=$viewsDelimiters.apply(0,arguments)),rTagDatalink=new RegExp("(?:^|\\s*)([\\w-]*)(\\"+linkChar+")?(\\"+delimOpenChar1+$sub.rTag+"(:\\w*)?\\"+delimCloseChar0+")","g"),ret})(),$sub.addSetting("trigger"),$converters.merge=function(val){var regularExpression,currentValue=this.linkCtx.elem.className,toggle=this.tagCtx.props.toggle;return toggle&&(regularExpression=toggle.replace(/[\\^$.|?*+()[{]/g,"\\$&"),regularExpression="(\\s(?="+regularExpression+"$)|(\\s)|^)("+regularExpression+"(\\s|$))",currentValue=currentValue.replace(new RegExp(regularExpression),"$2"),val=currentValue+(val?(currentValue&&" ")+toggle:"")),val},$tags({on:{attr:NONE,init:function(tagCtx){for(var content,tag=this,i=0,args=tagCtx.args,l=args.length;i<l&&!$isFunction(args[i]);i++);tag._hi=l>i&&i+1;tag._.inline&&($sub.rTmpl.exec(content=$.trim(tagCtx.tmpl.markup))||(tag.template="<button>"+(content||tagCtx.params.args[i]||"noop")+"<\/button>"),tag.attr=HTML)},onBeforeBind:function(){this.template&&(this.mainElem=this.contents("button"))},onAfterLink:function(tagCtx,linkCtx){var handler,params,activeElem,tag=this,i=tag._hi,args=tagCtx.args,l=args.length,props=tagCtx.props,data=props.data,view=tagCtx.view,contextOb=props.context;if(i){handler=args[i-1];params=args.slice(i);args=args.slice(0,i-1);tag._sel=args[1];activeElem=tag.activeElem=tag.activeElem||$(tag._.inline?(tag._sel=args[1]||"*",tag.parentElem):linkCtx.elem);contextOb||(contextOb=/^(.*)[\.^][\w$]+$/.exec(tagCtx.params.args.slice(-params.length-1)[0]),contextOb=contextOb&&$sub.tmplFn(delimOpenChar1+":"+contextOb[1]+delimCloseChar0,view.tmpl,!0)(linkCtx.data,view));tag._evs&&tag.onUnbind();activeElem.on(tag._evs=args[0]||"click",tag._sel,data==undefined?null:data,tag._hlr=function(ev){var nodes,found=!tag._.inline;if(!found)for(nodes=tag.contents("*"),l=nodes.length;!found&&l--;)nodes[l].contains(ev.target)&&(found=!0);if(found)return handler.apply(contextOb||linkCtx.data,[].concat(params,ev,{change:ev.type,view:view,linkCtx:linkCtx},params.slice.call(arguments,1)))})}},onUpdate:!1,onUnbind:function(){var self=this;self.activeElem&&self.activeElem.off(self._evs,self._sel,self._hlr)},contentCtx:!0,setSize:!0,dataBoundOnly:!0},radiogroup:{init:function(tagCtx){this.name=tagCtx.props.name||(Math.random()+"jsv").slice(9)},onBind:function(tagCtx,linkCtx){var domChngCntnr,$linkedElem,l,tag=this;for(tag._.inline?(domChngCntnr=tag.contents("*")[0],domChngCntnr=domChngCntnr&&$view(domChngCntnr).ctx.tag===tag.parent?domChngCntnr:tag.parentElem,$linkedElem=tag.contents(!0,"input[type=radio]")):(domChngCntnr=linkCtx.elem,$linkedElem=$("input[type=radio]",linkCtx.elem)),tag.linkedElem=$linkedElem,l=$linkedElem.length;l--;)$linkedElem[l].name=$linkedElem[l].name||tag.name;$(domChngCntnr).on("jsv-domchange",function(ev,forOrIfTagCtx){var linkedElem,val,parentTags=forOrIfTagCtx.ctx.parentTags;if(!tag._.inline||domChngCntnr!==tag.parentElem||parentTags&&parentTags[tag.tagName]===tag){for(val=tag.cvtArgs()[0],$linkedElem=tag.linkedElem=tag.contents(!0,"input[type=radio]"),l=$linkedElem.length;l--;)linkedElem=$linkedElem[l],linkedElem._jsvLkEl=tag,linkedElem.name=linkedElem.name||tag.name,linkedElem._jsvBnd="&"+tag._tgId+"+",linkedElem.checked=val===linkedElem.value;tag.linkedElems=tagCtx.linkedElems=[$linkedElem]}})},onUpdate:!1,contentCtx:!0,dataBoundOnly:!0}}),$extend($tags["for"],{onArrayChange:function(ev,eventArgs,tagCtx,linkCtx){var arrayView,target=ev.target,targetLength=target.length,tag=this,change=eventArgs.change;for(arrayView in tag._.arrVws)arrayView=tag._.arrVws[arrayView];tag._.noVws||tag.tagCtxs[1]&&(change==="insert"&&targetLength===eventArgs.items.length||change==="remove"&&!targetLength)?tag.refresh():arrayView.data===target&&arrayChangeHandler.apply(arrayView,arguments);tag._elCnt&&(arrayView=arrayView.views[0],tag._prv=arrayView?arrayView._prv:null);tag.domChange(tagCtx,linkCtx,eventArgs);ev.done=!0},onAfterLink:function(tagCtx,linkCtx){for(var arrHandler,arrBinding,data,tag=this,i=0,arrayBindings=tag._ars||{},tagCtxs=tag.tagCtxs,l=tagCtxs.length,selected=tag.selected||0;i<=selected;i++)tagCtx=tagCtxs[i],data=tagCtx.map?tagCtx.map.tgt:tagCtx.args.length?tagCtx.args[0]:tagCtx.view.data,(arrBinding=arrayBindings[i])&&data!==arrBinding[0]&&($observe(arrBinding[0],arrBinding[1],!0),delete arrayBindings[i]),!arrayBindings[i]&&$isArray(data)&&function(){var tagCt=tagCtx;$observe(data,arrHandler=function(ev,eventArgs){tag.onArrayChange(ev,eventArgs,tagCt,linkCtx)});arrayBindings[i]=[data,arrHandler]}();for(i=selected+1;i<l;i++)(arrBinding=arrayBindings[i])&&($observe(arrBinding[0],arrBinding[1],!0),delete arrayBindings[i]);tag._ars=arrayBindings},onDispose:function(){var l,tag=this;for(l in tag._ars)$observe(tag._ars[l][0],tag._ars[l][1],!0)}}),$extend($tags["if"],{onUpdate:function(ev,eventArgs,newTagCtxs){for(var prevArg,different,tci=0;prevArg=this.tagCtxs[tci];tci++)if(different=prevArg.props.tmpl!==newTagCtxs[tci].props.tmpl||prevArg.args.length&&!(prevArg=prevArg.args[0])!=!newTagCtxs[tci].args[0],!this.convert&&!!prevArg||different)return different;return!1},onAfterLink:function(tagCtx,linkCtx,ctx,ev,eventArgs){eventArgs&&this.domChange(tagCtx,linkCtx,eventArgs)}}),$tags("props",{baseTag:"for",dataMap:$views.map({getTgt:$tags.props.dataMap.getTgt,obsSrc:observeProps,obsTgt:observeMappedProps,tgtFlt:shallowArrayFilter}),flow:!0}),$extend($,{view:$view=function(node,inner,type){function getInnerView(nd,isVl){if(nd)for(vwInfos=viewInfos(nd,isVl,rOpenViewMarkers),j=0,k=vwInfos.length;j<k;j++)if((view=viewStore[vwInfos[j].id])&&(view=view&&type?view.get(!0,type):view))break}inner!==!!inner&&(type=inner,inner=undefined);var view,vwInfos,i,j,k,l,elems,level=0,body=document.body;if(node&&node!==body&&topView._.useKey>1&&(node=""+node===node?$(node)[0]:node.jquery?node[0]:node,node)){if(inner){if(getInnerView(node._df,!0),!view)for(elems=qsa?node.querySelectorAll(bindElsSel):$(bindElsSel,node).get(),l=elems.length,i=0;!view&&i<l;i++)getInnerView(elems[i]);return view}while(node){if(vwInfos=viewInfos(node,undefined,rViewMarkers))for(l=vwInfos.length;l--;)if(view=vwInfos[l],view.open){if(level<1)return view=viewStore[view.id],view&&type?view.get(type):view||topView;level--}else level++;node=node.previousSibling||node.parentNode}}return topView},link:$link,unlink:$unlink,cleanData:function(elems){elems.length&&isCleanCall&&clean(elems);oldCleanData.apply($,arguments)}}),$extend($.fn,{link:function(expr,from,context,noIteration,parentView,prevNode,nextNode){return $link(expr,this,from,context,noIteration,parentView,prevNode,nextNode)},unlink:function(){return $unlink(this)},view:function(inner,type){return $view(this[0],inner,type)}}),$.each([HTML,"replaceWith","empty","remove"],function(i,name){var oldFn=$.fn[name];$.fn[name]=function(){var result;isCleanCall=1;try{result=oldFn.apply(this,arguments)}finally{isCleanCall=0}return result}}),$extend(topView=$sub.topView,{tmpl:{links:{}}}),viewStore={0:topView},$sub._glt=function(elem){for(var linkCtx,regEx=/#(\d*)\^\/\1\^/g,linkCtxs=[],tokens=markerNodeInfo(elem);linkCtx=regEx.exec(tokens);)(linkCtx=bindingStore[linkCtx[1]])&&linkCtxs.push(linkCtx.linkCtx.tag);return linkCtxs},$sub._gccb=function(view){return function(path,object,depth){var tokens,tag,items,helper,last,nextPath,l,obsCtxPrm,addedTagCpDep,key,bindTo;if(view&&path){if(path._cpfn)return path._cpfn.call(view.tmpl,object,view,$sub);if(path.charAt(0)==="~"){if(path.slice(0,4)==="~tag"&&(tag=view.ctx,path.charAt(4)==="."&&(tokens=path.slice(5).split("."),tag=tag.tag),tokens))return tag?[tag,tokens.join("."),object]:[];if(path=path.slice(1).split("."),helper=view.ctxPrm(last=path.shift(),undefined,!0))if(obsCtxPrm=helper._cxp){if(path.length&&(nextPath="."+path.join("."),last=helper[l=helper.length-1],last._cpfn?(last.sb=nextPath,last.bnd=!!depth):(helper[l]=(last+nextPath).replace("#data.",""),last.slice(0,5)==="#view"&&(helper[l]=helper[l].slice(6),helper.splice(l,0,view)))),items=[helper],(tag=obsCtxPrm.tag)&&tag.convert)for(bindTo=tag.bindTo||[0],l=bindTo.length;l--;)depth!==undefined&&l!==obsCtxPrm.ind&&(key=bindTo[l],addedTagCpDep=[helper[0],tag.tagCtx.params[+key===key?"args":"props"]],addedTagCpDep._cxp=obsCtxPrm,items.push(addedTagCpDep))}else(path.length||$isFunction(helper))&&(items=[helper,path.join("."),object]);return items||[]}if(path.charAt(0)==="#")return path==="#data"?[]:[view,path.replace(rViewPath,""),object]}}},$sub._cp=function(paramVal,paramExpr,view,tagCtxPrm){if(view.linked){if(paramExpr){var params=delimOpenChar1+":"+paramExpr+delimCloseChar0,links=topView.tmpl.links,linkFn=links[params];linkFn||(links[params]=linkFn=$sub.tmplFn(params,view.tmpl,!0));paramVal=linkFn.deps[0]?[view,linkFn]:[{_ocp:tagCtxPrm?tagCtxPrm.tag.cvtArgs(undefined,1,tagCtxPrm.tagElse)[tagCtxPrm.ind]:linkFn()}]}else paramVal=[{_ocp:undefined}];paramVal._cxp=tagCtxPrm||{updateValue:function(val){return $observable(paramVal._cxp.data).setProperty(paramVal._cxp.path,val),this}}}return paramVal},$sub._crcp=function(key,res,storeView,store){return(store||(storeView._ocps=storeView._ocps||{}))[key]=res=[{_ocp:res,_vw:storeView}],res._cxp={path:_ocp,ind:0,updateValue:function(val){return $.observable(res[0]).setProperty(_ocp,val),this}},res},$sub._ucp=function(key,value,view,obsCtxPrm){var index,tag;return obsCtxPrm.path||resolveDataTargetPath("~"+key,view.data,$sub._gccb(view)),(tag=obsCtxPrm.tag)&&(index=$.inArray(key,tag.linkedCtxParam),tag.setValue(value,index,obsCtxPrm.tagElse)),(tag||obsCtxPrm).updateValue(value,index,obsCtxPrm.tagElse)},$sub._ceo=function cloneExprObjects(obs){for(var ob,clones=[],l=obs.length;l--;)ob=obs[l],ob._cpfn&&(ob=$extend({},ob),ob.prm=cloneExprObjects(ob.prm)),clones.unshift(ob);return clones},oldAdvSet=$sub.advSet,$sub.advSet=function(){oldAdvSet.call($sub);global._jsv=$subSettingsAdvanced._jsv?$extend(global._jsv||{},{views:viewStore,bindings:bindingStore}):undefined;$viewsLinkAttr=$subSettingsAdvanced.linkAttr;linkViewsSel=bindElsSel+",["+$viewsLinkAttr+"]";wrapMap=$subSettingsAdvanced._wm;wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td},$viewsSettings.advanced({linkAttr:"data-link",useViews:!1,noValidate:!1,_wm:{option:[1,"<select multiple='multiple'>","<\/select>"],legend:[1,"<fieldset>","<\/fieldset>"],area:[1,"<map>","<\/map>"],param:[1,"<object>","<\/object>"],thead:[1,"<table>","<\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],col:[2,"<table><tbody><\/tbody><colgroup>","<\/colgroup><\/table>"],svg_ns:[1,"<svg>","<\/svg>"],div:$.support.htmlSerialize?[0,"",""]:[1,"X<div>","<\/div>"]},_fe:{input:{from:inputAttrib,to:VALUE},textarea:valueBinding,select:valueBinding,optgroup:{to:"label"}}}),$},window);
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
(function(){function addMapEntry(map,pair){return map.set(pair[0],pair[1]),map}function addSetEntry(set,value){return set.add(value),set}function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}function arrayAggregator(array,setter,iteratee,accumulator){for(var index=-1,length=array==null?0:array.length,value;++index<length;)value=array[index],setter(accumulator,value,iteratee(value),array);return accumulator}function arrayEach(array,iteratee){for(var index=-1,length=array==null?0:array.length;++index<length;)if(iteratee(array[index],index,array)===!1)break;return array}function arrayEachRight(array,iteratee){for(var length=array==null?0:array.length;length--;)if(iteratee(array[length],length,array)===!1)break;return array}function arrayEvery(array,predicate){for(var index=-1,length=array==null?0:array.length;++index<length;)if(!predicate(array[index],index,array))return!1;return!0}function arrayFilter(array,predicate){for(var index=-1,length=array==null?0:array.length,resIndex=0,result=[],value;++index<length;)value=array[index],predicate(value,index,array)&&(result[resIndex++]=value);return result}function arrayIncludes(array,value){var length=array==null?0:array.length;return!!length&&baseIndexOf(array,value,0)>-1}function arrayIncludesWith(array,value,comparator){for(var index=-1,length=array==null?0:array.length;++index<length;)if(comparator(value,array[index]))return!0;return!1}function arrayMap(array,iteratee){for(var index=-1,length=array==null?0:array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array==null?0:array.length;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}function arrayReduceRight(array,iteratee,accumulator,initAccum){var length=array==null?0:array.length;for(initAccum&&length&&(accumulator=array[--length]);length--;)accumulator=iteratee(accumulator,array[length],length,array);return accumulator}function arraySome(array,predicate){for(var index=-1,length=array==null?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}function asciiToArray(string){return string.split("")}function asciiWords(string){return string.match(reAsciiWord)||[]}function baseFindKey(collection,predicate,eachFunc){var result;return eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection))return result=key,!1}),result}function baseFindIndex(array,predicate,fromIndex,fromRight){for(var length=array.length,index=fromIndex+(fromRight?1:-1);fromRight?index--:++index<length;)if(predicate(array[index],index,array))return index;return-1}function baseIndexOf(array,value,fromIndex){return value===value?strictIndexOf(array,value,fromIndex):baseFindIndex(array,baseIsNaN,fromIndex)}function baseIndexOfWith(array,value,fromIndex,comparator){for(var index=fromIndex-1,length=array.length;++index<length;)if(comparator(array[index],value))return index;return-1}function baseIsNaN(value){return value!==value}function baseMean(array,iteratee){var length=array==null?0:array.length;return length?baseSum(array,iteratee)/length:NAN}function baseProperty(key){return function(object){return object==null?undefined:object[key]}}function basePropertyOf(object){return function(key){return object==null?undefined:object[key]}}function baseReduce(collection,iteratee,accumulator,initAccum,eachFunc){return eachFunc(collection,function(value,index,collection){accumulator=initAccum?(initAccum=!1,value):iteratee(accumulator,value,index,collection)}),accumulator}function baseSortBy(array,comparer){var length=array.length;for(array.sort(comparer);length--;)array[length]=array[length].value;return array}function baseSum(array,iteratee){for(var result,index=-1,length=array.length,current;++index<length;)current=iteratee(array[index]),current!==undefined&&(result=result===undefined?current:result+current);return result}function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}function baseToPairs(object,props){return arrayMap(props,function(key){return[key,object[key]]})}function baseUnary(func){return function(value){return func(value)}}function baseValues(object,props){return arrayMap(props,function(key){return object[key]})}function cacheHas(cache,key){return cache.has(key)}function charsStartIndex(strSymbols,chrSymbols){for(var index=-1,length=strSymbols.length;++index<length&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1;);return index}function charsEndIndex(strSymbols,chrSymbols){for(var index=strSymbols.length;index--&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1;);return index}function countHolders(array,placeholder){for(var length=array.length,result=0;length--;)array[length]===placeholder&&++result;return result}function escapeStringChar(chr){return"\\"+stringEscapes[chr]}function getValue(object,key){return object==null?undefined:object[key]}function hasUnicode(string){return reHasUnicode.test(string)}function hasUnicodeWord(string){return reHasUnicodeWord.test(string)}function iteratorToArray(iterator){for(var data,result=[];!(data=iterator.next()).done;)result.push(data.value);return result}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}function overArg(func,transform){return function(arg){return func(transform(arg))}}function replaceHolders(array,placeholder){for(var index=-1,length=array.length,resIndex=0,result=[],value;++index<length;)value=array[index],(value===placeholder||value===PLACEHOLDER)&&(array[index]=PLACEHOLDER,result[resIndex++]=index);return result}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}function setToPairs(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=[value,value]}),result}function strictIndexOf(array,value,fromIndex){for(var index=fromIndex-1,length=array.length;++index<length;)if(array[index]===value)return index;return-1}function strictLastIndexOf(array,value,fromIndex){for(var index=fromIndex+1;index--;)if(array[index]===value)return index;return index}function stringSize(string){return hasUnicode(string)?unicodeSize(string):asciiSize(string)}function stringToArray(string){return hasUnicode(string)?unicodeToArray(string):asciiToArray(string)}function unicodeSize(string){for(var result=reUnicode.lastIndex=0;reUnicode.test(string);)++result;return result}function unicodeToArray(string){return string.match(reUnicode)||[]}function unicodeWords(string){return string.match(reUnicodeWord)||[]}var undefined,VERSION="4.17.4",LARGE_ARRAY_SIZE=200,CORE_ERROR_TEXT="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",FUNC_ERROR_TEXT="Expected a function",HASH_UNDEFINED="__lodash_hash_undefined__",MAX_MEMOIZE_SIZE=500,PLACEHOLDER="__lodash_placeholder__",CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2,WRAP_BIND_FLAG=1,WRAP_BIND_KEY_FLAG=2,WRAP_CURRY_BOUND_FLAG=4,WRAP_CURRY_FLAG=8,WRAP_CURRY_RIGHT_FLAG=16,WRAP_PARTIAL_FLAG=32,WRAP_PARTIAL_RIGHT_FLAG=64,WRAP_ARY_FLAG=128,WRAP_REARG_FLAG=256,WRAP_FLIP_FLAG=512,DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION="...",HOT_COUNT=800,HOT_SPAN=16,LAZY_FILTER_FLAG=1,LAZY_MAP_FLAG=2,LAZY_WHILE_FLAG=3,INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,MAX_INTEGER=17976931348623157e292,NAN=NaN,MAX_ARRAY_LENGTH=4294967295,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH-1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1,wrapFlags=[["ary",WRAP_ARY_FLAG],["bind",WRAP_BIND_FLAG],["bindKey",WRAP_BIND_KEY_FLAG],["curry",WRAP_CURRY_FLAG],["curryRight",WRAP_CURRY_RIGHT_FLAG],["flip",WRAP_FLIP_FLAG],["partial",WRAP_PARTIAL_FLAG],["partialRight",WRAP_PARTIAL_RIGHT_FLAG],["rearg",WRAP_REARG_FLAG]],argsTag="[object Arguments]",arrayTag="[object Array]",asyncTag="[object AsyncFunction]",boolTag="[object Boolean]",dateTag="[object Date]",domExcTag="[object DOMException]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",nullTag="[object Null]",objectTag="[object Object]",promiseTag="[object Promise]",proxyTag="[object Proxy]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",undefinedTag="[object Undefined]",weakMapTag="[object WeakMap]",weakSetTag="[object WeakSet]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g,reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g,reUnescapedHtml=/[&<>"']/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source),reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source),reTrim=/^\s+|\s+$/g,reTrimStart=/^\s+/,reTrimEnd=/\s+$/,reWrapComment=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,reWrapDetails=/\{\n\/\* \[wrapped with (.+)\] \*/,reSplitDetails=/,? & /,reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,reEscapeChar=/\\(\\)?/g,reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,reFlags=/\w*$/,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsOctal=/^0o[0-7]+$/i,reIsUint=/^(?:0|[1-9]\d*)$/,reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,reNoMatch=/($^)/,reUnescapedString=/['\n\r\u2028\u2029\\]/g,rsAstralRange="\\ud800-\\udfff",rsComboRange="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsApos="['’]",rsAstral="["+rsAstralRange+"]",rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboRange+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ="\\u200d",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",rsOptContrLower="(?:"+rsApos+"(?:d|ll|m|re|s|t|ve))?",rsOptContrUpper="(?:"+rsApos+"(?:D|LL|M|RE|S|T|VE))?",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reApos=RegExp(rsApos,"g"),reComboMark=RegExp(rsCombo,"g"),reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g"),reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+"+rsOptContrLower+"(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+"+rsOptContrUpper+"(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+"+rsOptContrLower,rsUpper+"+"+rsOptContrUpper,"\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",rsDigits,rsEmoji].join("|"),"g"),reHasUnicode=RegExp("["+rsZWJ+rsAstralRange+rsComboRange+rsVarRange+"]"),reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,contextProps=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],templateCounter=-1,typedArrayTags={},cloneableTags,asciiSize,deburrLetter,escapeHtmlChar,unescapeHtmlChar,runInContext,_;typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},freeParseFloat=parseFloat,freeParseInt=parseInt,freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}(),nodeIsArrayBuffer=nodeUtil&&nodeUtil.isArrayBuffer,nodeIsDate=nodeUtil&&nodeUtil.isDate,nodeIsMap=nodeUtil&&nodeUtil.isMap,nodeIsRegExp=nodeUtil&&nodeUtil.isRegExp,nodeIsSet=nodeUtil&&nodeUtil.isSet,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;asciiSize=baseProperty("length");deburrLetter=basePropertyOf({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"});escapeHtmlChar=basePropertyOf({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});unescapeHtmlChar=basePropertyOf({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});runInContext=function runInContext(context){function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper)return value;if(hasOwnProperty.call(value,"__wrapped__"))return wrapperClone(value)}return new LodashWrapper(value)}function baseLodash(){}function LodashWrapper(value,chainAll){this.__wrapped__=value;this.__actions__=[];this.__chain__=!!chainAll;this.__index__=0;this.__values__=undefined}function LazyWrapper(value){this.__wrapped__=value;this.__actions__=[];this.__dir__=1;this.__filtered__=!1;this.__iteratees__=[];this.__takeCount__=MAX_ARRAY_LENGTH;this.__views__=[]}function lazyClone(){var result=new LazyWrapper(this.__wrapped__);return result.__actions__=copyArray(this.__actions__),result.__dir__=this.__dir__,result.__filtered__=this.__filtered__,result.__iteratees__=copyArray(this.__iteratees__),result.__takeCount__=this.__takeCount__,result.__views__=copyArray(this.__views__),result}function lazyReverse(){if(this.__filtered__){var result=new LazyWrapper(this);result.__dir__=-1;result.__filtered__=!0}else result=this.clone(),result.__dir__*=-1;return result}function lazyValue(){var array=this.__wrapped__.value(),dir=this.__dir__,isArr=isArray(array),isRight=dir<0,arrLength=isArr?array.length:0,view=getView(0,arrLength,this.__views__),start=view.start,end=view.end,length=end-start,index=isRight?end:start-1,iteratees=this.__iteratees__,iterLength=iteratees.length,resIndex=0,takeCount=nativeMin(length,this.__takeCount__),result,iterIndex,value;if(!isArr||!isRight&&arrLength==length&&takeCount==length)return baseWrapperValue(array,this.__actions__);result=[];outer:while(length--&&resIndex<takeCount){for(index+=dir,iterIndex=-1,value=array[index];++iterIndex<iterLength;){var data=iteratees[iterIndex],iteratee=data.iteratee,type=data.type,computed=iteratee(value);if(type==LAZY_MAP_FLAG)value=computed;else if(!computed)if(type==LAZY_FILTER_FLAG)continue outer;else break outer}result[resIndex++]=value}return result}function Hash(entries){var index=-1,length=entries==null?0:entries.length,entry;for(this.clear();++index<length;)entry=entries[index],this.set(entry[0],entry[1])}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0}function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result}function hashGet(key){var data=this.__data__,result;return nativeCreate?(result=data[key],result===HASH_UNDEFINED?undefined:result):hasOwnProperty.call(data,key)?data[key]:undefined}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}function hashSet(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value,this}function ListCache(entries){var index=-1,length=entries==null?0:entries.length,entry;for(this.clear();++index<length;)entry=entries[index],this.set(entry[0],entry[1])}function listCacheClear(){this.__data__=[];this.size=0}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key),lastIndex;return index<0?!1:(lastIndex=data.length-1,index==lastIndex?data.pop():splice.call(data,index,1),--this.size,!0)}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this}function MapCache(entries){var index=-1,length=entries==null?0:entries.length,entry;for(this.clear();++index<length;)entry=entries[index],this.set(entry[0],entry[1])}function mapCacheClear(){this.size=0;this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);return this.size-=result?1:0,result}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this}function SetCache(values){var index=-1,length=values==null?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}function setCacheAdd(value){return this.__data__.set(value,HASH_UNDEFINED),this}function setCacheHas(value){return this.__data__.has(value)}function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}function stackClear(){this.__data__=new ListCache;this.size=0}function stackDelete(key){var data=this.__data__,result=data["delete"](key);return this.size=data.size,result}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}function stackSet(key,value){var data=this.__data__,pairs;if(data instanceof ListCache){if(pairs=data.__data__,!Map||pairs.length<LARGE_ARRAY_SIZE-1)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this}function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value)!(inherited||hasOwnProperty.call(value,key))||skipIndexes&&(key=="length"||isBuff&&(key=="offset"||key=="parent")||isType&&(key=="buffer"||key=="byteLength"||key=="byteOffset")||isIndex(key,length))||result.push(key);return result}function arraySample(array){var length=array.length;return length?array[baseRandom(0,length-1)]:undefined}function arraySampleSize(array,n){return shuffleSelf(copyArray(array),baseClamp(n,0,array.length))}function arrayShuffle(array){return shuffleSelf(copyArray(array))}function assignMergeValue(object,key,value){(value===undefined||eq(object[key],value))&&(value!==undefined||key in object)||baseAssignValue(object,key,value)}function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(value!==undefined||key in object)||baseAssignValue(object,key,value)}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseAggregator(collection,setter,iteratee,accumulator){return baseEach(collection,function(value,key,collection){setter(accumulator,value,iteratee(value),collection)}),accumulator}function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}function baseAssignIn(object,source){return object&&copyObject(source,keysIn(source),object)}function baseAssignValue(object,key,value){key=="__proto__"&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value:value,writable:!0}):object[key]=value}function baseAt(object,paths){for(var index=-1,length=paths.length,result=Array(length),skip=object==null;++index<length;)result[index]=skip?undefined:get(object,paths[index]);return result}function baseClamp(number,lower,upper){return number===number&&(upper!==undefined&&(number=number<=upper?number:upper),lower!==undefined&&(number=number>=lower?number:lower)),number}function baseClone(value,bitmask,customizer,key,object,stack){var result,isDeep=bitmask&CLONE_DEEP_FLAG,isFlat=bitmask&CLONE_FLAT_FLAG,isFull=bitmask&CLONE_SYMBOLS_FLAG,isArr,tag,isFunc,stacked,keysFunc,props;if(customizer&&(result=object?customizer(value,key,object,stack):customizer(value)),result!==undefined)return result;if(!isObject(value))return value;if(isArr=isArray(value),isArr){if(result=initCloneArray(value),!isDeep)return copyArray(value,result)}else{if(tag=getTag(value),isFunc=tag==funcTag||tag==genTag,isBuffer(value))return cloneBuffer(value,isDeep);if(tag==objectTag||tag==argsTag||isFunc&&!object){if(result=isFlat||isFunc?{}:initCloneObject(value),!isDeep)return isFlat?copySymbolsIn(value,baseAssignIn(result,value)):copySymbols(value,baseAssign(result,value))}else{if(!cloneableTags[tag])return object?value:{};result=initCloneByTag(value,tag,baseClone,isDeep)}}return(stack||(stack=new Stack),stacked=stack.get(value),stacked)?stacked:(stack.set(value,result),keysFunc=isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys,props=isArr?undefined:keysFunc(value),arrayEach(props||value,function(subValue,key){props&&(key=subValue,subValue=value[key]);assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack))}),result)}function baseConforms(source){var props=keys(source);return function(object){return baseConformsTo(object,source,props)}}function baseConformsTo(object,source,props){var length=props.length;if(object==null)return!length;for(object=Object(object);length--;){var key=props[length],predicate=source[key],value=object[key];if(value===undefined&&!(key in object)||!predicate(value))return!1}return!0}function baseDelay(func,wait,args){if(typeof func!="function")throw new TypeError(FUNC_ERROR_TEXT);return setTimeout(function(){func.apply(undefined,args)},wait)}function baseDifference(array,values,iteratee,comparator){var index=-1,includes=arrayIncludes,isCommon=!0,length=array.length,result=[],valuesLength=values.length,value,computed,valuesIndex;if(!length)return result;iteratee&&(values=arrayMap(values,baseUnary(iteratee)));comparator?(includes=arrayIncludesWith,isCommon=!1):values.length>=LARGE_ARRAY_SIZE&&(includes=cacheHas,isCommon=!1,values=new SetCache(values));outer:while(++index<length)if(value=array[index],computed=iteratee==null?value:iteratee(value),value=comparator||value!==0?value:0,isCommon&&computed===computed){for(valuesIndex=valuesLength;valuesIndex--;)if(values[valuesIndex]===computed)continue outer;result.push(value)}else includes(values,computed,comparator)||result.push(value);return result}function baseEvery(collection,predicate){var result=!0;return baseEach(collection,function(value,index,collection){return result=!!predicate(value,index,collection)}),result}function baseExtremum(array,iteratee,comparator){for(var index=-1,length=array.length,value,current,computed,result;++index<length;)value=array[index],current=iteratee(value),current!=null&&(computed===undefined?current===current&&!isSymbol(current):comparator(current,computed))&&(computed=current,result=value);return result}function baseFill(array,value,start,end){var length=array.length;for(start=toInteger(start),start<0&&(start=-start>length?0:length+start),end=end===undefined||end>length?length:toInteger(end),end<0&&(end+=length),end=start>end?0:toLength(end);start<end;)array[start++]=value;return array}function baseFilter(collection,predicate){var result=[];return baseEach(collection,function(value,index,collection){predicate(value,index,collection)&&result.push(value)}),result}function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length,value;for(predicate||(predicate=isFlattenable),result||(result=[]);++index<length;)value=array[index],depth>0&&predicate(value)?depth>1?baseFlatten(value,depth-1,predicate,isStrict,result):arrayPush(result,value):isStrict||(result[result.length]=value);return result}function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}function baseForOwnRight(object,iteratee){return object&&baseForRight(object,iteratee,keys)}function baseFunctions(object,props){return arrayFilter(props,function(key){return isFunction(object[key])})}function baseGet(object,path){path=castPath(path,object);for(var index=0,length=path.length;object!=null&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:undefined}function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function baseGetTag(value){return value==null?value===undefined?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}function baseGt(value,other){return value>other}function baseHas(object,key){return object!=null&&hasOwnProperty.call(object,key)}function baseHasIn(object,key){return object!=null&&key in Object(object)}function baseInRange(number,start,end){return number>=nativeMin(start,end)&&number<nativeMax(start,end)}function baseIntersection(arrays,iteratee,comparator){for(var includes=comparator?arrayIncludesWith:arrayIncludes,length=arrays[0].length,othLength=arrays.length,othIndex=othLength,caches=Array(othLength),maxLength=Infinity,result=[],array,index,seen,value,computed,cache;othIndex--;)array=arrays[othIndex],othIndex&&iteratee&&(array=arrayMap(array,baseUnary(iteratee))),maxLength=nativeMin(array.length,maxLength),caches[othIndex]=!comparator&&(iteratee||length>=120&&array.length>=120)?new SetCache(othIndex&&array):undefined;array=arrays[0];index=-1;seen=caches[0];outer:while(++index<length&&result.length<maxLength)if(value=array[index],computed=iteratee?iteratee(value):value,value=comparator||value!==0?value:0,!(seen?cacheHas(seen,computed):includes(result,computed,comparator))){for(othIndex=othLength;--othIndex;)if(cache=caches[othIndex],!(cache?cacheHas(cache,computed):includes(arrays[othIndex],computed,comparator)))continue outer;seen&&seen.push(computed);result.push(value)}return result}function baseInverter(object,setter,iteratee,accumulator){return baseForOwn(object,function(value,key,object){setter(accumulator,iteratee(value),key,object)}),accumulator}function baseInvoke(object,path,args){path=castPath(path,object);object=parent(object,path);var func=object==null?object:object[toKey(last(path))];return func==null?undefined:apply(func,object,args)}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}function baseIsArrayBuffer(value){return isObjectLike(value)&&baseGetTag(value)==arrayBufferTag}function baseIsDate(value){return isObjectLike(value)&&baseGetTag(value)==dateTag}function baseIsEqual(value,other,bitmask,customizer,stack){return value===other?!0:value==null||other==null||!isObjectLike(value)&&!isObjectLike(other)?value!==value&&other!==other:baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack)}function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other),objIsWrapped,othIsWrapped,objUnwrapped,othUnwrapped;objTag=objTag==argsTag?objectTag:objTag;othTag=othTag==argsTag?objectTag:othTag;var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0;objIsObj=!1}return isSameTag&&!objIsObj?(stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack)):!(bitmask&COMPARE_PARTIAL_FLAG)&&(objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__"),objIsWrapped||othIsWrapped)?(objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other,stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)):isSameTag?(stack||(stack=new Stack),equalObjects(object,other,bitmask,customizer,equalFunc,stack)):!1}function baseIsMap(value){return isObjectLike(value)&&getTag(value)==mapTag}function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer,data,stack,result;if(object==null)return!length;for(object=Object(object);index--;)if(data=matchData[index],noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1;while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object))return!1}else if(stack=new Stack,customizer&&(result=customizer(objValue,srcValue,key,object,source,stack)),!(result===undefined?baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG,customizer,stack):result))return!1}return!0}function baseIsNative(value){if(!isObject(value)||isMasked(value))return!1;var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function baseIsRegExp(value){return isObjectLike(value)&&baseGetTag(value)==regexpTag}function baseIsSet(value){return isObjectLike(value)&&getTag(value)==setTag}function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}function baseIteratee(value){return typeof value=="function"?value:value==null?identity:typeof value=="object"?isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value):property(value)}function baseKeys(object){var result,key;if(!isPrototype(object))return nativeKeys(object);result=[];for(key in Object(object))hasOwnProperty.call(object,key)&&key!="constructor"&&result.push(key);return result}function baseKeysIn(object){var isProto,result,key;if(!isObject(object))return nativeKeysIn(object);isProto=isPrototype(object);result=[];for(key in object)key=="constructor"&&(isProto||!hasOwnProperty.call(object,key))||result.push(key);return result}function baseLt(value,other){return value<other}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)}),result}function baseMatches(source){var matchData=getMatchData(source);return matchData.length==1&&matchData[0][2]?matchesStrictComparable(matchData[0][0],matchData[0][1]):function(object){return object===source||baseIsMatch(object,source,matchData)}}function baseMatchesProperty(path,srcValue){return isKey(path)&&isStrictComparable(srcValue)?matchesStrictComparable(toKey(path),srcValue):function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseMerge(object,source,srcIndex,customizer,stack){object!==source&&baseFor(source,function(srcValue,key){if(isObject(srcValue))stack||(stack=new Stack),baseMergeDeep(object,source,key,srcIndex,baseMerge,customizer,stack);else{var newValue=customizer?customizer(object[key],srcValue,key+"",object,source,stack):undefined;newValue===undefined&&(newValue=srcValue);assignMergeValue(object,key,newValue)}},keysIn)}function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=object[key],srcValue=source[key],stacked=stack.get(srcValue),newValue,isCommon;if(stacked){assignMergeValue(object,key,stacked);return}if(newValue=customizer?customizer(objValue,srcValue,key+"",object,source,stack):undefined,isCommon=newValue===undefined,isCommon){var isArr=isArray(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue);newValue=srcValue;isArr||isBuff||isTyped?isArray(objValue)?newValue=objValue:isArrayLikeObject(objValue)?newValue=copyArray(objValue):isBuff?(isCommon=!1,newValue=cloneBuffer(srcValue,!0)):isTyped?(isCommon=!1,newValue=cloneTypedArray(srcValue,!0)):newValue=[]:isPlainObject(srcValue)||isArguments(srcValue)?(newValue=objValue,isArguments(objValue)?newValue=toPlainObject(objValue):(!isObject(objValue)||srcIndex&&isFunction(objValue))&&(newValue=initCloneObject(srcValue))):isCommon=!1}isCommon&&(stack.set(srcValue,newValue),mergeFunc(newValue,srcValue,srcIndex,customizer,stack),stack["delete"](srcValue));assignMergeValue(object,key,newValue)}function baseNth(array,n){var length=array.length;if(length)return n+=n<0?length:0,isIndex(n,length)?array[n]:undefined}function baseOrderBy(collection,iteratees,orders){var index=-1,result;return iteratees=arrayMap(iteratees.length?iteratees:[identity],baseUnary(getIteratee())),result=baseMap(collection,function(value){var criteria=arrayMap(iteratees,function(iteratee){return iteratee(value)});return{criteria:criteria,index:++index,value:value}}),baseSortBy(result,function(object,other){return compareMultiple(object,other,orders)})}function basePick(object,paths){return basePickBy(object,paths,function(value,path){return hasIn(object,path)})}function basePickBy(object,paths,predicate){for(var index=-1,length=paths.length,result={},path,value;++index<length;)path=paths[index],value=baseGet(object,path),predicate(value,path)&&baseSet(result,castPath(path,object),value);return result}function basePropertyDeep(path){return function(object){return baseGet(object,path)}}function basePullAll(array,values,iteratee,comparator){var indexOf=comparator?baseIndexOfWith:baseIndexOf,index=-1,length=values.length,seen=array;for(array===values&&(values=copyArray(values)),iteratee&&(seen=arrayMap(array,baseUnary(iteratee)));++index<length;)for(var fromIndex=0,value=values[index],computed=iteratee?iteratee(value):value;(fromIndex=indexOf(seen,computed,fromIndex,comparator))>-1;)seen!==array&&splice.call(seen,fromIndex,1),splice.call(array,fromIndex,1);return array}function basePullAt(array,indexes){for(var length=array?indexes.length:0,lastIndex=length-1,index,previous;length--;)index=indexes[length],(length==lastIndex||index!==previous)&&(previous=index,isIndex(index)?splice.call(array,index,1):baseUnset(array,index));return array}function baseRandom(lower,upper){return lower+nativeFloor(nativeRandom()*(upper-lower+1))}function baseRange(start,end,step,fromRight){for(var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result=Array(length);length--;)result[fromRight?length:++index]=start,start+=step;return result}function baseRepeat(string,n){var result="";if(!string||n<1||n>MAX_SAFE_INTEGER)return result;do n%2&&(result+=string),n=nativeFloor(n/2),n&&(string+=string);while(n);return result}function baseRest(func,start){return setToString(overRest(func,start,identity),func+"")}function baseSample(collection){return arraySample(values(collection))}function baseSampleSize(collection,n){var array=values(collection);return shuffleSelf(array,baseClamp(n,0,array.length))}function baseSet(object,path,value,customizer){var key,newValue,objValue;if(!isObject(object))return object;path=castPath(path,object);for(var index=-1,length=path.length,lastIndex=length-1,nested=object;nested!=null&&++index<length;)key=toKey(path[index]),newValue=value,index!=lastIndex&&(objValue=nested[key],newValue=customizer?customizer(objValue,key,nested):undefined,newValue===undefined&&(newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{})),assignValue(nested,key,newValue),nested=nested[key];return object}function baseShuffle(collection){return shuffleSelf(values(collection))}function baseSlice(array,start,end){var index=-1,length=array.length,result;for(start<0&&(start=-start>length?0:length+start),end=end>length?length:end,end<0&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0,result=Array(length);++index<length;)result[index]=array[index+start];return result}function baseSome(collection,predicate){var result;return baseEach(collection,function(value,index,collection){return result=predicate(value,index,collection),!result}),!!result}function baseSortedIndex(array,value,retHighest){var low=0,high=array==null?low:array.length,mid,computed;if(typeof value=="number"&&value===value&&high<=HALF_MAX_ARRAY_LENGTH){while(low<high)mid=low+high>>>1,computed=array[mid],computed!==null&&!isSymbol(computed)&&(retHighest?computed<=value:computed<value)?low=mid+1:high=mid;return high}return baseSortedIndexBy(array,value,identity,retHighest)}function baseSortedIndexBy(array,value,iteratee,retHighest){var setLow;value=iteratee(value);for(var low=0,high=array==null?0:array.length,valIsNaN=value!==value,valIsNull=value===null,valIsSymbol=isSymbol(value),valIsUndefined=value===undefined;low<high;){var mid=nativeFloor((low+high)/2),computed=iteratee(array[mid]),othIsDefined=computed!==undefined,othIsNull=computed===null,othIsReflexive=computed===computed,othIsSymbol=isSymbol(computed);setLow=valIsNaN?retHighest||othIsReflexive:valIsUndefined?othIsReflexive&&(retHighest||othIsDefined):valIsNull?othIsReflexive&&othIsDefined&&(retHighest||!othIsNull):valIsSymbol?othIsReflexive&&othIsDefined&&!othIsNull&&(retHighest||!othIsSymbol):othIsNull||othIsSymbol?!1:retHighest?computed<=value:computed<value;setLow?low=mid+1:high=mid}return nativeMin(high,MAX_ARRAY_INDEX)}function baseSortedUniq(array,iteratee){for(var index=-1,length=array.length,resIndex=0,result=[],value,computed,seen;++index<length;)value=array[index],computed=iteratee?iteratee(value):value,index&&eq(computed,seen)||(seen=computed,result[resIndex++]=value===0?0:value);return result}function baseToNumber(value){return typeof value=="number"?value:isSymbol(value)?NAN:+value}function baseToString(value){if(typeof value=="string")return value;if(isArray(value))return arrayMap(value,baseToString)+"";if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}function baseUniq(array,iteratee,comparator){var index=-1,includes=arrayIncludes,length=array.length,isCommon=!0,result=[],seen=result,set,value,computed,seenIndex;if(comparator)isCommon=!1,includes=arrayIncludesWith;else if(length>=LARGE_ARRAY_SIZE){if(set=iteratee?null:createSet(array),set)return setToArray(set);isCommon=!1;includes=cacheHas;seen=new SetCache}else seen=iteratee?[]:result;outer:while(++index<length)if(value=array[index],computed=iteratee?iteratee(value):value,value=comparator||value!==0?value:0,isCommon&&computed===computed){for(seenIndex=seen.length;seenIndex--;)if(seen[seenIndex]===computed)continue outer;iteratee&&seen.push(computed);result.push(value)}else includes(seen,computed,comparator)||(seen!==result&&seen.push(computed),result.push(value));return result}function baseUnset(object,path){return path=castPath(path,object),object=parent(object,path),object==null||delete object[toKey(last(path))]}function baseUpdate(object,path,updater,customizer){return baseSet(object,path,updater(baseGet(object,path)),customizer)}function baseWhile(array,predicate,isDrop,fromRight){for(var length=array.length,index=fromRight?length:-1;(fromRight?index--:++index<length)&&predicate(array[index],index,array););return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index)}function baseWrapperValue(value,actions){var result=value;return result instanceof LazyWrapper&&(result=result.value()),arrayReduce(actions,function(result,action){return action.func.apply(action.thisArg,arrayPush([result],action.args))},result)}function baseXor(arrays,iteratee,comparator){var length=arrays.length,index,result,array,othIndex;if(length<2)return length?baseUniq(arrays[0]):[];for(index=-1,result=Array(length);++index<length;)for(array=arrays[index],othIndex=-1;++othIndex<length;)othIndex!=index&&(result[index]=baseDifference(result[index]||array,arrays[othIndex],iteratee,comparator));return baseUniq(baseFlatten(result,1),iteratee,comparator)}function baseZipObject(props,values,assignFunc){for(var index=-1,length=props.length,valsLength=values.length,result={},value;++index<length;)value=index<valsLength?values[index]:undefined,assignFunc(result,props[index],value);return result}function castArrayLikeObject(value){return isArrayLikeObject(value)?value:[]}function castFunction(value){return typeof value=="function"?value:identity}function castPath(value,object){return isArray(value)?value:isKey(value,object)?[value]:stringToPath(toString(value))}function castSlice(array,start,end){var length=array.length;return end=end===undefined?length:end,!start&&end>=length?array:baseSlice(array,start,end)}function cloneBuffer(buffer,isDeep){if(isDeep)return buffer.slice();var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);return buffer.copy(result),result}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array(result).set(new Uint8Array(arrayBuffer)),result}function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}function cloneMap(map,isDeep,cloneFunc){var array=isDeep?cloneFunc(mapToArray(map),CLONE_DEEP_FLAG):mapToArray(map);return arrayReduce(array,addMapEntry,new map.constructor)}function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));return result.lastIndex=regexp.lastIndex,result}function cloneSet(set,isDeep,cloneFunc){var array=isDeep?cloneFunc(setToArray(set),CLONE_DEEP_FLAG):setToArray(set);return arrayReduce(array,addSetEntry,new set.constructor)}function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}function compareAscending(value,other){if(value!==other){var valIsDefined=value!==undefined,valIsNull=value===null,valIsReflexive=value===value,valIsSymbol=isSymbol(value),othIsDefined=other!==undefined,othIsNull=other===null,othIsReflexive=other===other,othIsSymbol=isSymbol(other);if(!othIsNull&&!othIsSymbol&&!valIsSymbol&&value>other||valIsSymbol&&othIsDefined&&othIsReflexive&&!othIsNull&&!othIsSymbol||valIsNull&&othIsDefined&&othIsReflexive||!valIsDefined&&othIsReflexive||!valIsReflexive)return 1;if(!valIsNull&&!valIsSymbol&&!othIsSymbol&&value<other||othIsSymbol&&valIsDefined&&valIsReflexive&&!valIsNull&&!valIsSymbol||othIsNull&&valIsDefined&&valIsReflexive||!othIsDefined&&valIsReflexive||!othIsReflexive)return-1}return 0}function compareMultiple(object,other,orders){for(var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length,result,order;++index<length;)if(result=compareAscending(objCriteria[index],othCriteria[index]),result)return index>=ordersLength?result:(order=orders[index],result*(order=="desc"?-1:1));return object.index-other.index}function composeArgs(args,partials,holders,isCurried){for(var argsIndex=-1,argsLength=args.length,holdersLength=holders.length,leftIndex=-1,leftLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(leftLength+rangeLength),isUncurried=!isCurried;++leftIndex<leftLength;)result[leftIndex]=partials[leftIndex];while(++argsIndex<holdersLength)(isUncurried||argsIndex<argsLength)&&(result[holders[argsIndex]]=args[argsIndex]);while(rangeLength--)result[leftIndex++]=args[argsIndex++];return result}function composeArgsRight(args,partials,holders,isCurried){for(var argsIndex=-1,argsLength=args.length,holdersIndex=-1,holdersLength=holders.length,rightIndex=-1,rightLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(rangeLength+rightLength),isUncurried=!isCurried,offset;++argsIndex<rangeLength;)result[argsIndex]=args[argsIndex];for(offset=argsIndex;++rightIndex<rightLength;)result[offset+rightIndex]=partials[rightIndex];while(++holdersIndex<holdersLength)(isUncurried||argsIndex<argsLength)&&(result[offset+holders[holdersIndex]]=args[argsIndex++]);return result}function copyArray(source,array){var index=-1,length=source.length;for(array||(array=Array(length));++index<length;)array[index]=source[index];return array}function copyObject(source,props,object,customizer){var isNew=!object,index,length,key,newValue;for(object||(object={}),index=-1,length=props.length;++index<length;)key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):undefined,newValue===undefined&&(newValue=source[key]),isNew?baseAssignValue(object,key,newValue):assignValue(object,key,newValue);return object}function copySymbols(source,object){return copyObject(source,getSymbols(source),object)}function copySymbolsIn(source,object){return copyObject(source,getSymbolsIn(source),object)}function createAggregator(setter,initializer){return function(collection,iteratee){var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};return func(collection,setter,getIteratee(iteratee,2),accumulator)}}function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined,guard=length>2?sources[2]:undefined,source;for(customizer=assigner.length>3&&typeof customizer=="function"?(length--,customizer):undefined,guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=length<3?undefined:customizer,length=1),object=Object(object);++index<length;)source=sources[index],source&&assigner(object,source,index,customizer);return object})}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(collection==null)return collection;if(!isArrayLike(collection))return eachFunc(collection,iteratee);for(var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);fromRight?index--:++index<length;)if(iteratee(iterable[index],index,iterable)===!1)break;return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length,key;length--;)if(key=props[fromRight?length:++index],iteratee(iterable[key],key,iterable)===!1)break;return object}}function createBind(func,bitmask,thisArg){function wrapper(){var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(isBind?thisArg:this,arguments)}var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);return wrapper}function createCaseFirst(methodName){return function(string){string=toString(string);var strSymbols=hasUnicode(string)?stringToArray(string):undefined,chr=strSymbols?strSymbols[0]:string.charAt(0),trailing=strSymbols?castSlice(strSymbols,1).join(""):string.slice(1);return chr[methodName]()+trailing}}function createCompounder(callback){return function(string){return arrayReduce(words(deburr(string).replace(reApos,"")),callback,"")}}function createCtor(Ctor){return function(){var args=arguments,thisBinding,result;switch(args.length){case 0:return new Ctor;case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6])}return thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args),isObject(result)?result:thisBinding}}function createCurry(func,bitmask,arity){function wrapper(){for(var length=arguments.length,args=Array(length),index=length,placeholder=getHolder(wrapper),holders,fn;index--;)args[index]=arguments[index];return(holders=length<3&&args[0]!==placeholder&&args[length-1]!==placeholder?[]:replaceHolders(args,placeholder),length-=holders.length,length<arity)?createRecurry(func,bitmask,createHybrid,wrapper.placeholder,undefined,args,holders,undefined,undefined,arity-length):(fn=this&&this!==root&&this instanceof wrapper?Ctor:func,apply(fn,this,args))}var Ctor=createCtor(func);return wrapper}function createFind(findIndexFunc){return function(collection,predicate,fromIndex){var iterable=Object(collection),iteratee,index;return isArrayLike(collection)||(iteratee=getIteratee(predicate,3),collection=keys(collection),predicate=function(key){return iteratee(iterable[key],key,iterable)}),index=findIndexFunc(collection,predicate,fromIndex),index>-1?iterable[iteratee?collection[index]:index]:undefined}}function createFlow(fromRight){return flatRest(function(funcs){var length=funcs.length,index=length,prereq=LodashWrapper.prototype.thru,func,wrapper,funcName,data;for(fromRight&&funcs.reverse();index--;){if(func=funcs[index],typeof func!="function")throw new TypeError(FUNC_ERROR_TEXT);prereq&&!wrapper&&getFuncName(func)=="wrapper"&&(wrapper=new LodashWrapper([],!0))}for(index=wrapper?index:length;++index<length;)func=funcs[index],funcName=getFuncName(func),data=funcName=="wrapper"?getData(func):undefined,wrapper=data&&isLaziable(data[0])&&data[1]==(WRAP_ARY_FLAG|WRAP_CURRY_FLAG|WRAP_PARTIAL_FLAG|WRAP_REARG_FLAG)&&!data[4].length&&data[9]==1?wrapper[getFuncName(data[0])].apply(wrapper,data[3]):func.length==1&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func);return function(){var args=arguments,value=args[0],index,result;if(wrapper&&args.length==1&&isArray(value))return wrapper.plant(value).value();for(index=0,result=length?funcs[index].apply(this,args):value;++index<length;)result=funcs[index].call(this,result);return result}})}function createHybrid(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){function wrapper(){for(var length=arguments.length,args=Array(length),index=length,placeholder,holdersCount,newHolders,thisBinding,fn;index--;)args[index]=arguments[index];return(isCurried&&(placeholder=getHolder(wrapper),holdersCount=countHolders(args,placeholder)),partials&&(args=composeArgs(args,partials,holders,isCurried)),partialsRight&&(args=composeArgsRight(args,partialsRight,holdersRight,isCurried)),length-=holdersCount,isCurried&&length<arity)?(newHolders=replaceHolders(args,placeholder),createRecurry(func,bitmask,createHybrid,wrapper.placeholder,thisArg,args,newHolders,argPos,ary,arity-length)):(thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func,length=args.length,argPos?args=reorder(args,argPos):isFlip&&length>1&&args.reverse(),isAry&&ary<length&&(args.length=ary),this&&this!==root&&this instanceof wrapper&&(fn=Ctor||createCtor(fn)),fn.apply(thisBinding,args))}var isAry=bitmask&WRAP_ARY_FLAG,isBind=bitmask&WRAP_BIND_FLAG,isBindKey=bitmask&WRAP_BIND_KEY_FLAG,isCurried=bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG),isFlip=bitmask&WRAP_FLIP_FLAG,Ctor=isBindKey?undefined:createCtor(func);return wrapper}function createInverter(setter,toIteratee){return function(object,iteratee){return baseInverter(object,setter,toIteratee(iteratee),{})}}function createMathOperation(operator,defaultValue){return function(value,other){var result;if(value===undefined&&other===undefined)return defaultValue;if(value!==undefined&&(result=value),other!==undefined){if(result===undefined)return other;typeof value=="string"||typeof other=="string"?(value=baseToString(value),other=baseToString(other)):(value=baseToNumber(value),other=baseToNumber(other));result=operator(value,other)}return result}}function createOver(arrayFunc){return flatRest(function(iteratees){return iteratees=arrayMap(iteratees,baseUnary(getIteratee())),baseRest(function(args){var thisArg=this;return arrayFunc(iteratees,function(iteratee){return apply(iteratee,thisArg,args)})})})}function createPadding(length,chars){var charsLength,result;return(chars=chars===undefined?" ":baseToString(chars),charsLength=chars.length,charsLength<2)?charsLength?baseRepeat(chars,length):chars:(result=baseRepeat(chars,nativeCeil(length/stringSize(chars))),hasUnicode(chars)?castSlice(stringToArray(result),0,length).join(""):result.slice(0,length))}function createPartial(func,bitmask,thisArg,partials){function wrapper(){for(var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength),fn=this&&this!==root&&this instanceof wrapper?Ctor:func;++leftIndex<leftLength;)args[leftIndex]=partials[leftIndex];while(argsLength--)args[leftIndex++]=arguments[++argsIndex];return apply(fn,isBind?thisArg:this,args)}var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);return wrapper}function createRange(fromRight){return function(start,end,step){return step&&typeof step!="number"&&isIterateeCall(start,end,step)&&(end=step=undefined),start=toFinite(start),end===undefined?(end=start,start=0):end=toFinite(end),step=step===undefined?start<end?1:-1:toFinite(step),baseRange(start,end,step,fromRight)}}function createRelationalOperation(operator){return function(value,other){return typeof value=="string"&&typeof other=="string"||(value=toNumber(value),other=toNumber(other)),operator(value,other)}}function createRecurry(func,bitmask,wrapFunc,placeholder,thisArg,partials,holders,argPos,ary,arity){var isCurry=bitmask&WRAP_CURRY_FLAG,newHolders=isCurry?holders:undefined,newHoldersRight=isCurry?undefined:holders,newPartials=isCurry?partials:undefined,newPartialsRight=isCurry?undefined:partials,newData,result;return bitmask|=isCurry?WRAP_PARTIAL_FLAG:WRAP_PARTIAL_RIGHT_FLAG,bitmask&=~(isCurry?WRAP_PARTIAL_RIGHT_FLAG:WRAP_PARTIAL_FLAG),bitmask&WRAP_CURRY_BOUND_FLAG||(bitmask&=~(WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG)),newData=[func,bitmask,thisArg,newPartials,newHolders,newPartialsRight,newHoldersRight,argPos,ary,arity],result=wrapFunc.apply(undefined,newData),isLaziable(func)&&setData(result,newData),result.placeholder=placeholder,setWrapToString(result,func,bitmask)}function createRound(methodName){var func=Math[methodName];return function(number,precision){if(number=toNumber(number),precision=precision==null?0:nativeMin(toInteger(precision),292),precision){var pair=(toString(number)+"e").split("e"),value=func(pair[0]+"e"+(+pair[1]+precision));return pair=(toString(value)+"e").split("e"),+(pair[0]+"e"+(+pair[1]-precision))}return func(number)}}function createToPairs(keysFunc){return function(object){var tag=getTag(object);return tag==mapTag?mapToArray(object):tag==setTag?setToPairs(object):baseToPairs(object,keysFunc(object))}}function createWrap(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask&WRAP_BIND_KEY_FLAG,length,partialsRight,holdersRight,data,newData,result,setter;if(!isBindKey&&typeof func!="function")throw new TypeError(FUNC_ERROR_TEXT);return length=partials?partials.length:0,length||(bitmask&=~(WRAP_PARTIAL_FLAG|WRAP_PARTIAL_RIGHT_FLAG),partials=holders=undefined),ary=ary===undefined?ary:nativeMax(toInteger(ary),0),arity=arity===undefined?arity:toInteger(arity),length-=holders?holders.length:0,bitmask&WRAP_PARTIAL_RIGHT_FLAG&&(partialsRight=partials,holdersRight=holders,partials=holders=undefined),data=isBindKey?undefined:getData(func),newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity],data&&mergeData(newData,data),func=newData[0],bitmask=newData[1],thisArg=newData[2],partials=newData[3],holders=newData[4],arity=newData[9]=newData[9]===undefined?isBindKey?0:func.length:nativeMax(newData[9]-length,0),!arity&&bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG)&&(bitmask&=~(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG)),result=bitmask&&bitmask!=WRAP_BIND_FLAG?bitmask==WRAP_CURRY_FLAG||bitmask==WRAP_CURRY_RIGHT_FLAG?createCurry(func,bitmask,arity):bitmask!=WRAP_PARTIAL_FLAG&&bitmask!=(WRAP_BIND_FLAG|WRAP_PARTIAL_FLAG)||holders.length?createHybrid.apply(undefined,newData):createPartial(func,bitmask,thisArg,partials):createBind(func,bitmask,thisArg),setter=data?baseSetData:setData,setWrapToString(setter(result,newData),func,bitmask)}function customDefaultsAssignIn(objValue,srcValue,key,object){return objValue===undefined||eq(objValue,objectProto[key])&&!hasOwnProperty.call(object,key)?srcValue:objValue}function customDefaultsMerge(objValue,srcValue,key,object,source,stack){return isObject(objValue)&&isObject(srcValue)&&(stack.set(srcValue,objValue),baseMerge(objValue,srcValue,undefined,customDefaultsMerge,stack),stack["delete"](srcValue)),objValue}function customOmitClone(value){return isPlainObject(value)?undefined:value}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length,stacked,arrValue,othValue,compared;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;if(stacked=stack.get(array),stacked&&stack.get(other))return stacked==other;var index=-1,result=!0,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:undefined;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){if(arrValue=array[index],othValue=other[index],customizer&&(compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack)),compared!==undefined){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex)})){result=!1;break}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=!1;break}}return stack["delete"](array),stack["delete"](other),result}function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){var convert,isPartial,stacked,result;switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer;other=other.buffer;case arrayBufferTag:return object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other))?!1:!0;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:convert=mapToArray;case setTag:return(isPartial=bitmask&COMPARE_PARTIAL_FLAG,convert||(convert=setToArray),object.size!=other.size&&!isPartial)?!1:(stacked=stack.get(object),stacked)?stacked==other:(bitmask|=COMPARE_UNORDERED_FLAG,stack.set(object,other),result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack),stack["delete"](object),result);case symbolTag:if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length,index,key,stacked,result,skipCtor,objValue,othValue,compared,objCtor,othCtor;if(objLength!=othLength&&!isPartial)return!1;for(index=objLength;index--;)if(key=objProps[index],!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1;if(stacked=stack.get(object),stacked&&stack.get(other))return stacked==other;for(result=!0,stack.set(object,other),stack.set(other,object),skipCtor=isPartial;++index<objLength;){if(key=objProps[index],objValue=object[key],othValue=other[key],customizer&&(compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack)),!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor=key=="constructor")}return result&&!skipCtor&&(objCtor=object.constructor,othCtor=other.constructor,objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor)&&(result=!1)),stack["delete"](object),stack["delete"](other),result}function flatRest(func){return setToString(overRest(func,undefined,flatten),func+"")}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn)}function getFuncName(func){for(var result=func.name+"",array=realNames[result],length=hasOwnProperty.call(realNames,result)?array.length:0,data,otherFunc;length--;)if(data=array[length],otherFunc=data.func,otherFunc==null||otherFunc==func)return data.name;return result}function getHolder(func){var object=hasOwnProperty.call(lodash,"placeholder")?lodash:func;return object.placeholder}function getIteratee(){var result=lodash.iteratee||iteratee;return result=result===iteratee?baseIteratee:result,arguments.length?result(arguments[0],arguments[1]):result}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}function getMatchData(object){for(var result=keys(object),length=result.length,key,value;length--;)key=result[length],value=object[key],result[length]=[key,value,isStrictComparable(value)];return result}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag],unmasked,result;try{value[symToStringTag]=undefined;unmasked=!0}catch(e){}return result=nativeObjectToString.call(value),unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}function getView(start,end,transforms){for(var index=-1,length=transforms.length,data,size;++index<length;){data=transforms[index];size=data.size;switch(data.type){case"drop":start+=size;break;case"dropRight":end-=size;break;case"take":end=nativeMin(end,start+size);break;case"takeRight":start=nativeMax(start,end-size)}}return{start:start,end:end}}function getWrapDetails(source){var match=source.match(reWrapDetails);return match?match[1].split(reSplitDetails):[]}function hasPath(object,path,hasFunc){var key;path=castPath(path,object);for(var index=-1,length=path.length,result=!1;++index<length;){if(key=toKey(path[index]),!(result=object!=null&&hasFunc(object,key)))break;object=object[key]}return result||++index!=length?result:(length=object==null?0:object.length,!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object)))}function initCloneArray(array){var length=array.length,result=array.constructor(length);return length&&typeof array[0]=="string"&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input),result}function initCloneObject(object){return typeof object.constructor=="function"&&!isPrototype(object)?baseCreate(getPrototype(object)):{}}function initCloneByTag(object,tag,cloneFunc,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return cloneDataView(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return cloneMap(object,isDeep,cloneFunc);case numberTag:case stringTag:return new Ctor(object);case regexpTag:return cloneRegExp(object);case setTag:return cloneSet(object,isDeep,cloneFunc);case symbolTag:return cloneSymbol(object)}}function insertWrapDetails(source,details){var length=details.length,lastIndex;return length?(lastIndex=length-1,details[lastIndex]=(length>1?"& ":"")+details[lastIndex],details=details.join(length>2?", ":" "),source.replace(reWrapComment,"{\n/* [wrapped with "+details+"] */\n")):source}function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}function isIndex(value,length){return length=length==null?MAX_SAFE_INTEGER:length,!!length&&(typeof value=="number"||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isIterateeCall(value,index,object){if(!isObject(object))return!1;var type=typeof index;return(type=="number"?isArrayLike(object)&&isIndex(index,object.length):type=="string"&&index in object)?eq(object[index],value):!1}function isKey(value,object){if(isArray(value))return!1;var type=typeof value;return type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value)?!0:reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object)}function isKeyable(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}function isLaziable(func){var funcName=getFuncName(func),other=lodash[funcName],data;return typeof other!="function"||!(funcName in LazyWrapper.prototype)?!1:func===other?!0:(data=getData(other),!!data&&func===data[0])}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto;return value===proto}function isStrictComparable(value){return value===value&&!isObject(value)}function matchesStrictComparable(key,srcValue){return function(object){return object==null?!1:object[key]===srcValue&&(srcValue!==undefined||key in Object(object))}}function memoizeCapped(func){var result=memoize(func,function(key){return cache.size===MAX_MEMOIZE_SIZE&&cache.clear(),key}),cache=result.cache;return result}function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=newBitmask<(WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG|WRAP_ARY_FLAG),isCombo=srcBitmask==WRAP_ARY_FLAG&&bitmask==WRAP_CURRY_FLAG||srcBitmask==WRAP_ARY_FLAG&&bitmask==WRAP_REARG_FLAG&&data[7].length<=source[8]||srcBitmask==(WRAP_ARY_FLAG|WRAP_REARG_FLAG)&&source[7].length<=source[8]&&bitmask==WRAP_CURRY_FLAG,value,partials;return(isCommon||isCombo)?(srcBitmask&WRAP_BIND_FLAG&&(data[2]=source[2],newBitmask|=bitmask&WRAP_BIND_FLAG?0:WRAP_CURRY_BOUND_FLAG),value=source[3],value&&(partials=data[3],data[3]=partials?composeArgs(partials,value,source[4]):value,data[4]=partials?replaceHolders(data[3],PLACEHOLDER):source[4]),value=source[5],value&&(partials=data[5],data[5]=partials?composeArgsRight(partials,value,source[6]):value,data[6]=partials?replaceHolders(data[5],PLACEHOLDER):source[6]),value=source[7],value&&(data[7]=value),srcBitmask&WRAP_ARY_FLAG&&(data[8]=data[8]==null?source[8]:nativeMin(data[8],source[8])),data[9]==null&&(data[9]=source[9]),data[0]=source[0],data[1]=newBitmask,data):data}function nativeKeysIn(object){var result=[],key;if(object!=null)for(key in Object(object))result.push(key);return result}function objectToString(value){return nativeObjectToString.call(value)}function overRest(func,start,transform){return start=nativeMax(start===undefined?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length),otherArgs;++index<length;)array[index]=args[start+index];for(index=-1,otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform(array),apply(func,this,otherArgs)}}function parent(object,path){return path.length<2?object:baseGet(object,baseSlice(path,0,-1))}function reorder(array,indexes){for(var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=copyArray(array),index;length--;)index=indexes[length],array[length]=isIndex(index,arrLength)?oldArray[index]:undefined;return array}function setWrapToString(wrapper,reference,bitmask){var source=reference+"";return setToString(wrapper,insertWrapDetails(source,updateWrapDetails(getWrapDetails(source),bitmask)))}function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);if(lastCalled=stamp,remaining>0){if(++count>=HOT_COUNT)return arguments[0]}else count=0;return func.apply(undefined,arguments)}}function shuffleSelf(array,size){var index=-1,length=array.length,lastIndex=length-1,rand,value;for(size=size===undefined?length:size;++index<size;)rand=baseRandom(index,lastIndex),value=array[rand],array[rand]=array[index],array[index]=value;return array.length=size,array}function toKey(value){if(typeof value=="string"||isSymbol(value))return value;var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function updateWrapDetails(details,bitmask){return arrayEach(wrapFlags,function(pair){var value="_."+pair[0];bitmask&pair[1]&&!arrayIncludes(details,value)&&details.push(value)}),details.sort()}function wrapperClone(wrapper){if(wrapper instanceof LazyWrapper)return wrapper.clone();var result=new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__);return result.__actions__=copyArray(wrapper.__actions__),result.__index__=wrapper.__index__,result.__values__=wrapper.__values__,result}function chunk(array,size,guard){var length;if(size=(guard?isIterateeCall(array,size,guard):size===undefined)?1:nativeMax(toInteger(size),0),length=array==null?0:array.length,!length||size<1)return[];for(var index=0,resIndex=0,result=Array(nativeCeil(length/size));index<length;)result[resIndex++]=baseSlice(array,index,index+=size);return result}function compact(array){for(var index=-1,length=array==null?0:array.length,resIndex=0,result=[],value;++index<length;)value=array[index],value&&(result[resIndex++]=value);return result}function concat(){var length=arguments.length;if(!length)return[];for(var args=Array(length-1),array=arguments[0],index=length;index--;)args[index-1]=arguments[index];return arrayPush(isArray(array)?copyArray(array):[array],baseFlatten(args,1))}function drop(array,n,guard){var length=array==null?0:array.length;return length?(n=guard||n===undefined?1:toInteger(n),baseSlice(array,n<0?0:n,length)):[]}function dropRight(array,n,guard){var length=array==null?0:array.length;return length?(n=guard||n===undefined?1:toInteger(n),n=length-n,baseSlice(array,0,n<0?0:n)):[]}function dropRightWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!0,!0):[]}function dropWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!0):[]}function fill(array,value,start,end){var length=array==null?0:array.length;return length?(start&&typeof start!="number"&&isIterateeCall(array,value,start)&&(start=0,end=length),baseFill(array,value,start,end)):[]}function findIndex(array,predicate,fromIndex){var length=array==null?0:array.length,index;return length?(index=fromIndex==null?0:toInteger(fromIndex),index<0&&(index=nativeMax(length+index,0)),baseFindIndex(array,getIteratee(predicate,3),index)):-1}function findLastIndex(array,predicate,fromIndex){var length=array==null?0:array.length,index;return length?(index=length-1,fromIndex!==undefined&&(index=toInteger(fromIndex),index=fromIndex<0?nativeMax(length+index,0):nativeMin(index,length-1)),baseFindIndex(array,getIteratee(predicate,3),index,!0)):-1}function flatten(array){var length=array==null?0:array.length;return length?baseFlatten(array,1):[]}function flattenDeep(array){var length=array==null?0:array.length;return length?baseFlatten(array,INFINITY):[]}function flattenDepth(array,depth){var length=array==null?0:array.length;return length?(depth=depth===undefined?1:toInteger(depth),baseFlatten(array,depth)):[]}function fromPairs(pairs){for(var index=-1,length=pairs==null?0:pairs.length,result={},pair;++index<length;)pair=pairs[index],result[pair[0]]=pair[1];return result}function head(array){return array&&array.length?array[0]:undefined}function indexOf(array,value,fromIndex){var length=array==null?0:array.length,index;return length?(index=fromIndex==null?0:toInteger(fromIndex),index<0&&(index=nativeMax(length+index,0)),baseIndexOf(array,value,index)):-1}function initial(array){var length=array==null?0:array.length;return length?baseSlice(array,0,-1):[]}function join(array,separator){return array==null?"":nativeJoin.call(array,separator)}function last(array){var length=array==null?0:array.length;return length?array[length-1]:undefined}function lastIndexOf(array,value,fromIndex){var length=array==null?0:array.length,index;return length?(index=length,fromIndex!==undefined&&(index=toInteger(fromIndex),index=index<0?nativeMax(length+index,0):nativeMin(index,length-1)),value===value?strictLastIndexOf(array,value,index):baseFindIndex(array,baseIsNaN,index,!0)):-1}function nth(array,n){return array&&array.length?baseNth(array,toInteger(n)):undefined}function pullAll(array,values){return array&&array.length&&values&&values.length?basePullAll(array,values):array}function pullAllBy(array,values,iteratee){return array&&array.length&&values&&values.length?basePullAll(array,values,getIteratee(iteratee,2)):array}function pullAllWith(array,values,comparator){return array&&array.length&&values&&values.length?basePullAll(array,values,undefined,comparator):array}function remove(array,predicate){var result=[],value;if(!(array&&array.length))return result;var index=-1,indexes=[],length=array.length;for(predicate=getIteratee(predicate,3);++index<length;)value=array[index],predicate(value,index,array)&&(result.push(value),indexes.push(index));return basePullAt(array,indexes),result}function reverse(array){return array==null?array:nativeReverse.call(array)}function slice(array,start,end){var length=array==null?0:array.length;return length?(end&&typeof end!="number"&&isIterateeCall(array,start,end)?(start=0,end=length):(start=start==null?0:toInteger(start),end=end===undefined?length:toInteger(end)),baseSlice(array,start,end)):[]}function sortedIndex(array,value){return baseSortedIndex(array,value)}function sortedIndexBy(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2))}function sortedIndexOf(array,value){var length=array==null?0:array.length,index;return length&&(index=baseSortedIndex(array,value),index<length&&eq(array[index],value))?index:-1}function sortedLastIndex(array,value){return baseSortedIndex(array,value,!0)}function sortedLastIndexBy(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2),!0)}function sortedLastIndexOf(array,value){var length=array==null?0:array.length,index;return length&&(index=baseSortedIndex(array,value,!0)-1,eq(array[index],value))?index:-1}function sortedUniq(array){return array&&array.length?baseSortedUniq(array):[]}function sortedUniqBy(array,iteratee){return array&&array.length?baseSortedUniq(array,getIteratee(iteratee,2)):[]}function tail(array){var length=array==null?0:array.length;return length?baseSlice(array,1,length):[]}function take(array,n,guard){return(array&&array.length)?(n=guard||n===undefined?1:toInteger(n),baseSlice(array,0,n<0?0:n)):[]}function takeRight(array,n,guard){var length=array==null?0:array.length;return length?(n=guard||n===undefined?1:toInteger(n),n=length-n,baseSlice(array,n<0?0:n,length)):[]}function takeRightWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!1,!0):[]}function takeWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3)):[]}function uniq(array){return array&&array.length?baseUniq(array):[]}function uniqBy(array,iteratee){return array&&array.length?baseUniq(array,getIteratee(iteratee,2)):[]}function uniqWith(array,comparator){return comparator=typeof comparator=="function"?comparator:undefined,array&&array.length?baseUniq(array,undefined,comparator):[]}function unzip(array){if(!(array&&array.length))return[];var length=0;return array=arrayFilter(array,function(group){if(isArrayLikeObject(group))return length=nativeMax(group.length,length),!0}),baseTimes(length,function(index){return arrayMap(array,baseProperty(index))})}function unzipWith(array,iteratee){if(!(array&&array.length))return[];var result=unzip(array);return iteratee==null?result:arrayMap(result,function(group){return apply(iteratee,undefined,group)})}function zipObject(props,values){return baseZipObject(props||[],values||[],assignValue)}function zipObjectDeep(props,values){return baseZipObject(props||[],values||[],baseSet)}function chain(value){var result=lodash(value);return result.__chain__=!0,result}function tap(value,interceptor){return interceptor(value),value}function thru(value,interceptor){return interceptor(value)}function wrapperChain(){return chain(this)}function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__)}function wrapperNext(){this.__values__===undefined&&(this.__values__=toArray(this.value()));var done=this.__index__>=this.__values__.length,value=done?undefined:this.__values__[this.__index__++];return{done:done,value:value}}function wrapperToIterator(){return this}function wrapperPlant(value){for(var result,parent=this,clone,previous;parent instanceof baseLodash;)clone=wrapperClone(parent),clone.__index__=0,clone.__values__=undefined,result?previous.__wrapped__=clone:result=clone,previous=clone,parent=parent.__wrapped__;return previous.__wrapped__=value,result}function wrapperReverse(){var value=this.__wrapped__,wrapped;return value instanceof LazyWrapper?(wrapped=value,this.__actions__.length&&(wrapped=new LazyWrapper(this)),wrapped=wrapped.reverse(),wrapped.__actions__.push({func:thru,args:[reverse],thisArg:undefined}),new LodashWrapper(wrapped,this.__chain__)):this.thru(reverse)}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__)}function every(collection,predicate,guard){var func=isArray(collection)?arrayEvery:baseEvery;return guard&&isIterateeCall(collection,predicate,guard)&&(predicate=undefined),func(collection,getIteratee(predicate,3))}function filter(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,getIteratee(predicate,3))}function flatMap(collection,iteratee){return baseFlatten(map(collection,iteratee),1)}function flatMapDeep(collection,iteratee){return baseFlatten(map(collection,iteratee),INFINITY)}function flatMapDepth(collection,iteratee,depth){return depth=depth===undefined?1:toInteger(depth),baseFlatten(map(collection,iteratee),depth)}function forEach(collection,iteratee){var func=isArray(collection)?arrayEach:baseEach;return func(collection,getIteratee(iteratee,3))}function forEachRight(collection,iteratee){var func=isArray(collection)?arrayEachRight:baseEachRight;return func(collection,getIteratee(iteratee,3))}function includes(collection,value,fromIndex,guard){collection=isArrayLike(collection)?collection:values(collection);fromIndex=fromIndex&&!guard?toInteger(fromIndex):0;var length=collection.length;return fromIndex<0&&(fromIndex=nativeMax(length+fromIndex,0)),isString(collection)?fromIndex<=length&&collection.indexOf(value,fromIndex)>-1:!!length&&baseIndexOf(collection,value,fromIndex)>-1}function map(collection,iteratee){var func=isArray(collection)?arrayMap:baseMap;return func(collection,getIteratee(iteratee,3))}function orderBy(collection,iteratees,orders,guard){return collection==null?[]:(isArray(iteratees)||(iteratees=iteratees==null?[]:[iteratees]),orders=guard?undefined:orders,isArray(orders)||(orders=orders==null?[]:[orders]),baseOrderBy(collection,iteratees,orders))}function reduce(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduce:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEach)}function reduceRight(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduceRight:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEachRight)}function reject(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,negate(getIteratee(predicate,3)))}function sample(collection){var func=isArray(collection)?arraySample:baseSample;return func(collection)}function sampleSize(collection,n,guard){n=(guard?isIterateeCall(collection,n,guard):n===undefined)?1:toInteger(n);var func=isArray(collection)?arraySampleSize:baseSampleSize;return func(collection,n)}function shuffle(collection){var func=isArray(collection)?arrayShuffle:baseShuffle;return func(collection)}function size(collection){if(collection==null)return 0;if(isArrayLike(collection))return isString(collection)?stringSize(collection):collection.length;var tag=getTag(collection);return tag==mapTag||tag==setTag?collection.size:baseKeys(collection).length}function some(collection,predicate,guard){var func=isArray(collection)?arraySome:baseSome;return guard&&isIterateeCall(collection,predicate,guard)&&(predicate=undefined),func(collection,getIteratee(predicate,3))}function after(n,func){if(typeof func!="function")throw new TypeError(FUNC_ERROR_TEXT);return n=toInteger(n),function(){if(--n<1)return func.apply(this,arguments)}}function ary(func,n,guard){return n=guard?undefined:n,n=func&&n==null?func.length:n,createWrap(func,WRAP_ARY_FLAG,undefined,undefined,undefined,undefined,n)}function before(n,func){var result;if(typeof func!="function")throw new TypeError(FUNC_ERROR_TEXT);return n=toInteger(n),function(){return--n>0&&(result=func.apply(this,arguments)),n<=1&&(func=undefined),result}}function curry(func,arity,guard){arity=guard?undefined:arity;var result=createWrap(func,WRAP_CURRY_FLAG,undefined,undefined,undefined,undefined,undefined,arity);return result.placeholder=curry.placeholder,result}function curryRight(func,arity,guard){arity=guard?undefined:arity;var result=createWrap(func,WRAP_CURRY_RIGHT_FLAG,undefined,undefined,undefined,undefined,undefined,arity);return result.placeholder=curryRight.placeholder,result}function debounce(func,wait,options){function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=undefined,lastInvokeTime=time,result=func.apply(thisArg,args)}function leadingEdge(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}function remainingWait(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,result=wait-timeSinceLastCall;return maxing?nativeMin(result,maxWait-timeSinceLastInvoke):result}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;return lastCallTime===undefined||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait}function timerExpired(){var time=now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,remainingWait(time))}function trailingEdge(time){return(timerId=undefined,trailing&&lastArgs)?invokeFunc(time):(lastArgs=lastThis=undefined,result)}function cancel(){timerId!==undefined&&clearTimeout(timerId);lastInvokeTime=0;lastArgs=lastCallTime=lastThis=timerId=undefined}function flush(){return timerId===undefined?result:trailingEdge(now())}function debounced(){var time=now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(timerId===undefined)return leadingEdge(lastCallTime);if(maxing)return timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return timerId===undefined&&(timerId=setTimeout(timerExpired,wait)),result}var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if(typeof func!="function")throw new TypeError(FUNC_ERROR_TEXT);return wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,maxing="maxWait"in options,maxWait=maxing?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=cancel,debounced.flush=flush,debounced}function flip(func){return createWrap(func,WRAP_FLIP_FLAG)}function memoize(func,resolver){if(typeof func!="function"||resolver!=null&&typeof resolver!="function")throw new TypeError(FUNC_ERROR_TEXT);var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache,result;return cache.has(key)?cache.get(key):(result=func.apply(this,args),memoized.cache=cache.set(key,result)||cache,result)};return memoized.cache=new(memoize.Cache||MapCache),memoized}function negate(predicate){if(typeof predicate!="function")throw new TypeError(FUNC_ERROR_TEXT);return function(){var args=arguments;switch(args.length){case 0:return!predicate.call(this);case 1:return!predicate.call(this,args[0]);case 2:return!predicate.call(this,args[0],args[1]);case 3:return!predicate.call(this,args[0],args[1],args[2])}return!predicate.apply(this,args)}}function once(func){return before(2,func)}function rest(func,start){if(typeof func!="function")throw new TypeError(FUNC_ERROR_TEXT);return start=start===undefined?start:toInteger(start),baseRest(func,start)}function spread(func,start){if(typeof func!="function")throw new TypeError(FUNC_ERROR_TEXT);return start=start==null?0:nativeMax(toInteger(start),0),baseRest(function(args){var array=args[start],otherArgs=castSlice(args,0,start);return array&&arrayPush(otherArgs,array),apply(func,this,otherArgs)})}function throttle(func,wait,options){var leading=!0,trailing=!0;if(typeof func!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject(options)&&(leading="leading"in options?!!options.leading:leading,trailing="trailing"in options?!!options.trailing:trailing),debounce(func,wait,{leading:leading,maxWait:wait,trailing:trailing})}function unary(func){return ary(func,1)}function wrap(value,wrapper){return partial(castFunction(wrapper),value)}function castArray(){if(!arguments.length)return[];var value=arguments[0];return isArray(value)?value:[value]}function clone(value){return baseClone(value,CLONE_SYMBOLS_FLAG)}function cloneWith(value,customizer){return customizer=typeof customizer=="function"?customizer:undefined,baseClone(value,CLONE_SYMBOLS_FLAG,customizer)}function cloneDeep(value){return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}function cloneDeepWith(value,customizer){return customizer=typeof customizer=="function"?customizer:undefined,baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG,customizer)}function conformsTo(object,source){return source==null||baseConformsTo(object,source,keys(source))}function eq(value,other){return value===other||value!==value&&other!==other}function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isBoolean(value){return value===!0||value===!1||isObjectLike(value)&&baseGetTag(value)==boolTag}function isElement(value){return isObjectLike(value)&&value.nodeType===1&&!isPlainObject(value)}function isEmpty(value){var tag,key;if(value==null)return!0;if(isArrayLike(value)&&(isArray(value)||typeof value=="string"||typeof value.splice=="function"||isBuffer(value)||isTypedArray(value)||isArguments(value)))return!value.length;if(tag=getTag(value),tag==mapTag||tag==setTag)return!value.size;if(isPrototype(value))return!baseKeys(value).length;for(key in value)if(hasOwnProperty.call(value,key))return!1;return!0}function isEqual(value,other){return baseIsEqual(value,other)}function isEqualWith(value,other,customizer){customizer=typeof customizer=="function"?customizer:undefined;var result=customizer?customizer(value,other):undefined;return result===undefined?baseIsEqual(value,other,undefined,customizer):!!result}function isError(value){if(!isObjectLike(value))return!1;var tag=baseGetTag(value);return tag==errorTag||tag==domExcTag||typeof value.message=="string"&&typeof value.name=="string"&&!isPlainObject(value)}function isFinite(value){return typeof value=="number"&&nativeIsFinite(value)}function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}function isInteger(value){return typeof value=="number"&&value==toInteger(value)}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}function isObjectLike(value){return value!=null&&typeof value=="object"}function isMatch(object,source){return object===source||baseIsMatch(object,source,getMatchData(source))}function isMatchWith(object,source,customizer){return customizer=typeof customizer=="function"?customizer:undefined,baseIsMatch(object,source,getMatchData(source),customizer)}function isNaN(value){return isNumber(value)&&value!=+value}function isNative(value){if(isMaskable(value))throw new Error(CORE_ERROR_TEXT);return baseIsNative(value)}function isNull(value){return value===null}function isNil(value){return value==null}function isNumber(value){return typeof value=="number"||isObjectLike(value)&&baseGetTag(value)==numberTag}function isPlainObject(value){var proto,Ctor;return!isObjectLike(value)||baseGetTag(value)!=objectTag?!1:(proto=getPrototype(value),proto===null)?!0:(Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor,typeof Ctor=="function"&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString)}function isSafeInteger(value){return isInteger(value)&&value>=-MAX_SAFE_INTEGER&&value<=MAX_SAFE_INTEGER}function isString(value){return typeof value=="string"||!isArray(value)&&isObjectLike(value)&&baseGetTag(value)==stringTag}function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&baseGetTag(value)==symbolTag}function isUndefined(value){return value===undefined}function isWeakMap(value){return isObjectLike(value)&&getTag(value)==weakMapTag}function isWeakSet(value){return isObjectLike(value)&&baseGetTag(value)==weakSetTag}function toArray(value){if(!value)return[];if(isArrayLike(value))return isString(value)?stringToArray(value):copyArray(value);if(symIterator&&value[symIterator])return iteratorToArray(value[symIterator]());var tag=getTag(value),func=tag==mapTag?mapToArray:tag==setTag?setToArray:values;return func(value)}function toFinite(value){if(!value)return value===0?value:0;if(value=toNumber(value),value===INFINITY||value===-INFINITY){var sign=value<0?-1:1;return sign*MAX_INTEGER}return value===value?value:0}function toInteger(value){var result=toFinite(value),remainder=result%1;return result===result?remainder?result-remainder:result:0}function toLength(value){return value?baseClamp(toInteger(value),0,MAX_ARRAY_LENGTH):0}function toNumber(value){var other,isBinary;return typeof value=="number"?value:isSymbol(value)?NAN:(isObject(value)&&(other=typeof value.valueOf=="function"?value.valueOf():value,value=isObject(other)?other+"":other),typeof value!="string")?value===0?value:+value:(value=value.replace(reTrim,""),isBinary=reIsBinary.test(value),isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value)}function toPlainObject(value){return copyObject(value,keysIn(value))}function toSafeInteger(value){return value?baseClamp(toInteger(value),-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER):value===0?value:0}function toString(value){return value==null?"":baseToString(value)}function create(prototype,properties){var result=baseCreate(prototype);return properties==null?result:baseAssign(result,properties)}function findKey(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwn)}function findLastKey(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwnRight)}function forIn(object,iteratee){return object==null?object:baseFor(object,getIteratee(iteratee,3),keysIn)}function forInRight(object,iteratee){return object==null?object:baseForRight(object,getIteratee(iteratee,3),keysIn)}function forOwn(object,iteratee){return object&&baseForOwn(object,getIteratee(iteratee,3))}function forOwnRight(object,iteratee){return object&&baseForOwnRight(object,getIteratee(iteratee,3))}function functions(object){return object==null?[]:baseFunctions(object,keys(object))}function functionsIn(object){return object==null?[]:baseFunctions(object,keysIn(object))}function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,path);return result===undefined?defaultValue:result}function has(object,path){return object!=null&&hasPath(object,path,baseHas)}function hasIn(object,path){return object!=null&&hasPath(object,path,baseHasIn)}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,!0):baseKeysIn(object)}function mapKeys(object,iteratee){var result={};return iteratee=getIteratee(iteratee,3),baseForOwn(object,function(value,key,object){baseAssignValue(result,iteratee(value,key,object),value)}),result}function mapValues(object,iteratee){var result={};return iteratee=getIteratee(iteratee,3),baseForOwn(object,function(value,key,object){baseAssignValue(result,key,iteratee(value,key,object))}),result}function omitBy(object,predicate){return pickBy(object,negate(getIteratee(predicate)))}function pickBy(object,predicate){if(object==null)return{};var props=arrayMap(getAllKeysIn(object),function(prop){return[prop]});return predicate=getIteratee(predicate),basePickBy(object,props,function(value,path){return predicate(value,path[0])})}function result(object,path,defaultValue){var index,length,value;for(path=castPath(path,object),index=-1,length=path.length,length||(length=1,object=undefined);++index<length;)value=object==null?undefined:object[toKey(path[index])],value===undefined&&(index=length,value=defaultValue),object=isFunction(value)?value.call(object):value;return object}function set(object,path,value){return object==null?object:baseSet(object,path,value)}function setWith(object,path,value,customizer){return customizer=typeof customizer=="function"?customizer:undefined,object==null?object:baseSet(object,path,value,customizer)}function transform(object,iteratee,accumulator){var isArr=isArray(object),isArrLike=isArr||isBuffer(object)||isTypedArray(object),Ctor;return iteratee=getIteratee(iteratee,4),accumulator==null&&(Ctor=object&&object.constructor,accumulator=isArrLike?isArr?new Ctor:[]:isObject(object)?isFunction(Ctor)?baseCreate(getPrototype(object)):{}:{}),(isArrLike?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object)}),accumulator}function unset(object,path){return object==null?!0:baseUnset(object,path)}function update(object,path,updater){return object==null?object:baseUpdate(object,path,castFunction(updater))}function updateWith(object,path,updater,customizer){return customizer=typeof customizer=="function"?customizer:undefined,object==null?object:baseUpdate(object,path,castFunction(updater),customizer)}function values(object){return object==null?[]:baseValues(object,keys(object))}function valuesIn(object){return object==null?[]:baseValues(object,keysIn(object))}function clamp(number,lower,upper){return upper===undefined&&(upper=lower,lower=undefined),upper!==undefined&&(upper=toNumber(upper),upper=upper===upper?upper:0),lower!==undefined&&(lower=toNumber(lower),lower=lower===lower?lower:0),baseClamp(toNumber(number),lower,upper)}function inRange(number,start,end){return start=toFinite(start),end===undefined?(end=start,start=0):end=toFinite(end),number=toNumber(number),baseInRange(number,start,end)}function random(lower,upper,floating){var temp,rand;return(floating&&typeof floating!="boolean"&&isIterateeCall(lower,upper,floating)&&(upper=floating=undefined),floating===undefined&&(typeof upper=="boolean"?(floating=upper,upper=undefined):typeof lower=="boolean"&&(floating=lower,lower=undefined)),lower===undefined&&upper===undefined?(lower=0,upper=1):(lower=toFinite(lower),upper===undefined?(upper=lower,lower=0):upper=toFinite(upper)),lower>upper&&(temp=lower,lower=upper,upper=temp),floating||lower%1||upper%1)?(rand=nativeRandom(),nativeMin(lower+rand*(upper-lower+freeParseFloat("1e-"+((rand+"").length-1))),upper)):baseRandom(lower,upper)}function capitalize(string){return upperFirst(toString(string).toLowerCase())}function deburr(string){return string=toString(string),string&&string.replace(reLatin,deburrLetter).replace(reComboMark,"")}function endsWith(string,target,position){var length,end;return string=toString(string),target=baseToString(target),length=string.length,position=position===undefined?length:baseClamp(toInteger(position),0,length),end=position,position-=target.length,position>=0&&string.slice(position,end)==target}function escape(string){return string=toString(string),string&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string}function escapeRegExp(string){return string=toString(string),string&&reHasRegExpChar.test(string)?string.replace(reRegExpChar,"\\$&"):string}function pad(string,length,chars){var strLength,mid;return(string=toString(string),length=toInteger(length),strLength=length?stringSize(string):0,!length||strLength>=length)?string:(mid=(length-strLength)/2,createPadding(nativeFloor(mid),chars)+string+createPadding(nativeCeil(mid),chars))}function padEnd(string,length,chars){string=toString(string);length=toInteger(length);var strLength=length?stringSize(string):0;return length&&strLength<length?string+createPadding(length-strLength,chars):string}function padStart(string,length,chars){string=toString(string);length=toInteger(length);var strLength=length?stringSize(string):0;return length&&strLength<length?createPadding(length-strLength,chars)+string:string}function parseInt(string,radix,guard){return guard||radix==null?radix=0:radix&&(radix=+radix),nativeParseInt(toString(string).replace(reTrimStart,""),radix||0)}function repeat(string,n,guard){return n=(guard?isIterateeCall(string,n,guard):n===undefined)?1:toInteger(n),baseRepeat(toString(string),n)}function replace(){var args=arguments,string=toString(args[0]);return args.length<3?string:string.replace(args[1],args[2])}function split(string,separator,limit){return(limit&&typeof limit!="number"&&isIterateeCall(string,separator,limit)&&(separator=limit=undefined),limit=limit===undefined?MAX_ARRAY_LENGTH:limit>>>0,!limit)?[]:(string=toString(string),string&&(typeof separator=="string"||separator!=null&&!isRegExp(separator))&&(separator=baseToString(separator),!separator&&hasUnicode(string)))?castSlice(stringToArray(string),0,limit):string.split(separator,limit)}function startsWith(string,target,position){return string=toString(string),position=position==null?0:baseClamp(toInteger(position),0,string.length),target=baseToString(target),string.slice(position,position+target.length)==target}function template(string,options,guard){var settings=lodash.templateSettings,variable,result;guard&&isIterateeCall(string,options,guard)&&(options=undefined);string=toString(string);options=assignInWith({},options,settings,customDefaultsAssignIn);var imports=assignInWith({},options.imports,settings.imports,customDefaultsAssignIn),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys),isEscaping,isEvaluating,index=0,interpolate=options.interpolate||reNoMatch,source="__p += '",reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g"),sourceURL="//# sourceURL="+("sourceURL"in options?options.sourceURL:"lodash.templateSources["+ ++templateCounter+"]")+"\n";if(string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){return interpolateValue||(interpolateValue=esTemplateValue),source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar),escapeValue&&(isEscaping=!0,source+="' +\n__e("+escapeValue+") +\n'"),evaluateValue&&(isEvaluating=!0,source+="';\n"+evaluateValue+";\n__p += '"),interpolateValue&&(source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"),index=offset+match.length,match}),source+="';\n",variable=options.variable,variable||(source="with (obj) {\n"+source+"\n}\n"),source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;"),source="function("+(variable||"obj")+") {\n"+(variable?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(isEscaping?", __e = _.escape":"")+(isEvaluating?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}",result=attempt(function(){return Function(importsKeys,sourceURL+"return "+source).apply(undefined,importsValues)}),result.source=source,isError(result))throw result;return result}function toLower(value){return toString(value).toLowerCase()}function toUpper(value){return toString(value).toUpperCase()}function trim(string,chars,guard){if(string=toString(string),string&&(guard||chars===undefined))return string.replace(reTrim,"");if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string),chrSymbols=stringToArray(chars),start=charsStartIndex(strSymbols,chrSymbols),end=charsEndIndex(strSymbols,chrSymbols)+1;return castSlice(strSymbols,start,end).join("")}function trimEnd(string,chars,guard){if(string=toString(string),string&&(guard||chars===undefined))return string.replace(reTrimEnd,"");if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string),end=charsEndIndex(strSymbols,stringToArray(chars))+1;return castSlice(strSymbols,0,end).join("")}function trimStart(string,chars,guard){if(string=toString(string),string&&(guard||chars===undefined))return string.replace(reTrimStart,"");if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string),start=charsStartIndex(strSymbols,stringToArray(chars));return castSlice(strSymbols,start).join("")}function truncate(string,options){var length=DEFAULT_TRUNC_LENGTH,omission=DEFAULT_TRUNC_OMISSION,separator,strLength,strSymbols,end,result,match,substring,newEnd,index;if(isObject(options)&&(separator="separator"in options?options.separator:separator,length="length"in options?toInteger(options.length):length,omission="omission"in options?baseToString(options.omission):omission),string=toString(string),strLength=string.length,hasUnicode(string)&&(strSymbols=stringToArray(string),strLength=strSymbols.length),length>=strLength)return string;if(end=length-stringSize(omission),end<1)return omission;if(result=strSymbols?castSlice(strSymbols,0,end).join(""):string.slice(0,end),separator===undefined)return result+omission;if(strSymbols&&(end+=result.length-end),isRegExp(separator)){if(string.slice(end).search(separator)){for(substring=result,separator.global||(separator=RegExp(separator.source,toString(reFlags.exec(separator))+"g")),separator.lastIndex=0;match=separator.exec(substring);)newEnd=match.index;result=result.slice(0,newEnd===undefined?end:newEnd)}}else string.indexOf(baseToString(separator),end)!=end&&(index=result.lastIndexOf(separator),index>-1&&(result=result.slice(0,index)));return result+omission}function unescape(string){return string=toString(string),string&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string}function words(string,pattern,guard){return(string=toString(string),pattern=guard?undefined:pattern,pattern===undefined)?hasUnicodeWord(string)?unicodeWords(string):asciiWords(string):string.match(pattern)||[]}function cond(pairs){var length=pairs==null?0:pairs.length,toIteratee=getIteratee();return pairs=length?arrayMap(pairs,function(pair){if(typeof pair[1]!="function")throw new TypeError(FUNC_ERROR_TEXT);return[toIteratee(pair[0]),pair[1]]}):[],baseRest(function(args){for(var index=-1,pair;++index<length;)if(pair=pairs[index],apply(pair[0],this,args))return apply(pair[1],this,args)})}function conforms(source){return baseConforms(baseClone(source,CLONE_DEEP_FLAG))}function constant(value){return function(){return value}}function defaultTo(value,defaultValue){return value==null||value!==value?defaultValue:value}function identity(value){return value}function iteratee(func){return baseIteratee(typeof func=="function"?func:baseClone(func,CLONE_DEEP_FLAG))}function matches(source){return baseMatches(baseClone(source,CLONE_DEEP_FLAG))}function matchesProperty(path,srcValue){return baseMatchesProperty(path,baseClone(srcValue,CLONE_DEEP_FLAG))}function mixin(object,source,options){var props=keys(source),methodNames=baseFunctions(source,props),chain,isFunc;return options!=null||isObject(source)&&(methodNames.length||!props.length)||(options=source,source=object,object=this,methodNames=baseFunctions(source,keys(source))),chain=!(isObject(options)&&"chain"in options)||!!options.chain,isFunc=isFunction(object),arrayEach(methodNames,function(methodName){var func=source[methodName];object[methodName]=func;isFunc&&(object.prototype[methodName]=function(){var chainAll=this.__chain__,result,actions;return chain||chainAll?(result=object(this.__wrapped__),actions=result.__actions__=copyArray(this.__actions__),actions.push({func:func,args:arguments,thisArg:object}),result.__chain__=chainAll,result):func.apply(object,arrayPush([this.value()],arguments))})}),object}function noConflict(){return root._===this&&(root._=oldDash),this}function noop(){}function nthArg(n){return n=toInteger(n),baseRest(function(args){return baseNth(args,n)})}function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}function propertyOf(object){return function(path){return object==null?undefined:baseGet(object,path)}}function stubArray(){return[]}function stubFalse(){return!1}function stubObject(){return{}}function stubString(){return""}function stubTrue(){return!0}function times(n,iteratee){var index,length,result;if(n=toInteger(n),n<1||n>MAX_SAFE_INTEGER)return[];for(index=MAX_ARRAY_LENGTH,length=nativeMin(n,MAX_ARRAY_LENGTH),iteratee=getIteratee(iteratee),n-=MAX_ARRAY_LENGTH,result=baseTimes(length,iteratee);++index<n;)iteratee(index);return result}function toPath(value){return isArray(value)?arrayMap(value,toKey):isSymbol(value)?[value]:copyArray(stringToPath(toString(value)))}function uniqueId(prefix){var id=++idCounter;return toString(prefix)+id}function max(array){return array&&array.length?baseExtremum(array,identity,baseGt):undefined}function maxBy(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseGt):undefined}function mean(array){return baseMean(array,identity)}function meanBy(array,iteratee){return baseMean(array,getIteratee(iteratee,2))}function min(array){return array&&array.length?baseExtremum(array,identity,baseLt):undefined}function minBy(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseLt):undefined}function sum(array){return array&&array.length?baseSum(array,identity):0}function sumBy(array,iteratee){return array&&array.length?baseSum(array,getIteratee(iteratee,2)):0}var baseCreate,baseEach,baseEachRight,baseFor,baseForRight,baseSetData,baseSetToString,castRest,clearTimeout,createSet,getData,isMaskable,stringToPath,pull,pullAt,zipWith,wrapperAt,countBy,find,findLast,groupBy,invokeMap,keyBy,partition,sortBy,now,bind,bindKey,defer,delay,isBuffer,isDate,isMap,isRegExp,isSet,isTypedArray,lt,lte,defaults,defaultsDeep,pick,toPairs,toPairsIn,camelCase,snakeCase,startCase,upperCase,upperFirst,attempt,bindAll,flow,flowRight,method,methodOf,range,rangeRight;context=context==null?root:_.defaults(root.Object(),context,_.pick(root,contextProps));var Array=context.Array,Date=context.Date,Error=context.Error,Function=context.Function,Math=context.Math,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=context["__core-js_shared__"],funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,idCounter=0,maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}(),nativeObjectToString=objectProto.toString,objectCtorString=funcToString.call(Object),oldDash=root._,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?context.Buffer:undefined,Symbol=context.Symbol,Uint8Array=context.Uint8Array,allocUnsafe=Buffer?Buffer.allocUnsafe:undefined,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,spreadableSymbol=Symbol?Symbol.isConcatSpreadable:undefined,symIterator=Symbol?Symbol.iterator:undefined,symToStringTag=Symbol?Symbol.toStringTag:undefined,defineProperty=function(){try{var func=getNative(Object,"defineProperty");return func({},"",{}),func}catch(e){}}(),ctxClearTimeout=context.clearTimeout!==root.clearTimeout&&context.clearTimeout,ctxNow=Date&&Date.now!==root.Date.now&&Date.now,ctxSetTimeout=context.setTimeout!==root.setTimeout&&context.setTimeout,nativeCeil=Math.ceil,nativeFloor=Math.floor,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:undefined,nativeIsFinite=context.isFinite,nativeJoin=arrayProto.join,nativeKeys=overArg(Object.keys,Object),nativeMax=Math.max,nativeMin=Math.min,nativeNow=Date.now,nativeParseInt=context.parseInt,nativeRandom=Math.random,nativeReverse=arrayProto.reverse,DataView=getNative(context,"DataView"),Map=getNative(context,"Map"),Promise=getNative(context,"Promise"),Set=getNative(context,"Set"),WeakMap=getNative(context,"WeakMap"),nativeCreate=getNative(Object,"create"),metaMap=WeakMap&&new WeakMap,realNames={},dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;baseCreate=function(){function object(){}return function(proto){if(!isObject(proto))return{};if(objectCreate)return objectCreate(proto);object.prototype=proto;var result=new object;return object.prototype=undefined,result}}();lodash.templateSettings={escape:reEscape,evaluate:reEvaluate,interpolate:reInterpolate,variable:"",imports:{_:lodash}};lodash.prototype=baseLodash.prototype;lodash.prototype.constructor=lodash;LodashWrapper.prototype=baseCreate(baseLodash.prototype);LodashWrapper.prototype.constructor=LodashWrapper;LazyWrapper.prototype=baseCreate(baseLodash.prototype);LazyWrapper.prototype.constructor=LazyWrapper;Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;Stack.prototype.clear=stackClear;Stack.prototype["delete"]=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;baseEach=createBaseEach(baseForOwn);baseEachRight=createBaseEach(baseForOwnRight,!0);baseFor=createBaseFor();baseForRight=createBaseFor(!0);baseSetData=metaMap?function(func,data){return metaMap.set(func,data),func}:identity;baseSetToString=defineProperty?function(func,string){return defineProperty(func,"toString",{configurable:!0,enumerable:!1,value:constant(string),writable:!0})}:identity;castRest=baseRest;clearTimeout=ctxClearTimeout||function(id){return root.clearTimeout(id)};createSet=(Set&&1/setToArray(new Set([,-0]))[1]==INFINITY)?function(values){return new Set(values)}:noop;getData=metaMap?function(func){return metaMap.get(func)}:noop;var getSymbols=nativeGetSymbols?function(object){return object==null?[]:(object=Object(object),arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol)}))}:stubArray,getSymbolsIn=nativeGetSymbols?function(object){for(var result=[];object;)arrayPush(result,getSymbols(object)),object=getPrototype(object);return result}:stubArray,getTag=baseGetTag;(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return result});isMaskable=coreJsData?isFunction:stubFalse;var setData=shortOut(baseSetData),setTimeout=ctxSetTimeout||function(func,wait){return root.setTimeout(func,wait)},setToString=shortOut(baseSetToString);stringToPath=memoizeCapped(function(string){var result=[];return reLeadingDot.test(string)&&result.push(""),string.replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)}),result});var difference=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0)):[]}),differenceBy=baseRest(function(array,values){var iteratee=last(values);return isArrayLikeObject(iteratee)&&(iteratee=undefined),isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0),getIteratee(iteratee,2)):[]}),differenceWith=baseRest(function(array,values){var comparator=last(values);return isArrayLikeObject(comparator)&&(comparator=undefined),isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0),undefined,comparator):[]});var intersection=baseRest(function(arrays){var mapped=arrayMap(arrays,castArrayLikeObject);return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped):[]}),intersectionBy=baseRest(function(arrays){var iteratee=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);return iteratee===last(mapped)?iteratee=undefined:mapped.pop(),mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,getIteratee(iteratee,2)):[]}),intersectionWith=baseRest(function(arrays){var comparator=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);return comparator=typeof comparator=="function"?comparator:undefined,comparator&&mapped.pop(),mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,undefined,comparator):[]});pull=baseRest(pullAll);pullAt=flatRest(function(array,indexes){var length=array==null?0:array.length,result=baseAt(array,indexes);return basePullAt(array,arrayMap(indexes,function(index){return isIndex(index,length)?+index:index}).sort(compareAscending)),result});var union=baseRest(function(arrays){return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0))}),unionBy=baseRest(function(arrays){var iteratee=last(arrays);return isArrayLikeObject(iteratee)&&(iteratee=undefined),baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0),getIteratee(iteratee,2))}),unionWith=baseRest(function(arrays){var comparator=last(arrays);return comparator=typeof comparator=="function"?comparator:undefined,baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0),undefined,comparator)});var without=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,values):[]}),xor=baseRest(function(arrays){return baseXor(arrayFilter(arrays,isArrayLikeObject))}),xorBy=baseRest(function(arrays){var iteratee=last(arrays);return isArrayLikeObject(iteratee)&&(iteratee=undefined),baseXor(arrayFilter(arrays,isArrayLikeObject),getIteratee(iteratee,2))}),xorWith=baseRest(function(arrays){var comparator=last(arrays);return comparator=typeof comparator=="function"?comparator:undefined,baseXor(arrayFilter(arrays,isArrayLikeObject),undefined,comparator)}),zip=baseRest(unzip);zipWith=baseRest(function(arrays){var length=arrays.length,iteratee=length>1?arrays[length-1]:undefined;return iteratee=typeof iteratee=="function"?(arrays.pop(),iteratee):undefined,unzipWith(arrays,iteratee)});wrapperAt=flatRest(function(paths){var length=paths.length,start=length?paths[0]:0,value=this.__wrapped__,interceptor=function(object){return baseAt(object,paths)};return length>1||this.__actions__.length||!(value instanceof LazyWrapper)||!isIndex(start)?this.thru(interceptor):(value=value.slice(start,+start+(length?1:0)),value.__actions__.push({func:thru,args:[interceptor],thisArg:undefined}),new LodashWrapper(value,this.__chain__).thru(function(array){return length&&!array.length&&array.push(undefined),array}))});countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?++result[key]:baseAssignValue(result,key,1)});find=createFind(findIndex);findLast=createFind(findLastIndex);groupBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?result[key].push(value):baseAssignValue(result,key,[value])});invokeMap=baseRest(function(collection,path,args){var index=-1,isFunc=typeof path=="function",result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value){result[++index]=isFunc?apply(path,value,args):baseInvoke(value,path,args)}),result});keyBy=createAggregator(function(result,value,key){baseAssignValue(result,key,value)});partition=createAggregator(function(result,value,key){result[key?0:1].push(value)},function(){return[[],[]]});sortBy=baseRest(function(collection,iteratees){if(collection==null)return[];var length=iteratees.length;return length>1&&isIterateeCall(collection,iteratees[0],iteratees[1])?iteratees=[]:length>2&&isIterateeCall(iteratees[0],iteratees[1],iteratees[2])&&(iteratees=[iteratees[0]]),baseOrderBy(collection,baseFlatten(iteratees,1),[])});now=ctxNow||function(){return root.Date.now()};bind=baseRest(function(func,thisArg,partials){var bitmask=WRAP_BIND_FLAG,holders;return partials.length&&(holders=replaceHolders(partials,getHolder(bind)),bitmask|=WRAP_PARTIAL_FLAG),createWrap(func,bitmask,thisArg,partials,holders)});bindKey=baseRest(function(object,key,partials){var bitmask=WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG,holders;return partials.length&&(holders=replaceHolders(partials,getHolder(bindKey)),bitmask|=WRAP_PARTIAL_FLAG),createWrap(key,bitmask,object,partials,holders)});defer=baseRest(function(func,args){return baseDelay(func,1,args)});delay=baseRest(function(func,wait,args){return baseDelay(func,toNumber(wait)||0,args)});memoize.Cache=MapCache;var overArgs=castRest(function(func,transforms){transforms=transforms.length==1&&isArray(transforms[0])?arrayMap(transforms[0],baseUnary(getIteratee())):arrayMap(baseFlatten(transforms,1),baseUnary(getIteratee()));var funcsLength=transforms.length;return baseRest(function(args){for(var index=-1,length=nativeMin(args.length,funcsLength);++index<length;)args[index]=transforms[index].call(this,args[index]);return apply(func,this,args)})}),partial=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partial));return createWrap(func,WRAP_PARTIAL_FLAG,undefined,partials,holders)}),partialRight=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partialRight));return createWrap(func,WRAP_PARTIAL_RIGHT_FLAG,undefined,partials,holders)}),rearg=flatRest(function(func,indexes){return createWrap(func,WRAP_REARG_FLAG,undefined,undefined,undefined,indexes)});var gt=createRelationalOperation(baseGt),gte=createRelationalOperation(function(value,other){return value>=other}),isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")},isArray=Array.isArray,isArrayBuffer=nodeIsArrayBuffer?baseUnary(nodeIsArrayBuffer):baseIsArrayBuffer;isBuffer=nativeIsBuffer||stubFalse;isDate=nodeIsDate?baseUnary(nodeIsDate):baseIsDate;isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;isRegExp=nodeIsRegExp?baseUnary(nodeIsRegExp):baseIsRegExp;isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;lt=createRelationalOperation(baseLt);lte=createRelationalOperation(function(value,other){return value<=other});var assign=createAssigner(function(object,source){if(isPrototype(source)||isArrayLike(source)){copyObject(source,keys(source),object);return}for(var key in source)hasOwnProperty.call(source,key)&&assignValue(object,key,source[key])}),assignIn=createAssigner(function(object,source){copyObject(source,keysIn(source),object)}),assignInWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keysIn(source),object,customizer)}),assignWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keys(source),object,customizer)}),at=flatRest(baseAt);defaults=baseRest(function(args){return args.push(undefined,customDefaultsAssignIn),apply(assignInWith,undefined,args)});defaultsDeep=baseRest(function(args){return args.push(undefined,customDefaultsMerge),apply(mergeWith,undefined,args)});var invert=createInverter(function(result,value,key){result[value]=key},constant(identity)),invertBy=createInverter(function(result,value,key){hasOwnProperty.call(result,value)?result[value].push(key):result[value]=[key]},getIteratee),invoke=baseRest(baseInvoke);var merge=createAssigner(function(object,source,srcIndex){baseMerge(object,source,srcIndex)}),mergeWith=createAssigner(function(object,source,srcIndex,customizer){baseMerge(object,source,srcIndex,customizer)}),omit=flatRest(function(object,paths){var result={},isDeep,length;if(object==null)return result;for(isDeep=!1,paths=arrayMap(paths,function(path){return path=castPath(path,object),isDeep||(isDeep=path.length>1),path}),copyObject(object,getAllKeysIn(object),result),isDeep&&(result=baseClone(result,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone)),length=paths.length;length--;)baseUnset(result,paths[length]);return result});pick=flatRest(function(object,paths){return object==null?{}:basePick(object,paths)});toPairs=createToPairs(keys);toPairsIn=createToPairs(keysIn);camelCase=createCompounder(function(result,word,index){return word=word.toLowerCase(),result+(index?capitalize(word):word)});var kebabCase=createCompounder(function(result,word,index){return result+(index?"-":"")+word.toLowerCase()}),lowerCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toLowerCase()}),lowerFirst=createCaseFirst("toLowerCase");snakeCase=createCompounder(function(result,word,index){return result+(index?"_":"")+word.toLowerCase()});startCase=createCompounder(function(result,word,index){return result+(index?" ":"")+upperFirst(word)});upperCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toUpperCase()});upperFirst=createCaseFirst("toUpperCase");attempt=baseRest(function(func,args){try{return apply(func,undefined,args)}catch(e){return isError(e)?e:new Error(e)}});bindAll=flatRest(function(object,methodNames){return arrayEach(methodNames,function(key){key=toKey(key);baseAssignValue(object,key,bind(object[key],object))}),object});flow=createFlow();flowRight=createFlow(!0);method=baseRest(function(path,args){return function(object){return baseInvoke(object,path,args)}});methodOf=baseRest(function(object,args){return function(path){return baseInvoke(object,path,args)}});var over=createOver(arrayMap),overEvery=createOver(arrayEvery),overSome=createOver(arraySome);range=createRange();rangeRight=createRange(!0);var add=createMathOperation(function(augend,addend){return augend+addend},0),ceil=createRound("ceil"),divide=createMathOperation(function(dividend,divisor){return dividend/divisor},1),floor=createRound("floor");var multiply=createMathOperation(function(multiplier,multiplicand){return multiplier*multiplicand},1),round=createRound("round"),subtract=createMathOperation(function(minuend,subtrahend){return minuend-subtrahend},0);return lodash.after=after,lodash.ary=ary,lodash.assign=assign,lodash.assignIn=assignIn,lodash.assignInWith=assignInWith,lodash.assignWith=assignWith,lodash.at=at,lodash.before=before,lodash.bind=bind,lodash.bindAll=bindAll,lodash.bindKey=bindKey,lodash.castArray=castArray,lodash.chain=chain,lodash.chunk=chunk,lodash.compact=compact,lodash.concat=concat,lodash.cond=cond,lodash.conforms=conforms,lodash.constant=constant,lodash.countBy=countBy,lodash.create=create,lodash.curry=curry,lodash.curryRight=curryRight,lodash.debounce=debounce,lodash.defaults=defaults,lodash.defaultsDeep=defaultsDeep,lodash.defer=defer,lodash.delay=delay,lodash.difference=difference,lodash.differenceBy=differenceBy,lodash.differenceWith=differenceWith,lodash.drop=drop,lodash.dropRight=dropRight,lodash.dropRightWhile=dropRightWhile,lodash.dropWhile=dropWhile,lodash.fill=fill,lodash.filter=filter,lodash.flatMap=flatMap,lodash.flatMapDeep=flatMapDeep,lodash.flatMapDepth=flatMapDepth,lodash.flatten=flatten,lodash.flattenDeep=flattenDeep,lodash.flattenDepth=flattenDepth,lodash.flip=flip,lodash.flow=flow,lodash.flowRight=flowRight,lodash.fromPairs=fromPairs,lodash.functions=functions,lodash.functionsIn=functionsIn,lodash.groupBy=groupBy,lodash.initial=initial,lodash.intersection=intersection,lodash.intersectionBy=intersectionBy,lodash.intersectionWith=intersectionWith,lodash.invert=invert,lodash.invertBy=invertBy,lodash.invokeMap=invokeMap,lodash.iteratee=iteratee,lodash.keyBy=keyBy,lodash.keys=keys,lodash.keysIn=keysIn,lodash.map=map,lodash.mapKeys=mapKeys,lodash.mapValues=mapValues,lodash.matches=matches,lodash.matchesProperty=matchesProperty,lodash.memoize=memoize,lodash.merge=merge,lodash.mergeWith=mergeWith,lodash.method=method,lodash.methodOf=methodOf,lodash.mixin=mixin,lodash.negate=negate,lodash.nthArg=nthArg,lodash.omit=omit,lodash.omitBy=omitBy,lodash.once=once,lodash.orderBy=orderBy,lodash.over=over,lodash.overArgs=overArgs,lodash.overEvery=overEvery,lodash.overSome=overSome,lodash.partial=partial,lodash.partialRight=partialRight,lodash.partition=partition,lodash.pick=pick,lodash.pickBy=pickBy,lodash.property=property,lodash.propertyOf=propertyOf,lodash.pull=pull,lodash.pullAll=pullAll,lodash.pullAllBy=pullAllBy,lodash.pullAllWith=pullAllWith,lodash.pullAt=pullAt,lodash.range=range,lodash.rangeRight=rangeRight,lodash.rearg=rearg,lodash.reject=reject,lodash.remove=remove,lodash.rest=rest,lodash.reverse=reverse,lodash.sampleSize=sampleSize,lodash.set=set,lodash.setWith=setWith,lodash.shuffle=shuffle,lodash.slice=slice,lodash.sortBy=sortBy,lodash.sortedUniq=sortedUniq,lodash.sortedUniqBy=sortedUniqBy,lodash.split=split,lodash.spread=spread,lodash.tail=tail,lodash.take=take,lodash.takeRight=takeRight,lodash.takeRightWhile=takeRightWhile,lodash.takeWhile=takeWhile,lodash.tap=tap,lodash.throttle=throttle,lodash.thru=thru,lodash.toArray=toArray,lodash.toPairs=toPairs,lodash.toPairsIn=toPairsIn,lodash.toPath=toPath,lodash.toPlainObject=toPlainObject,lodash.transform=transform,lodash.unary=unary,lodash.union=union,lodash.unionBy=unionBy,lodash.unionWith=unionWith,lodash.uniq=uniq,lodash.uniqBy=uniqBy,lodash.uniqWith=uniqWith,lodash.unset=unset,lodash.unzip=unzip,lodash.unzipWith=unzipWith,lodash.update=update,lodash.updateWith=updateWith,lodash.values=values,lodash.valuesIn=valuesIn,lodash.without=without,lodash.words=words,lodash.wrap=wrap,lodash.xor=xor,lodash.xorBy=xorBy,lodash.xorWith=xorWith,lodash.zip=zip,lodash.zipObject=zipObject,lodash.zipObjectDeep=zipObjectDeep,lodash.zipWith=zipWith,lodash.entries=toPairs,lodash.entriesIn=toPairsIn,lodash.extend=assignIn,lodash.extendWith=assignInWith,mixin(lodash,lodash),lodash.add=add,lodash.attempt=attempt,lodash.camelCase=camelCase,lodash.capitalize=capitalize,lodash.ceil=ceil,lodash.clamp=clamp,lodash.clone=clone,lodash.cloneDeep=cloneDeep,lodash.cloneDeepWith=cloneDeepWith,lodash.cloneWith=cloneWith,lodash.conformsTo=conformsTo,lodash.deburr=deburr,lodash.defaultTo=defaultTo,lodash.divide=divide,lodash.endsWith=endsWith,lodash.eq=eq,lodash.escape=escape,lodash.escapeRegExp=escapeRegExp,lodash.every=every,lodash.find=find,lodash.findIndex=findIndex,lodash.findKey=findKey,lodash.findLast=findLast,lodash.findLastIndex=findLastIndex,lodash.findLastKey=findLastKey,lodash.floor=floor,lodash.forEach=forEach,lodash.forEachRight=forEachRight,lodash.forIn=forIn,lodash.forInRight=forInRight,lodash.forOwn=forOwn,lodash.forOwnRight=forOwnRight,lodash.get=get,lodash.gt=gt,lodash.gte=gte,lodash.has=has,lodash.hasIn=hasIn,lodash.head=head,lodash.identity=identity,lodash.includes=includes,lodash.indexOf=indexOf,lodash.inRange=inRange,lodash.invoke=invoke,lodash.isArguments=isArguments,lodash.isArray=isArray,lodash.isArrayBuffer=isArrayBuffer,lodash.isArrayLike=isArrayLike,lodash.isArrayLikeObject=isArrayLikeObject,lodash.isBoolean=isBoolean,lodash.isBuffer=isBuffer,lodash.isDate=isDate,lodash.isElement=isElement,lodash.isEmpty=isEmpty,lodash.isEqual=isEqual,lodash.isEqualWith=isEqualWith,lodash.isError=isError,lodash.isFinite=isFinite,lodash.isFunction=isFunction,lodash.isInteger=isInteger,lodash.isLength=isLength,lodash.isMap=isMap,lodash.isMatch=isMatch,lodash.isMatchWith=isMatchWith,lodash.isNaN=isNaN,lodash.isNative=isNative,lodash.isNil=isNil,lodash.isNull=isNull,lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isObjectLike=isObjectLike,lodash.isPlainObject=isPlainObject,lodash.isRegExp=isRegExp,lodash.isSafeInteger=isSafeInteger,lodash.isSet=isSet,lodash.isString=isString,lodash.isSymbol=isSymbol,lodash.isTypedArray=isTypedArray,lodash.isUndefined=isUndefined,lodash.isWeakMap=isWeakMap,lodash.isWeakSet=isWeakSet,lodash.join=join,lodash.kebabCase=kebabCase,lodash.last=last,lodash.lastIndexOf=lastIndexOf,lodash.lowerCase=lowerCase,lodash.lowerFirst=lowerFirst,lodash.lt=lt,lodash.lte=lte,lodash.max=max,lodash.maxBy=maxBy,lodash.mean=mean,lodash.meanBy=meanBy,lodash.min=min,lodash.minBy=minBy,lodash.stubArray=stubArray,lodash.stubFalse=stubFalse,lodash.stubObject=stubObject,lodash.stubString=stubString,lodash.stubTrue=stubTrue,lodash.multiply=multiply,lodash.nth=nth,lodash.noConflict=noConflict,lodash.noop=noop,lodash.now=now,lodash.pad=pad,lodash.padEnd=padEnd,lodash.padStart=padStart,lodash.parseInt=parseInt,lodash.random=random,lodash.reduce=reduce,lodash.reduceRight=reduceRight,lodash.repeat=repeat,lodash.replace=replace,lodash.result=result,lodash.round=round,lodash.runInContext=runInContext,lodash.sample=sample,lodash.size=size,lodash.snakeCase=snakeCase,lodash.some=some,lodash.sortedIndex=sortedIndex,lodash.sortedIndexBy=sortedIndexBy,lodash.sortedIndexOf=sortedIndexOf,lodash.sortedLastIndex=sortedLastIndex,lodash.sortedLastIndexBy=sortedLastIndexBy,lodash.sortedLastIndexOf=sortedLastIndexOf,lodash.startCase=startCase,lodash.startsWith=startsWith,lodash.subtract=subtract,lodash.sum=sum,lodash.sumBy=sumBy,lodash.template=template,lodash.times=times,lodash.toFinite=toFinite,lodash.toInteger=toInteger,lodash.toLength=toLength,lodash.toLower=toLower,lodash.toNumber=toNumber,lodash.toSafeInteger=toSafeInteger,lodash.toString=toString,lodash.toUpper=toUpper,lodash.trim=trim,lodash.trimEnd=trimEnd,lodash.trimStart=trimStart,lodash.truncate=truncate,lodash.unescape=unescape,lodash.uniqueId=uniqueId,lodash.upperCase=upperCase,lodash.upperFirst=upperFirst,lodash.each=forEach,lodash.eachRight=forEachRight,lodash.first=head,mixin(lodash,function(){var source={};return baseForOwn(lodash,function(func,methodName){hasOwnProperty.call(lodash.prototype,methodName)||(source[methodName]=func)}),source}(),{chain:!1}),lodash.VERSION=VERSION,arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(methodName){lodash[methodName].placeholder=lodash}),arrayEach(["drop","take"],function(methodName,index){LazyWrapper.prototype[methodName]=function(n){n=n===undefined?1:nativeMax(toInteger(n),0);var result=this.__filtered__&&!index?new LazyWrapper(this):this.clone();return result.__filtered__?result.__takeCount__=nativeMin(n,result.__takeCount__):result.__views__.push({size:nativeMin(n,MAX_ARRAY_LENGTH),type:methodName+(result.__dir__<0?"Right":"")}),result};LazyWrapper.prototype[methodName+"Right"]=function(n){return this.reverse()[methodName](n).reverse()}}),arrayEach(["filter","map","takeWhile"],function(methodName,index){var type=index+1,isFilter=type==LAZY_FILTER_FLAG||type==LAZY_WHILE_FLAG;LazyWrapper.prototype[methodName]=function(iteratee){var result=this.clone();return result.__iteratees__.push({iteratee:getIteratee(iteratee,3),type:type}),result.__filtered__=result.__filtered__||isFilter,result}}),arrayEach(["head","last"],function(methodName,index){var takeName="take"+(index?"Right":"");LazyWrapper.prototype[methodName]=function(){return this[takeName](1).value()[0]}}),arrayEach(["initial","tail"],function(methodName,index){var dropName="drop"+(index?"":"Right");LazyWrapper.prototype[methodName]=function(){return this.__filtered__?new LazyWrapper(this):this[dropName](1)}}),LazyWrapper.prototype.compact=function(){return this.filter(identity)},LazyWrapper.prototype.find=function(predicate){return this.filter(predicate).head()},LazyWrapper.prototype.findLast=function(predicate){return this.reverse().find(predicate)},LazyWrapper.prototype.invokeMap=baseRest(function(path,args){return typeof path=="function"?new LazyWrapper(this):this.map(function(value){return baseInvoke(value,path,args)})}),LazyWrapper.prototype.reject=function(predicate){return this.filter(negate(getIteratee(predicate)))},LazyWrapper.prototype.slice=function(start,end){start=toInteger(start);var result=this;return result.__filtered__&&(start>0||end<0)?new LazyWrapper(result):(start<0?result=result.takeRight(-start):start&&(result=result.drop(start)),end!==undefined&&(end=toInteger(end),result=end<0?result.dropRight(-end):result.take(end-start)),result)},LazyWrapper.prototype.takeRightWhile=function(predicate){return this.reverse().takeWhile(predicate).reverse()},LazyWrapper.prototype.toArray=function(){return this.take(MAX_ARRAY_LENGTH)},baseForOwn(LazyWrapper.prototype,function(func,methodName){var checkIteratee=/^(?:filter|find|map|reject)|While$/.test(methodName),isTaker=/^(?:head|last)$/.test(methodName),lodashFunc=lodash[isTaker?"take"+(methodName=="last"?"Right":""):methodName],retUnwrapped=isTaker||/^find/.test(methodName);lodashFunc&&(lodash.prototype[methodName]=function(){var value=this.__wrapped__,args=isTaker?[1]:arguments,isLazy=value instanceof LazyWrapper,iteratee=args[0],useLazy=isLazy||isArray(value),interceptor=function(value){var result=lodashFunc.apply(lodash,arrayPush([value],args));return isTaker&&chainAll?result[0]:result},result;useLazy&&checkIteratee&&typeof iteratee=="function"&&iteratee.length!=1&&(isLazy=useLazy=!1);var chainAll=this.__chain__,isHybrid=!!this.__actions__.length,isUnwrapped=retUnwrapped&&!chainAll,onlyLazy=isLazy&&!isHybrid;return!retUnwrapped&&useLazy?(value=onlyLazy?value:new LazyWrapper(this),result=func.apply(value,args),result.__actions__.push({func:thru,args:[interceptor],thisArg:undefined}),new LodashWrapper(result,chainAll)):isUnwrapped&&onlyLazy?func.apply(this,args):(result=this.thru(interceptor),isUnwrapped?isTaker?result.value()[0]:result.value():result)})}),arrayEach(["pop","push","shift","sort","splice","unshift"],function(methodName){var func=arrayProto[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?"tap":"thru",retUnwrapped=/^(?:pop|shift)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments,value;return retUnwrapped&&!this.__chain__?(value=this.value(),func.apply(isArray(value)?value:[],args)):this[chainName](function(value){return func.apply(isArray(value)?value:[],args)})}}),baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash[methodName],key,names;lodashFunc&&(key=lodashFunc.name+"",names=realNames[key]||(realNames[key]=[]),names.push({name:methodName,func:lodashFunc}))}),realNames[createHybrid(undefined,WRAP_BIND_KEY_FLAG).name]=[{name:"wrapper",func:undefined}],LazyWrapper.prototype.clone=lazyClone,LazyWrapper.prototype.reverse=lazyReverse,LazyWrapper.prototype.value=lazyValue,lodash.prototype.at=wrapperAt,lodash.prototype.chain=wrapperChain,lodash.prototype.commit=wrapperCommit,lodash.prototype.next=wrapperNext,lodash.prototype.plant=wrapperPlant,lodash.prototype.reverse=wrapperReverse,lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=wrapperValue,lodash.prototype.first=lodash.prototype.head,symIterator&&(lodash.prototype[symIterator]=wrapperToIterator),lodash};_=runInContext();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(root._=_,define(function(){return _})):freeModule?((freeModule.exports=_)._=_,freeExports._=_):root._=_}).call(this);
/*!
 * Bootstrap v3.3.4 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher");}(jQuery);+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this,e;a(this).one("bsTransitionEnd",function(){c=!0});return e=function(){c||a(d).trigger(a.support.transition.end)},setTimeout(e,b),this};a(function(){a.support.transition=b();a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){if(a(b.target).is(this))return b.handleObj.handler.apply(this,arguments)}})})}(jQuery);+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this));"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)},e;d.VERSION="3.3.4";d.TRANSITION_DURATION=150;d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target"),g;f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));g=a(f);b&&b.preventDefault();g.length||(g=e.closest(".alert"));g.trigger(b=a.Event("close.bs.alert"));b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};e=a.fn.alert;a.fn.alert=b;a.fn.alert.Constructor=d;a.fn.alert.noConflict=function(){return a.fn.alert=e,this};a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery);+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f));"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b);this.options=a.extend({},c.DEFAULTS,d);this.isLoading=!1},d;c.VERSION="3.3.4";c.DEFAULTS={loadingText:"loading..."};c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text";null==f.resetText&&d.data("resetText",d[e]());setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]);"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)};c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]'),c;b.length?(c=this.$element.find("input"),"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active")),a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")):this.$element.attr("aria-pressed",!this.$element.hasClass("active"));a&&this.$element.toggleClass("active")};d=a.fn.button;a.fn.button=b;a.fn.button.Constructor=c;a.fn.button.noConflict=function(){return a.fn.button=d,this};a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target);d.hasClass("btn")||(d=d.closest(".btn"));b.call(d,"toggle");c.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery);+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f));"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b);this.$indicators=this.$element.find(".carousel-indicators");this.options=c;this.paused=null;this.sliding=null;this.interval=null;this.$active=null;this.$items=null;this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this));"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))},d,e;c.VERSION="3.3.4";c.TRANSITION_DURATION=600;c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0};c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}};c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this};c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)};c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1,e,f;return d&&!this.options.wrap?b:(e="prev"==a?-1:1,f=(c+e)%this.$items.length,this.$items.eq(f))};c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(a>this.$items.length-1)&&!(0>a))return this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))};c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this};c.prototype.next=function(){if(!this.sliding)return this.slide("next")};c.prototype.prev=function(){if(!this.sliding)return this.slide("prev")};c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this,j,k,l,m;return f.hasClass("active")?this.sliding=!1:(j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h}),(this.$element.trigger(k),!k.isDefaultPrevented())?((this.sliding=!0,g&&this.pause(),this.$indicators.length)&&(this.$indicators.find(".active").removeClass("active"),l=a(this.$indicators.children()[this.getItemIndex(f)]),l&&l.addClass("active")),m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h}),a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active");e.removeClass(["active",h].join(" "));i.sliding=!1;setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this):void 0)};d=a.fn.carousel;a.fn.carousel=b;a.fn.carousel.Constructor=c;a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),g,h;f.hasClass("carousel")&&(g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to"),h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault())};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e);a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery);+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1);e||c.data("bs.collapse",e=new d(this,f));"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b);this.options=a.extend({},d.DEFAULTS,c);this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]');this.transitioning=null;this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger);this.options.toggle&&this.toggle()},e;d.VERSION="3.3.4";d.TRANSITION_DURATION=350;d.DEFAULTS={toggle:!0};d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"};d.prototype.show=function(){var b,e,f,g,h,i;if(!this.transitioning&&!this.$element.hasClass("in")&&(e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing"),!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))&&(f=a.Event("show.bs.collapse"),this.$element.trigger(f),!f.isDefaultPrevented()))){if(e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null)),g=this.dimension(),this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1,h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")},!a.support.transition)return h.call(this);i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}};d.prototype.hide=function(){var b,c,e;if(!this.transitioning&&this.$element.hasClass("in")&&(b=a.Event("hide.bs.collapse"),this.$element.trigger(b),!b.isDefaultPrevented()))return c=this.dimension(),this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1,e=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")},a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)};d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()};d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c);b.toggleClass("collapsed",!c).attr("aria-expanded",c)};e=a.fn.collapse;a.fn.collapse=c;a.fn.collapse.Constructor=d;a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this};a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery);+function(a){"use strict";function b(b){b&&3===b.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=c(d),f={relatedTarget:this};e.hasClass("open")&&(e.trigger(b=a.Event("hide.bs.dropdown",f)),b.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger("hidden.bs.dropdown",f)))}))}function c(b){var c=b.attr("data-target"),d;return c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,"")),d=c&&a(c),d&&d.length?d:b.parent()}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this));"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)},h;g.VERSION="3.3.4";g.prototype.toggle=function(d){var e=a(this),f,g,h;if(!e.is(".disabled, :disabled")){if(f=c(e),g=f.hasClass("open"),b(),!g){if("ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b),h={relatedTarget:this},f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true");f.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}};g.prototype.keydown=function(b){var d,e,g,h,i,j;if(/(38|40|27|32)/.test(b.which)&&!/input|textarea/i.test(b.target.tagName)&&(d=a(this),b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled"))){if(e=c(d),g=e.hasClass("open"),!g&&27!=b.which||g&&27==b.which)return 27==b.which&&e.find(f).trigger("focus"),d.trigger("click");h=" li:not(.disabled):visible a";i=e.find('[role="menu"]'+h+', [role="listbox"]'+h);i.length&&(j=i.index(b.target),38==b.which&&j>0&&j--,40==b.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus"))}};h=a.fn.dropdown;a.fn.dropdown=d;a.fn.dropdown.Constructor=g;a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this};a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',g.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',g.prototype.keydown)}(jQuery);+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g));"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c;this.$body=a(document.body);this.$element=a(b);this.$dialog=this.$element.find(".modal-dialog");this.$backdrop=null;this.isShown=null;this.originalBodyPad=null;this.scrollbarWidth=0;this.ignoreBackdropClick=!1;this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))},d;c.VERSION="3.3.4";c.TRANSITION_DURATION=300;c.BACKDROP_TRANSITION_DURATION=150;c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)};c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e);this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade"),f;d.$element.parent().length||d.$element.appendTo(d.$body);d.$element.show().scrollTop(0);d.adjustDialog();e&&d.$element[0].offsetWidth;d.$element.addClass("in").attr("aria-hidden",!1);d.enforceFocus();f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))};c.prototype.hide=function(b){b&&b.preventDefault();b=a.Event("hide.bs.modal");this.$element.trigger(b);this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())};c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))};c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")};c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")};c.prototype.hideModal=function(){var a=this;this.$element.hide();this.backdrop(function(){a.$body.removeClass("modal-open");a.resetAdjustments();a.resetScrollbar();a.$element.trigger("hidden.bs.modal")})};c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"",f,g;if(this.isShown&&this.options.backdrop){if(f=a.support.transition&&e,this.$backdrop=a('<div class="modal-backdrop '+e+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),g=function(){d.removeBackdrop();b&&b()},a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()):b&&b()};c.prototype.handleUpdate=function(){this.adjustDialog()};c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})};c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};c.prototype.checkScrollbar=function(){var a=window.innerWidth,b;a||(b=document.documentElement.getBoundingClientRect(),a=b.right-Math.abs(b.left));this.bodyIsOverflowing=document.body.clientWidth<a;this.scrollbarWidth=this.measureScrollbar()};c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)};c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)};c.prototype.measureScrollbar=function(){var a=document.createElement("div"),b;return a.className="modal-scrollbar-measure",this.$body.append(a),b=a.offsetWidth-a.clientWidth,this.$body[0].removeChild(a),b};d=a.fn.modal;a.fn.modal=b;a.fn.modal.Constructor=c;a.fn.modal.noConflict=function(){return a.fn.modal=d,this};a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault();f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})});b.call(f,g,this)})}(jQuery);+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null;this.options=null;this.enabled=null;this.timeout=null;this.hoverState=null;this.$element=null;this.init("tooltip",a,b)},d;c.VERSION="3.3.4";c.TRANSITION_DURATION=150;c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"><\/div><div class="tooltip-inner"><\/div><\/div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}};c.prototype.init=function(b,c,d){var e,f,g,h,i;if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(e=this.options.trigger.split(" "),f=e.length;f--;)if(g=e[f],"click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else"manual"!=g&&(h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout",this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this)));this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};c.prototype.getDefaults=function(){return c.DEFAULTS};c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b};c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b};c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c&&c.$tip&&c.$tip.is(":visible")?void(c.hoverState="in"):(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())};c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()};c.prototype.show=function(){var b=a.Event("show.bs."+this.type),d,q,r;if(this.hasContent()&&this.enabled){if(this.$element.trigger(b),d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]),b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent();f.attr("id",g);this.$element.attr("aria-describedby",g);this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top");f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this);this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.options.container?a(this.options.container):this.$element.parent(),p=this.getPosition(o);h="bottom"==h&&k.bottom+m>p.bottom?"top":"top"==h&&k.top-m<p.top?"bottom":"right"==h&&k.right+l>p.width?"left":"left"==h&&k.left-l<p.left?"right":h;f.removeClass(n).addClass(h)}q=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(q,h);r=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type);e.hoverState=null;"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",r).emulateTransitionEnd(c.TRANSITION_DURATION):r()}};c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10),i,j,k;isNaN(g)&&(g=0);isNaN(h)&&(h=0);b.top=b.top+g;b.left=b.left+h;a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0);d.addClass("in");i=d[0].offsetWidth;j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b);this.replaceArrow(m,d[0][n],l)};c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")};c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b);a.removeClass("fade in top bottom left right")};c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach();e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type);b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this)};c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")};c.prototype.hasContent=function(){return this.getTitle()};c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=d?{top:0,left:0}:b.offset(),g={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},h=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,g,h,f)};c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}};c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0},f,g,h,i,j,k;return this.$viewport?(f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport),/right|left/.test(a)?(h=b.top-f-g.scroll,i=b.top+f-g.scroll+d,h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)):(j=b.left-f,k=b.left+f+c,j<g.left?e.left=g.left-j:k>g.width&&(e.left=g.left+g.width-k)),e):e};c.prototype.getTitle=function(){var b=this.$element,c=this.options;return b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)};c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a};c.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)};c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};c.prototype.enable=function(){this.enabled=!0};c.prototype.disable=function(){this.enabled=!1};c.prototype.toggleEnabled=function(){this.enabled=!this.enabled};c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)));c.tip().hasClass("in")?c.leave(c):c.enter(c)};c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout);this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type)})};d=a.fn.tooltip;a.fn.tooltip=b;a.fn.tooltip.Constructor=c;a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery);+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)},d;if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.4";c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"><\/div><h3 class="popover-title"><\/h3><div class="popover-content"><\/div><\/div>'});c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype);c.prototype.constructor=c;c.prototype.getDefaults=function(){return c.DEFAULTS};c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b);a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c);a.removeClass("fade top bottom left right in");a.find(".popover-title").html()||a.find(".popover-title").hide()};c.prototype.hasContent=function(){return this.getTitle()||this.getContent()};c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)};c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};d=a.fn.popover;a.fn.popover=b;a.fn.popover.Constructor=c;a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery);+function(a){"use strict";function b(c,d){this.$body=a(document.body);this.$scrollElement=a(a(c).is(document.body)?window:c);this.options=a.extend({},b.DEFAULTS,d);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this));this.refresh();this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f));"string"==typeof c&&e[c]()})}b.VERSION="3.3.4";b.DEFAULTS={offset:10};b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop());this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]);b.targets.push(this[1])})};b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])};b.prototype.activate=function(b){this.activeTarget=b;this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active"));d.trigger("activate.bs.scrollspy")};b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c;a.fn.scrollspy.Constructor=b;a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this};a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery);+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this));"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)},d,e;c.VERSION="3.3.4";c.TRANSITION_DURATION=150;c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target"),h;if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});(e.trigger(f),b.trigger(g),g.isDefaultPrevented()||f.isDefaultPrevented())||(h=a(d),this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]});b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})}))}};c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1);b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0);h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade");b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0);e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f();g.removeClass("in")};d=a.fn.tab;a.fn.tab=b;a.fn.tab.Constructor=c;a.fn.tab.noConflict=function(){return a.fn.tab=d,this};e=function(c){c.preventDefault();b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery);+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f));"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d);this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this));this.$element=a(b);this.affixed=null;this.unpin=null;this.pinnedOffset=null;this.checkPosition()},d;c.VERSION="3.3.4";c.RESET="affix affix-top affix-bottom";c.DEFAULTS={offset:0,target:window};c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return c>e?"top":!1;if("bottom"==this.affixed)return null!=c?e+this.unpin<=f.top?!1:"bottom":a-d>=e+g?!1:"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&c>=e?"top":null!=d&&i+j>=a-d?"bottom":!1};c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a};c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)};c.prototype.checkPosition=function(){var h,i,j;if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=a(document.body).height();if("object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element)),h=this.getState(g,b,e,f),this.affixed!=h){if(null!=this.unpin&&this.$element.css("top",""),i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix"),this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h;this.unpin="bottom"==h?this.getPinnedOffset():null;this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};d=a.fn.affix;a.fn.affix=b;a.fn.affix.Constructor=c;a.fn.affix.noConflict=function(){return a.fn.affix=d,this};a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{};null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom);null!=d.offsetTop&&(d.offset.top=d.offsetTop);b.call(c,d)})})}(jQuery),function(factory){typeof define=="function"?window.define.amd?window.define("wangEditor",["jquery"],factory):window.define.cmd?window.define(function(){return factory}):factory(window.jQuery):typeof module=="object"&&typeof module.exports=="object"?(window.wangEditorCssPath?require(window.wangEditorCssPath):require("../css/wangEditor.css"),module.exports=factory(window.wangEditorJQueryPath?require(window.wangEditorJQueryPath):require("jquery"))):factory(window.jQuery)}(function($){if(!$||!$.fn||!$.fn.jquery){alert("在引用wangEditor.js之前，先引用jQuery，否则无法使用 wangEditor");return}var _e=function(fn){var E=window.wangEditor;E&&fn(E,$)};return function(window,$){if(window.wangEditor){alert("一个页面不能重复引用 wangEditor.js 或 wangEditor.min.js ！！！");return}var E=function(elem){var $elem,nodeName;(typeof elem=="string"&&(elem="#"+elem),$elem=$(elem),$elem.length===1)&&(nodeName=$elem[0].nodeName,nodeName==="TEXTAREA"||nodeName==="DIV")&&(this.valueNodeName=nodeName.toLowerCase(),this.$valueContainer=$elem,this.$prev=$elem.prev(),this.$parent=$elem.parent(),this.init())};E.fn=E.prototype;E.$body=$("body");E.$document=$(document);E.$window=$(window);E.userAgent=navigator.userAgent;E.getComputedStyle=window.getComputedStyle;E.w3cRange=typeof document.createRange=="function";E.hostname=location.hostname.toLowerCase();E.websiteHost="wangeditor.github.io|www.wangeditor.com|wangeditor.coding.me";E.isOnWebsite=E.websiteHost.indexOf(E.hostname)>=0;E.docsite="http://www.kancloud.cn/wangfupeng/wangeditor2/113961";window.wangEditor=E;E.plugin=function(fn){E._plugins||(E._plugins=[]);typeof fn=="function"&&E._plugins.push(fn)}}(window,$),_e(function(E){E.fn.init=function(){this.initDefaultConfig();this.addEditorContainer();this.addTxt();this.addMenuContainer();this.menus={};this.commandHooks()}}),_e(function(E,$){E.fn.ready=function(fn){this.readyFns||(this.readyFns=[]);this.readyFns.push(fn)};E.fn.readyHeadler=function(){for(var fns=this.readyFns;fns.length;)fns.shift().call(this)};E.fn.updateValue=function(){var editor=this,$valueContainer=editor.$valueContainer,$txt=editor.txt.$txt,value;$valueContainer!==$txt&&(value=$txt.html(),$valueContainer.val(value))};E.fn.getInitValue=function(){var editor=this,$valueContainer=editor.$valueContainer,currentValue="",nodeName=editor.valueNodeName;return nodeName==="div"?currentValue=$valueContainer.html():nodeName==="textarea"&&(currentValue=$valueContainer.val()),currentValue};E.fn.updateMenuStyle=function(){var menus=this.menus;$.each(menus,function(k,menu){menu.updateSelected()})};E.fn.enableMenusExcept=function(menuIds){this._disabled||(menuIds=menuIds||[],typeof menuIds=="string"&&(menuIds=[menuIds]),$.each(this.menus,function(k,menu){menuIds.indexOf(k)>=0||menu.disabled(!1)}))};E.fn.disableMenusExcept=function(menuIds){this._disabled||(menuIds=menuIds||[],typeof menuIds=="string"&&(menuIds=[menuIds]),$.each(this.menus,function(k,menu){menuIds.indexOf(k)>=0||menu.disabled(!0)}))};E.fn.hideDropPanelAndModal=function(){var menus=this.menus;$.each(menus,function(k,menu){var m=menu.dropPanel||menu.dropList||menu.modal;m&&m.hide&&m.hide()})}}),_e(function(E,$){function emptyFn(){}var ieRange=!E.w3cRange;E.fn.currentRange=function(cr){if(cr)this._rangeData=cr;else return this._rangeData};E.fn.collapseRange=function(range,opt){opt=opt||"end";opt=opt==="start"?!0:!1;range=range||this.currentRange();range&&(range.collapse(opt),this.currentRange(range))};E.fn.getRangeText=ieRange?emptyFn:function(range){if(range=range||this.currentRange(),range)return range.toString()};E.fn.getRangeElem=ieRange?emptyFn:function(range){range=range||this.currentRange();var dom=range.commonAncestorContainer;return dom.nodeType===1?dom:dom.parentNode};E.fn.isRangeEmpty=ieRange?emptyFn:function(range){return(range=range||this.currentRange(),range&&range.startContainer&&range.startContainer===range.endContainer&&range.startOffset===range.endOffset)?!0:!1};E.fn.saveSelection=ieRange?emptyFn:function(range){var self=this,_parentElem,selection,txt=self.txt.$txt.get(0);range?_parentElem=range.commonAncestorContainer:(selection=document.getSelection(),selection.getRangeAt&&selection.rangeCount&&(range=document.getSelection().getRangeAt(0),_parentElem=range.commonAncestorContainer));_parentElem&&($.contains(txt,_parentElem)||txt===_parentElem)&&self.currentRange(range)};E.fn.restoreSelection=ieRange?emptyFn:function(range){var selection;if(range=range||this.currentRange(),range)try{selection=document.getSelection();selection.removeAllRanges();selection.addRange(range)}catch(ex){E.error("执行 editor.restoreSelection 时，IE可能会有异常，不影响使用")}};E.fn.restoreSelectionByElem=ieRange?emptyFn:function(elem,opt){elem&&(opt=opt||"end",this.setRangeByElem(elem),opt==="start"&&this.collapseRange(this.currentRange(),"start"),opt==="end"&&this.collapseRange(this.currentRange(),"end"),this.restoreSelection())};E.fn.initSelection=ieRange?emptyFn:function(){var editor=this,$txt,$firstChild;editor.currentRange()||($txt=editor.txt.$txt,$firstChild=$txt.children().first(),$firstChild.length&&editor.restoreSelectionByElem($firstChild.get(0)))};E.fn.setRangeByElem=ieRange?emptyFn:function(elem){var editor=this,txtElem=editor.txt.$txt.get(0),firstTextNode,lastTextNode,range;if(elem&&$.contains(txtElem,elem)){for(firstTextNode=elem.firstChild;firstTextNode;){if(firstTextNode.nodeType===3)break;firstTextNode=firstTextNode.firstChild}for(lastTextNode=elem.lastChild;lastTextNode;){if(lastTextNode.nodeType===3)break;lastTextNode=lastTextNode.lastChild}range=document.createRange();firstTextNode&&lastTextNode?(range.setStart(firstTextNode,0),range.setEnd(lastTextNode,lastTextNode.textContent.length)):(range.setStart(elem,0),range.setEnd(elem,0));editor.saveSelection(range)}}}),_e(function(E,$){E.w3cRange||(E.fn.getRangeText=function(range){if(range=range||this.currentRange(),range)return range.text},E.fn.getRangeElem=function(range){if(range=range||this.currentRange(),range){var dom=range.parentElement();return dom.nodeType===1?dom:dom.parentNode}},E.fn.isRangeEmpty=function(range){return(range=range||this.currentRange(),range&&range.text)?!1:!0},E.fn.saveSelection=function(range){var self=this,_parentElem,txt=self.txt.$txt.get(0);range?_parentElem=range.parentElement():(range=document.selection.createRange(),_parentElem=typeof range.parentElement=="undefined"?null:range.parentElement());_parentElem&&($.contains(txt,_parentElem)||txt===_parentElem)&&self.currentRange(range)},E.fn.restoreSelection=function(currentRange){var editor=this,range;if(currentRange=currentRange||editor.currentRange(),currentRange){range=document.selection.createRange();try{range.setEndPoint("EndToEnd",currentRange)}catch(ex){}if(currentRange.text.length===0)try{range.collapse(!1)}catch(ex){}else range.setEndPoint("StartToStart",currentRange);range.select()}})}),_e(function(E,$){E.fn.commandHooks=function(){var editor=this,commandHooks={};commandHooks.insertHtml=function(html){var $elem=$(html),rangeElem=editor.getRangeElem(),targetElem;(targetElem=editor.getLegalTags(rangeElem),targetElem)&&$(targetElem).after($elem)};editor.commandHooks=commandHooks}}),_e(function(E){E.fn.command=function(e,commandName,commandValue,callback){function commandFn(){commandName&&(editor.queryCommandSupported(commandName)?document.execCommand(commandName,!1,commandValue):(hooks=editor.commandHooks,commandName in hooks&&hooks[commandName](commandValue)))}var editor=this,hooks;this.customCommand(e,commandFn,callback)};E.fn.commandForElem=function(elemOpt,e,commandName,commandValue,callback){var selector,check,rangeElem;typeof elemOpt=="string"?selector=elemOpt:(selector=elemOpt.selector,check=elemOpt.check);rangeElem=this.getRangeElem();rangeElem=this.getSelfOrParentByName(rangeElem,selector,check);rangeElem&&this.setRangeByElem(rangeElem);this.command(e,commandName,commandValue,callback)};E.fn.customCommand=function(e,commandFn,callback){function hidePanelAndModal(){editor.hideDropPanelAndModal()}var editor=this,range=editor.currentRange();if(!range){e&&e.preventDefault();return}editor.undoRecord();this.restoreSelection(range);commandFn.call(editor);this.saveSelection();this.restoreSelection();callback&&typeof callback=="function"&&callback.call(editor);editor.txt.insertEmptyP();editor.txt.wrapImgAndText();editor.updateValue();editor.updateMenuStyle();setTimeout(hidePanelAndModal,200);e&&e.preventDefault()};E.fn.queryCommandValue=function(commandName){var result="";try{result=document.queryCommandValue(commandName)}catch(ex){}return result};E.fn.queryCommandState=function(commandName){var result=!1;try{result=document.queryCommandState(commandName)}catch(ex){}return result};E.fn.queryCommandSupported=function(commandName){var result=!1;try{result=document.queryCommandSupported(commandName)}catch(ex){}return result}}),_e(function(E,$){function _matchesSelectorForIE(selector){var elem=this,$elems=$(selector),result=!1;return $elems.each(function(){if(this===elem)return result=!0,!1}),result}var matchesSelector;E.fn.getLegalTags=function(elem){var legalTags=this.config.legalTags;if(!legalTags){E.error("配置项中缺少 legalTags 的配置");return}return this.getSelfOrParentByName(elem,legalTags)};E.fn.getSelfOrParentByName=function(elem,selector,check){if(elem&&selector){matchesSelector||(matchesSelector=elem.webkitMatchesSelector||elem.mozMatchesSelector||elem.oMatchesSelector||elem.matchesSelector);matchesSelector||(matchesSelector=_matchesSelectorForIE);for(var txt=this.txt.$txt.get(0);elem&&txt!==elem&&$.contains(txt,elem);){if(matchesSelector.call(elem,selector)&&(!check||check(elem)))return elem;elem=elem.parentNode}return}}}),_e(function(E){function _getRedoList(editor){return editor._redoList==null&&(editor._redoList=[]),editor._redoList}function _getUndoList(editor){return editor._undoList==null&&(editor._undoList=[]),editor._undoList}function _handle(editor,data,type){var val=data.val,html=editor.txt.$txt.html();if(val!=null){if(val===html){if(type==="redo"){editor.redo();return}if(type==="undo"){editor.undo();return}return}editor.txt.$txt.html(val);editor.updateValue();editor.onchange&&typeof editor.onchange=="function"&&editor.onchange.call(editor)}}var length=20;E.fn.undoRecord=function(){var editor=this,$txt=editor.txt.$txt,val=$txt.html(),undoList=_getUndoList(editor),redoList=_getRedoList(editor),currentVal=undoList.length?undoList[0]:"";val!==currentVal.val&&(redoList.length&&(redoList=[]),undoList.unshift({range:editor.currentRange(),val:val}),undoList.length>length&&undoList.pop())};E.fn.undo=function(){var editor=this,undoList=_getUndoList(editor),redoList=_getRedoList(editor),data;undoList.length&&(data=undoList.shift(),redoList.unshift(data),_handle(this,data,"undo"))};E.fn.redo=function(){var editor=this,undoList=_getUndoList(editor),redoList=_getRedoList(editor),data;redoList.length&&(data=redoList.shift(),undoList.unshift(data),_handle(this,data,"redo"))}}),_e(function(E,$){E.fn.create=function(){var editor=this,_plugins;E.$body&&E.$body.length!==0||(E.$body=$("body"),E.$document=$(document),E.$window=$(window));editor.addMenus();editor.renderMenus();editor.renderMenuContainer();editor.renderTxt();editor.renderEditorContainer();editor.eventMenus();editor.eventMenuContainer();editor.eventTxt();editor.readyHeadler();editor.initSelection();editor.$txt=editor.txt.$txt;_plugins=E._plugins;_plugins&&_plugins.length&&$.each(_plugins,function(k,val){val.call(editor)})};E.fn.disable=function(){this.txt.$txt.removeAttr("contenteditable");this.disableMenusExcept();this._disabled=!0};E.fn.enable=function(){this._disabled=!1;this.txt.$txt.attr("contenteditable","true");this.enableMenusExcept()};E.fn.destroy=function(){var self=this,$valueContainer=self.$valueContainer,$editorContainer=self.$editorContainer,valueNodeName=self.valueNodeName;valueNodeName==="div"?($valueContainer.removeAttr("contenteditable"),$editorContainer.after($valueContainer),$editorContainer.hide()):($valueContainer.show(),$editorContainer.hide())};E.fn.undestroy=function(){var self=this,$valueContainer=self.$valueContainer,$editorContainer=self.$editorContainer,$menuContainer=self.menuContainer.$menuContainer,valueNodeName=self.valueNodeName;valueNodeName==="div"?($valueContainer.attr("contenteditable","true"),$menuContainer.after($valueContainer),$editorContainer.show()):($valueContainer.hide(),$editorContainer.show())};E.fn.clear=function(){var editor=this,$txt=editor.txt.$txt;$txt.html("<p><br><\/p>");editor.restoreSelectionByElem($txt.find("p").get(0))}}),_e(function(E){var MenuContainer=function(editor){this.editor=editor;this.init()};MenuContainer.fn=MenuContainer.prototype;E.MenuContainer=MenuContainer}),_e(function(E,$){var MenuContainer=E.MenuContainer;MenuContainer.fn.init=function(){var self=this,$menuContainer=$('<div class="wangEditor-menu-container clearfix"><\/div>');self.$menuContainer=$menuContainer;self.changeShadow()};MenuContainer.fn.changeShadow=function(){var $menuContainer=this.$menuContainer,editor=this.editor,$txt=editor.txt.$txt;$txt.on("scroll",function(){$txt.scrollTop()>10?$menuContainer.addClass("wangEditor-menu-shadow"):$menuContainer.removeClass("wangEditor-menu-shadow")})}}),_e(function(E,$){var MenuContainer=E.MenuContainer;MenuContainer.fn.render=function(){var $menuContainer=this.$menuContainer,$editorContainer=this.editor.$editorContainer;$editorContainer.append($menuContainer)};MenuContainer.fn.height=function(){var $menuContainer=this.$menuContainer;return $menuContainer.height()};MenuContainer.fn.appendMenu=function(groupIdx,menu){return this._addGroup(groupIdx),this._addOneMenu(menu)};MenuContainer.fn._addGroup=function(groupIdx){var $menuContainer=this.$menuContainer,$menuGroup;this.$currentGroup&&this.currentGroupIdx===groupIdx||($menuGroup=$('<div class="menu-group clearfix"><\/div>'),$menuContainer.append($menuGroup),this.$currentGroup=$menuGroup,this.currentGroupIdx=groupIdx)};MenuContainer.fn._addOneMenu=function(menu){var $menuNormal=menu.$domNormal,$menuSelected=menu.$domSelected,$menuGroup=this.$currentGroup,$item=$('<div class="menu-item clearfix"><\/div>');return $menuSelected.hide(),$item.append($menuNormal).append($menuSelected),$menuGroup.append($item),$item}}),_e(function(E){var Menu=function(opt){this.editor=opt.editor;this.id=opt.id;this.title=opt.title;this.$domNormal=opt.$domNormal;this.$domSelected=opt.$domSelected||opt.$domNormal;this.commandName=opt.commandName;this.commandValue=opt.commandValue;this.commandNameSelected=opt.commandNameSelected||opt.commandName;this.commandValueSelected=opt.commandValueSelected||opt.commandValue};Menu.fn=Menu.prototype;E.Menu=Menu}),_e(function(E,$){var Menu=E.Menu;Menu.fn.initUI=function(){var editor=this.editor,uiConfig=editor.UI.menus,menuId=this.id,menuUI=uiConfig[menuId];this.$domNormal&&this.$domSelected||(menuUI==null&&(E.warn('editor.UI配置中，没有菜单 "'+menuId+'" 的UI配置，只能取默认值'),menuUI=uiConfig["default"]),this.$domNormal=$(menuUI.normal),this.$domSelected=/^\./.test(menuUI.selected)?this.$domNormal.clone().addClass(menuUI.selected.slice(1)):$(menuUI.selected))}}),_e(function(E,$){var Menu=E.Menu;Menu.fn.render=function(groupIdx){this.initUI();var editor=this.editor,menuContainer=editor.menuContainer,$menuItem=menuContainer.appendMenu(groupIdx,this),onRender=this.onRender;this._renderTip($menuItem);onRender&&typeof onRender=="function"&&onRender.call(this)};Menu.fn._renderTip=function($menuItem){function show(){$tip.show()}function hide(){$tip.hide()}var self=this,editor=self.editor,title=self.title,$tip=$('<div class="menu-tip"><\/div>'),$tempDiv,timeoutId;self.tipWidth||($tempDiv=$('<p style="opacity:0; filter:Alpha(opacity=0); position:absolute;top:-10000px;">'+title+"<\/p>"),E.$body.append($tempDiv),editor.ready(function(){var editor=this,titleWidth=$tempDiv.outerWidth()+5,currentWidth=$tip.outerWidth(),currentMarginLeft=parseFloat($tip.css("margin-left"),10);$tempDiv.remove();$tempDiv=null;$tip.css({width:titleWidth,"margin-left":currentMarginLeft+(currentWidth-titleWidth)/2});self.tipWidth=titleWidth}));$tip.append(title);$menuItem.append($tip);$menuItem.find("a").on("mouseenter",function(){self.active()||self.disabled()||(timeoutId=setTimeout(show,200))}).on("mouseleave",function(){timeoutId&&clearTimeout(timeoutId);hide()}).on("click",hide)};Menu.fn.bindEvent=function(){var self=this,$domNormal=self.$domNormal,$domSelected=self.$domSelected,clickEvent=self.clickEvent,clickEventSelected;clickEvent||(clickEvent=function(e){var dropObj=self.dropPanel||self.dropList||self.modal,editor,commandName,commandValue,selected;if(dropObj&&dropObj.show){dropObj.isShowing?dropObj.hide():dropObj.show();return}editor=self.editor;selected=self.selected;selected?(commandName=self.commandNameSelected,commandValue=self.commandValueSelected):(commandName=self.commandName,commandValue=self.commandValue);commandName?editor.command(e,commandName,commandValue):(E.warn('菜单 "'+self.id+'" 未定义click事件'),e.preventDefault())});clickEventSelected=self.clickEventSelected||clickEvent;$domNormal.click(function(e){self.disabled()||(clickEvent.call(self,e),self.updateSelected());e.preventDefault()});$domSelected.click(function(e){self.disabled()||(clickEventSelected.call(self,e),self.updateSelected());e.preventDefault()})};Menu.fn.updateSelected=function(){var self=this,editor=self.editor,updateSelectedEvent=self.updateSelectedEvent,result;updateSelectedEvent||(updateSelectedEvent=function(){var self=this,editor=self.editor,commandName=self.commandName,commandValue=self.commandValue;if(commandValue){if(editor.queryCommandValue(commandName).toLowerCase()===commandValue.toLowerCase())return!0}else if(editor.queryCommandState(commandName))return!0;return!1});result=updateSelectedEvent.call(self);result=!!result;self.changeSelectedState(result)};Menu.fn.changeSelectedState=function(state){var self=this,selected=self.selected;if(state!=null&&typeof state=="boolean"){if(selected===state)return;self.selected=state;state?(self.$domNormal.hide(),self.$domSelected.show()):(self.$domNormal.show(),self.$domSelected.hide())}};Menu.fn.active=function(active){if(active==null)return this._activeState;this._activeState=active};Menu.fn.activeStyle=function(active){var selected=this.selected,$dom=this.$domNormal,$domSelected=this.$domSelected;active?($dom.addClass("active"),$domSelected.addClass("active")):($dom.removeClass("active"),$domSelected.removeClass("active"));this.active(active)};Menu.fn.disabled=function(opt){if(opt==null)return!!this._disabled;if(this._disabled!==opt){var $dom=this.$domNormal,$domSelected=this.$domSelected;opt?($dom.addClass("disable"),$domSelected.addClass("disable")):($dom.removeClass("disable"),$domSelected.removeClass("disable"));this._disabled=opt}}}),_e(function(E){var DropList=function(editor,menu,opt){this.editor=editor;this.menu=menu;this.data=opt.data;this.tpl=opt.tpl;this.selectorForELemCommand=opt.selectorForELemCommand;this.beforeEvent=opt.beforeEvent;this.afterEvent=opt.afterEvent;this.init()};DropList.fn=DropList.prototype;E.DropList=DropList}),_e(function(E,$){var DropList=E.DropList;DropList.fn.init=function(){var self=this;self.initDOM();self.bindEvent();self.initHideEvent()};DropList.fn.initDOM=function(){var self=this,data=self.data,tpl=self.tpl||"<span>{#title}<\/span>",$list=$('<div class="wangEditor-drop-list clearfix"><\/div>'),itemContent,$item;$.each(data,function(commandValue,title){itemContent=tpl.replace(/{#commandValue}/ig,commandValue).replace(/{#title}/ig,title);$item=$('<a href="#" commandValue="'+commandValue+'"><\/a>');$item.append(itemContent);$list.append($item)});self.$list=$list};DropList.fn.bindEvent=function(){var self=this,editor=self.editor,menu=self.menu,commandName=menu.commandName,selectorForELemCommand=self.selectorForELemCommand,$list=self.$list,beforeEvent=self.beforeEvent,afterEvent=self.afterEvent;$list.on("click","a[commandValue]",function(e){beforeEvent&&typeof beforeEvent=="function"&&beforeEvent.call(e);var commandValue=$(e.currentTarget).attr("commandValue");menu.selected&&editor.isRangeEmpty()&&selectorForELemCommand?editor.commandForElem(selectorForELemCommand,e,commandName,commandValue):editor.command(e,commandName,commandValue);afterEvent&&typeof afterEvent=="function"&&afterEvent.call(e)})};DropList.fn.initHideEvent=function(){var self=this,thisList=self.$list.get(0);E.$body.on("click",function(e){if(self.isShowing){var trigger=e.target,menu=self.menu,menuDom;(menuDom=menu.selected?menu.$domSelected.get(0):menu.$domNormal.get(0),menuDom===trigger||$.contains(menuDom,trigger))||thisList===trigger||$.contains(thisList,trigger)||self.hide()}});E.$window.scroll(function(){self.hide()});E.$window.on("resize",function(){self.hide()})}}),_e(function(E){var DropList=E.DropList;DropList.fn._render=function(){var self=this,editor=self.editor,$list=self.$list;editor.$editorContainer.append($list);self.rendered=!0};DropList.fn._position=function(){var self=this,$list=self.$list,editor=self.editor,menu=self.menu,$menuContainer=editor.menuContainer.$menuContainer,$menuDom=menu.selected?menu.$domSelected:menu.$domNormal,menuPosition=$menuDom.offsetParent().position(),menuTop=menuPosition.top,menuLeft=menuPosition.left,menuHeight=$menuDom.offsetParent().height(),menuWidth=$menuDom.offsetParent().width(),listWidth=$list.outerWidth(),txtWidth=editor.txt.$txt.outerWidth(),top=menuTop+menuHeight,left=menuLeft+menuWidth/2,marginLeft=0-menuWidth/2,valWithTxt=left+listWidth-txtWidth;valWithTxt>-10&&(marginLeft=marginLeft-valWithTxt-10);$list.css({top:top,left:left,"margin-left":marginLeft});editor._isMenufixed&&(top=top+($menuContainer.offset().top+$menuContainer.outerHeight()-$list.offset().top),$list.css({top:top}))};DropList.fn.show=function(){var self=this,menu=self.menu,$list;(self.rendered||self._render(),self.isShowing)||($list=self.$list,$list.show(),self._position(),self.isShowing=!0,menu.activeStyle(!0))};DropList.fn.hide=function(){var self=this,menu=self.menu,$list;self.isShowing&&($list=self.$list,$list.hide(),self.isShowing=!1,menu.activeStyle(!1))}}),_e(function(E){var DropPanel=function(editor,menu,opt){this.editor=editor;this.menu=menu;this.$content=opt.$content;this.width=opt.width||200;this.height=opt.height;this.onRender=opt.onRender;this.init()};DropPanel.fn=DropPanel.prototype;E.DropPanel=DropPanel}),_e(function(E,$){var DropPanel=E.DropPanel;DropPanel.fn.init=function(){var self=this;self.initDOM();self.initHideEvent()};DropPanel.fn.initDOM=function(){var self=this,$content=self.$content,width=self.width,height=self.height,$panel=$('<div class="wangEditor-drop-panel clearfix"><\/div>'),$triangle=$('<div class="tip-triangle"><\/div>');$panel.css({width:width,height:height?height:"auto"});$panel.append($triangle);$panel.append($content);self.$panel=$panel;self.$triangle=$triangle};DropPanel.fn.initHideEvent=function(){var self=this,thisPanle=self.$panel.get(0);E.$body.on("click",function(e){if(self.isShowing){var trigger=e.target,menu=self.menu,menuDom;(menuDom=menu.selected?menu.$domSelected.get(0):menu.$domNormal.get(0),menuDom===trigger||$.contains(menuDom,trigger))||thisPanle===trigger||$.contains(thisPanle,trigger)||self.hide()}});E.$window.scroll(function(){self.hide()});E.$window.on("resize",function(){self.hide()})}}),_e(function(E,$){var DropPanel=E.DropPanel;DropPanel.fn._render=function(){var self=this,onRender=self.onRender,editor=self.editor,$panel=self.$panel;editor.$editorContainer.append($panel);onRender&&onRender.call(self);self.rendered=!0};DropPanel.fn._position=function(){var self=this,$panel=self.$panel,$triangle=self.$triangle,editor=self.editor,$menuContainer=editor.menuContainer.$menuContainer,menu=self.menu,$menuDom=menu.selected?menu.$domSelected:menu.$domNormal,menuPosition=$menuDom.offsetParent().position(),menuTop=menuPosition.top,menuLeft=menuPosition.left,menuHeight=$menuDom.offsetParent().height(),menuWidth=$menuDom.offsetParent().width(),panelWidth=$panel.outerWidth(),txtWidth=editor.txt.$txt.outerWidth(),top=menuTop+menuHeight,left=menuLeft+menuWidth/2,marginLeft=0-panelWidth/2,marginLeft2=marginLeft,valWithTxt;0-marginLeft>left-10&&(marginLeft=10-left);valWithTxt=left+panelWidth+marginLeft-txtWidth;valWithTxt>-10&&(marginLeft=marginLeft-valWithTxt-10);$panel.css({top:top,left:left,"margin-left":marginLeft});editor._isMenufixed&&(top=top+($menuContainer.offset().top+$menuContainer.outerHeight()-$panel.offset().top),$panel.css({top:top}));$triangle.css({"margin-left":marginLeft2-marginLeft-5})};DropPanel.fn.focusFirstInput=function(){var self=this,$panel=self.$panel;$panel.find("input[type=text],textarea").each(function(){var $input=$(this);if($input.attr("disabled")==null)return $input.focus(),!1})};DropPanel.fn.show=function(){var self=this,menu=self.menu,$panel;(self.rendered||self._render(),self.isShowing)||($panel=self.$panel,$panel.show(),self._position(),self.isShowing=!0,menu.activeStyle(!0),E.w3cRange?self.focusFirstInput():E.placeholderForIE8($panel))};DropPanel.fn.hide=function(){var self=this,menu=self.menu,$panel;self.isShowing&&($panel=self.$panel,$panel.hide(),self.isShowing=!1,menu.activeStyle(!1))}}),_e(function(E){var Modal=function(editor,menu,opt){this.editor=editor;this.menu=menu;this.$content=opt.$content;this.init()};Modal.fn=Modal.prototype;E.Modal=Modal}),_e(function(E,$){var Modal=E.Modal;Modal.fn.init=function(){var self=this;self.initDom();self.initHideEvent()};Modal.fn.initDom=function(){var self=this,$content=self.$content,$modal=$('<div class="wangEditor-modal"><\/div>'),$close=$('<div class="wangEditor-modal-close"><i class="wangeditor-menu-img-cancel-circle"><\/i><\/div>');$modal.append($close);$modal.append($content);self.$modal=$modal;self.$close=$close};Modal.fn.initHideEvent=function(){var self=this,$close=self.$close,modal=self.$modal.get(0);$close.click(function(){self.hide()});E.$body.on("click",function(e){if(self.isShowing){var trigger=e.target,menu=self.menu,menuDom;menu&&(menuDom=menu.selected?menu.$domSelected.get(0):menu.$domNormal.get(0),menuDom===trigger||$.contains(menuDom,trigger))||modal===trigger||$.contains(modal,trigger)||self.hide()}})}}),_e(function(E){var Modal=E.Modal;Modal.fn._render=function(){var self=this,editor=self.editor,$modal=self.$modal;$modal.css("z-index",editor.config.zindex+10+"");E.$body.append($modal);self.rendered=!0};Modal.fn._position=function(){var self=this,$modal=self.$modal,top=$modal.offset().top,width=$modal.outerWidth(),height=$modal.outerHeight(),marginLeft=0-width/2,marginTop=0-height/2,sTop=E.$window.scrollTop();height/2>top&&(marginTop=0-top);$modal.css({"margin-left":marginLeft+"px","margin-top":marginTop+sTop+"px"})};Modal.fn.show=function(){var self=this,menu=self.menu,$modal;(self.rendered||self._render(),self.isShowing)||(self.isShowing=!0,$modal=self.$modal,$modal.show(),self._position(),menu&&menu.activeStyle(!0))};Modal.fn.hide=function(){var self=this,menu=self.menu,$modal;self.isShowing&&(self.isShowing=!1,$modal=self.$modal,$modal.hide(),menu&&menu.activeStyle(!1))}}),_e(function(E){var Txt=function(editor){this.editor=editor;this.init()};Txt.fn=Txt.prototype;E.Txt=Txt}),_e(function(E,$){var Txt=E.Txt;Txt.fn.init=function(){var self=this,editor=self.editor,$valueContainer=editor.$valueContainer,currentValue=editor.getInitValue(),$txt;$valueContainer.get(0).nodeName==="DIV"?($txt=$valueContainer,$txt.addClass("wangEditor-txt"),$txt.attr("contentEditable","true")):$txt=$('<div class="wangEditor-txt" contentEditable="true">'+currentValue+"<\/div>");editor.ready(function(){self.insertEmptyP()});self.$txt=$txt;self.contentEmptyHandle();self.bindEnterForDiv();self.bindEnterForText();self.bindTabEvent();self.bindPasteFilter();self.bindFormatText();self.bindHtml()};Txt.fn.contentEmptyHandle=function(){var self=this,editor=self.editor,$txt=self.$txt,$p;$txt.on("keydown",function(e){if(e.keyCode===8){var txtHtml=$.trim($txt.html().toLowerCase());if(txtHtml==="<p><br><\/p>"){e.preventDefault();return}}});$txt.on("keyup",function(e){if(e.keyCode===8){var txtHtml=$.trim($txt.html().toLowerCase());txtHtml&&txtHtml!=="<br>"||($p=$("<p><br/><\/p>"),$txt.html(""),$txt.append($p),editor.restoreSelectionByElem($p.get(0)))}})};Txt.fn.bindEnterForDiv=function(){function divHandler(){if($keydownDivElem){var $pElem=$("<p>"+$keydownDivElem.html()+"<\/p>");$keydownDivElem.after($pElem);$keydownDivElem.remove()}}var tags=E.config.legalTags,self=this,editor=self.editor,$txt=self.$txt,$keydownDivElem;$txt.on("keydown keyup",function(e){if(e.keyCode===13){var rangeElem=editor.getRangeElem(),targetElem=editor.getLegalTags(rangeElem),$targetElem,$pElem;if(!targetElem){if(targetElem=editor.getSelfOrParentByName(rangeElem,"div"),!targetElem)return;$targetElem=$(targetElem);e.type==="keydown"&&($keydownDivElem=$targetElem,setTimeout(divHandler,0));e.type==="keyup"&&($pElem=$("<p>"+$targetElem.html()+"<\/p>"),$targetElem.after($pElem),$targetElem.remove(),editor.restoreSelectionByElem($pElem.get(0),"start"))}}})};Txt.fn.bindEnterForText=function(){var self=this,$txt=self.$txt,handle;$txt.on("keyup",function(e){e.keyCode===13&&(handle||(handle=function(){self.wrapImgAndText()}),setTimeout(handle))})};Txt.fn.bindTabEvent=function(){var self=this,editor=self.editor,$txt=self.$txt;$txt.on("keydown",function(e){e.keyCode===9&&editor.queryCommandSupported("insertHtml")&&editor.command(e,"insertHtml","&nbsp;&nbsp;&nbsp;&nbsp;")})};Txt.fn.bindPasteFilter=function(){function handle(elem){if(elem&&elem.nodeType&&elem.nodeName){var $elem,nodeName=elem.nodeName.toLowerCase(),nodeType=elem.nodeType,childNodesClone;if(nodeType===3||nodeType===1){if($elem=$(elem),nodeName==="div"){childNodesClone=[];$.each(elem.childNodes,function(index,item){childNodesClone.push(item)});$.each(childNodesClone,function(){handle(this)});return}if(legalTagArr.indexOf(nodeName)>=0)resultHtml+=getResult(elem);else if(nodeType===3)resultHtml+="<p>"+elem.textContent+"<\/p>";else if(nodeName==="br")resultHtml+="<br/>";else{if(["meta","style","script","object","form","iframe","hr"].indexOf(nodeName)>=0)return;$elem=$(removeAttrs(elem));resultHtml+=$("<div>").append($elem.clone()).html()}}}}function getResult(elem){var nodeName=elem.nodeName.toLowerCase(),$elem,htmlForP="",htmlForLi="";return["blockquote"].indexOf(nodeName)>=0?($elem=$(elem),"<"+nodeName+">"+$elem.text()+"<\/"+nodeName+">"):["p","h1","h2","h3","h4","h5"].indexOf(nodeName)>=0?(elem=removeAttrs(elem),$elem=$(elem),htmlForP=$elem.html(),htmlForP=htmlForP.replace(/<.*?>/ig,function(tag){return tag==="<\/a>"||tag.indexOf("<a ")===0||tag.indexOf("<img ")===0?tag:""}),"<"+nodeName+">"+htmlForP+"<\/"+nodeName+">"):["ul","ol"].indexOf(nodeName)>=0?($elem=$(elem),$elem.children().each(function(){var $li=$(removeAttrs(this)),html=$li.html();html=html.replace(/<.*?>/ig,function(tag){return tag==="<\/a>"||tag.indexOf("<a ")===0||tag.indexOf("<img ")===0?tag:""});htmlForLi+="<li>"+html+"<\/li>"}),"<"+nodeName+">"+htmlForLi+"<\/"+nodeName+">"):($elem=$(removeAttrs(elem)),$("<div>").append($elem).html())}function removeAttrs(elem){var attrs=elem.attributes||[],attrNames=[],exception=["href","target","src","alt","rowspan","colspan"],children;return $.each(attrs,function(key,attr){attr&&attr.nodeType===2&&attrNames.push(attr.nodeName)}),$.each(attrNames,function(key,attr){exception.indexOf(attr)<0&&elem.removeAttribute(attr)}),children=elem.childNodes,children.length&&$.each(children,function(key,value){removeAttrs(value)}),elem}var self=this,editor=self.editor,resultHtml="",$txt=self.$txt,legalTags=editor.config.legalTags,legalTagArr=legalTags.split(",");$txt.on("paste",function(e){var currentNodeName,pasteHtml,$paste,data,ieData;if(editor.config.pasteFilter&&(currentNodeName=editor.getRangeElem().nodeName,currentNodeName!=="TD"&&currentNodeName!=="TH")){if(resultHtml="",data=e.clipboardData||e.originalEvent.clipboardData,ieData=window.clipboardData,editor.config.pasteText){if(data&&data.getData)pasteHtml=data.getData("text/plain");else if(ieData&&ieData.getData)pasteHtml=ieData.getData("text");else return;pasteHtml&&(resultHtml="<p>"+pasteHtml+"<\/p>")}else if(data&&data.getData)pasteHtml=data.getData("text/html"),pasteHtml?($paste=$("<div>"+pasteHtml+"<\/div>"),handle($paste.get(0))):(pasteHtml=data.getData("text/plain"),pasteHtml&&(pasteHtml=pasteHtml.replace(/[ ]/g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<\/p><p>"),resultHtml="<p>"+pasteHtml+"<\/p>",resultHtml=resultHtml.replace(/<p>(https?:\/\/.*?)<\/p>/ig,function(match,link){return'<p><a href="'+link+'" target="_blank">'+link+"<\/p>"})));else if(ieData&&ieData.getData){if(resultHtml=ieData.getData("text"),!resultHtml)return;resultHtml="<p>"+resultHtml+"<\/p>";resultHtml=resultHtml.replace(new RegExp("\n","g"),"<\/p><p>")}else return;resultHtml&&(editor.command(e,"insertHtml",resultHtml),self.clearEmptyOrNestP())}})};Txt.fn.bindFormatText=function(){var self=this,editor=self.editor,$txt=self.$txt,legalTags=E.config.legalTags,legalTagArr=legalTags.split(","),length=legalTagArr.length,regArr=[];$.each(legalTagArr,function(k,tag){var reg=">\\s*<("+tag+")>";regArr.push(new RegExp(reg,"ig"))});regArr.push(new RegExp(">\\s*<(li)>","ig"));regArr.push(new RegExp(">\\s*<(tr)>","ig"));regArr.push(new RegExp(">\\s*<(code)>","ig"));$txt.formatText=function(){var $temp=$("<div>"),html=$txt.html();return html=html.replace(/\s*</ig,"<"),$.each(regArr,function(k,reg){reg.test(html)&&(html=html.replace(reg,function(matchStr,tag){return">\n<"+tag+">"}))}),$temp.html(html),$temp.text()}};Txt.fn.bindHtml=function(){var self=this,editor=self.editor,$txt=self.$txt,$valueContainer=editor.$valueContainer,valueNodeName=editor.valueNodeName;$txt.html=function(html){var result;if(valueNodeName==="div"&&(result=$.fn.html.call($txt,html)),html===undefined?(result=$.fn.html.call($txt),result=result.replace(/(href|src)\=\"(.*)\"/igm,function(a,b,c){return b+'="'+c.replace("&amp;","&")+'"'})):(result=$.fn.html.call($txt,html),$valueContainer.val(html)),html===undefined)return result;$txt.change()}}}),_e(function(E,$){var Txt=E.Txt,txtChangeEventNames="propertychange change click keyup input paste";Txt.fn.render=function(){var $txt=this.$txt,$editorContainer=this.editor.$editorContainer;$editorContainer.append($txt)};Txt.fn.initHeight=function(){var editor=this.editor,$txt=this.$txt,valueContainerHeight=editor.$valueContainer.height(),menuHeight=editor.menuContainer.height(),txtHeight=valueContainerHeight-menuHeight;txtHeight=txtHeight<50?50:txtHeight;$txt.height(txtHeight);editor.valueContainerHeight=valueContainerHeight;this.initMaxHeight(txtHeight,menuHeight)};Txt.fn.initMaxHeight=function(txtHeight,menuHeight){var editor=this.editor,$menuContainer=editor.menuContainer.$menuContainer,$txt=this.$txt,$wrap=$("<div>"),maxHeight;if(window.getComputedStyle&&"max-height"in window.getComputedStyle($txt.get(0))){if(maxHeight=parseInt(editor.$valueContainer.css("max-height")),isNaN(maxHeight))return;if(editor.menus.fullscreen){E.warn("max-height和『全屏』菜单一起使用时，会有一些问题尚未解决，请暂时不要两个同时使用");return}editor.useMaxHeight=!0;$wrap.css({"max-height":maxHeight-menuHeight+"px","overflow-y":"auto"});$txt.css({height:"auto","overflow-y":"visible","min-height":txtHeight+"px"});$wrap.on("scroll",function(){$txt.parent().scrollTop()>10?$menuContainer.addClass("wangEditor-menu-shadow"):$menuContainer.removeClass("wangEditor-menu-shadow")});$txt.wrap($wrap)}};Txt.fn.saveSelectionEvent=function(){function save(){editor.saveSelection()}function saveSync(){Date.now()-dt<100||(dt=Date.now(),save())}function saveAync(){timeoutId&&clearTimeout(timeoutId);timeoutId=setTimeout(save,300)}var $txt=this.$txt,editor=this.editor,timeoutId,dt=Date.now();$txt.on(txtChangeEventNames+" focus blur",function(){saveSync();saveAync()});$txt.on("mousedown",function(){$txt.on("mouseleave.saveSelection",function(){saveSync();saveAync();editor.updateMenuStyle()})}).on("mouseup",function(){$txt.off("mouseleave.saveSelection")})};Txt.fn.updateValueEvent=function(){function doOnchange(){var val=$txt.html();oldValue!==val&&(editor.onchange&&typeof editor.onchange=="function"&&editor.onchange.call(editor),editor.updateValue(),oldValue=val)}var $txt=this.$txt,editor=this.editor,timeoutId,oldValue;$txt.on(txtChangeEventNames,function(){oldValue==null&&(oldValue=$txt.html());timeoutId&&clearTimeout(timeoutId);timeoutId=setTimeout(doOnchange,100)})};Txt.fn.updateMenuStyleEvent=function(){var $txt=this.$txt,editor=this.editor;$txt.on(txtChangeEventNames,function(){editor.updateMenuStyle()})};Txt.fn.insertEmptyP=function(){var $txt=this.$txt,$children=$txt.children();if($children.length===0){$txt.append($("<p><br><\/p>"));return}$.trim($children.last().html()).toLowerCase()!=="<br>"&&$txt.append($("<p><br><\/p>"))};Txt.fn.wrapImgAndText=function(){var $txt=this.$txt,$imgs=$txt.children("img"),txt=$txt[0],childNodes=txt.childNodes,childrenLength=childNodes.length,i,childNode;for($imgs.length&&$imgs.each(function(){$(this).wrap("<p>")}),i=0;i<childrenLength;i++)childNode=childNodes[i],childNode.nodeType===3&&childNode.textContent&&$.trim(childNode.textContent)&&$(childNode).wrap("<p>")};Txt.fn.clearEmptyOrNestP=function(){var $txt=this.$txt,$pList=$txt.find("p");$pList.each(function(){var $p=$(this),$children=$p.children(),childrenLength=$children.length,$firstChild,content=$.trim($p.html());if(!content){$p.remove();return}childrenLength===1&&($firstChild=$children.first(),$firstChild.get(0)&&$firstChild.get(0).nodeName==="P"&&$p.html($firstChild.html()))})};Txt.fn.scrollTop=function(val){var self=this,editor=self.editor,$txt=self.$txt;return editor.useMaxHeight?$txt.parent().scrollTop(val):$txt.scrollTop(val)};Txt.fn.showHeightOnHover=function(){function addAndShowTip($target){isTipInTxt||($editorContainer.append($tip),isTipInTxt=!0);var txtTop=$txt.position().top,txtHeight=$txt.outerHeight(),height=$target.height(),top=$target.position().top,marginTop=parseInt($target.css("margin-top"),10),paddingTop=parseInt($target.css("padding-top"),10),marginBottom=parseInt($target.css("margin-bottom"),10),paddingBottom=parseInt($target.css("padding-bottom"),10),resultHeight=height+paddingTop+marginTop+paddingBottom+marginBottom,resultTop=top+menuContainer.height();$tip.css({height:height+paddingTop+marginTop+paddingBottom+marginBottom,top:top+menuContainer.height()})}function removeTip(){isTipInTxt&&($tip.remove(),isTipInTxt=!1)}var editor=this.editor,$editorContainer=editor.$editorContainer,menuContainer=editor.menuContainer,$txt=this.$txt,$tip=$('<i class="height-tip"><i>'),isTipInTxt=!1;$txt.on("mouseenter","ul,ol,blockquote,p,h1,h2,h3,h4,h5,table,pre",function(e){addAndShowTip($(e.currentTarget))}).on("mouseleave",function(){removeTip()})}}),_e(function(E,$){Array.prototype.indexOf||(Array.prototype.indexOf=function(elem){for(var i=0,length=this.length;i<length;i++)if(this[i]===elem)return i;return-1},Array.prototype.lastIndexOf=function(elem){for(var length=this.length,length=length-1;length>=0;length--)if(this[length]===elem)return length;return-1});Date.now||(Date.now=function(){return(new Date).valueOf()});var console=window.console,emptyFn=function(){};$.each(["info","log","warn","error"],function(key,value){E[value]=console==null?emptyFn:function(info){E.config&&E.config.printLog&&console[value]("wangEditor提示: "+info)}});E.random=function(){return Math.random().toString().slice(2)};E.placeholder="placeholder"in document.createElement("input");E.placeholderForIE8=function($container){E.placeholder||$container.find("input[placeholder]").each(function(){var $input=$(this),placeholder=$input.attr("placeholder");if($input.val()===""){$input.css("color","#666");$input.val(placeholder);$input.on("focus.placeholder click.placeholder",function(){$input.val("");$input.css("color","#333");$input.off("focus.placeholder click.placeholder")})}})}}),_e(function(E){E.langs={};E.langs["zh-cn"]={bold:"粗体",underline:"下划线",italic:"斜体",forecolor:"文字颜色",bgcolor:"背景色",strikethrough:"删除线",eraser:"清空格式",source:"源码",quote:"引用",fontfamily:"字体",fontsize:"字号",head:"标题",orderlist:"有序列表",unorderlist:"无序列表",alignleft:"左对齐",aligncenter:"居中",alignright:"右对齐",link:"链接",text:"文本",submit:"提交",cancel:"取消",unlink:"取消链接",table:"表格",emotion:"表情",img:"图片",video:"视频",width:"宽",height:"高",location:"位置",loading:"加载中",searchlocation:"搜索位置",dynamicMap:"动态地图",clearLocation:"清除位置",langDynamicOneLocation:"动态地图只能显示一个位置",insertcode:"插入代码",undo:"撤销",redo:"重复",fullscreen:"全屏",openLink:"打开链接"};E.langs.en={bold:"Bold",underline:"Underline",italic:"Italic",forecolor:"Color",bgcolor:"Backcolor",strikethrough:"Strikethrough",eraser:"Eraser",source:"Codeview",quote:"Quote",fontfamily:"Font family",fontsize:"Font size",head:"Head",orderlist:"Ordered list",unorderlist:"Unordered list",alignleft:"Align left",aligncenter:"Align center",alignright:"Align right",link:"Insert link",text:"Text",submit:"Submit",cancel:"Cancel",unlink:"Unlink",table:"Table",emotion:"Emotions",img:"Image",video:"Video",width:"width",height:"height",location:"Location",loading:"Loading",searchlocation:"search",dynamicMap:"Dynamic",clearLocation:"Clear",langDynamicOneLocation:"Only one location in dynamic map",insertcode:"Insert Code",undo:"Undo",redo:"Redo",fullscreen:"Full screnn",openLink:"open link"}}),_e(function(E){E.config={};E.config.zindex=1e4;E.config.printLog=!0;E.config.menuFixed=0;E.config.jsFilter=!0;E.config.legalTags="p,h1,h2,h3,h4,h5,h6,blockquote,table,ul,ol,pre";E.config.lang=E.langs["zh-cn"];E.config.menus=["source","|","bold","underline","italic","strikethrough","eraser","forecolor","bgcolor","|","quote","fontfamily","fontsize","head","unorderlist","orderlist","alignleft","aligncenter","alignright","|","link","unlink","table","emotion","|","img","video","insertcode","|","undo","redo","fullscreen"];E.config.colors={"#880000":"暗红色","#800080":"紫色","#ff0000":"红色","#ff00ff":"鲜粉色","#000080":"深蓝色","#0000ff":"蓝色","#00ffff":"湖蓝色","#008080":"蓝绿色","#008000":"绿色","#808000":"橄榄色","#00ff00":"浅绿色","#ffcc00":"橙黄色","#808080":"灰色","#c0c0c0":"银色","#000000":"黑色","#ffffff":"白色"};E.config.familys=["宋体","黑体","楷体","微软雅黑","Arial","Verdana","Georgia","Times New Roman","Microsoft JhengHei","Trebuchet MS","Courier New","Impact","Comic Sans MS","Consolas"];E.config.fontsizes={1:"12px",2:"13px",3:"16px",4:"18px",5:"24px",6:"32px",7:"48px"};E.config.emotionsShow="icon";E.config.emotions={weibo:{title:"微博表情",data:[{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/7a/shenshou_thumb.gif",value:"[草泥马]"},{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/60/horse2_thumb.gif",value:"[神马]"},{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/bc/fuyun_thumb.gif",value:"[浮云]"},{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c9/geili_thumb.gif",value:"[给力]"},{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/f2/wg_thumb.gif",value:"[围观]"},{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/70/vw_thumb.gif",value:"[威武]"},{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6e/panda_thumb.gif",value:"[熊猫]"},{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/81/rabbit_thumb.gif",value:"[兔子]"},{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/bc/otm_thumb.gif",value:"[奥特曼]"},{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/15/j_thumb.gif",value:"[囧]"},{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/89/hufen_thumb.gif",value:"[互粉]"},{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c4/liwu_thumb.gif",value:"[礼物]"},{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/ac/smilea_thumb.gif",value:"[呵呵]"},{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/0b/tootha_thumb.gif",value:"[哈哈]"}]}};E.config.mapAk="TVhjYjq1ICT2qqL5LdS8mwas";E.config.uploadImgUrl="";E.config.uploadTimeout=2e4;E.config.uploadImgFns={};E.config.customUpload=!1;E.config.uploadParams={};E.config.uploadHeaders={};E.config.hideLinkImg=!1;E.config.pasteFilter=!0;E.config.pasteText=!1;E.config.codeDefaultLang="javascript"}),_e(function(E){E.UI={};E.UI.menus={"default":{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-command"><\/i><\/a>',selected:".selected"},bold:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-bold"><\/i><\/a>',selected:".selected"},underline:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-underline"><\/i><\/a>',selected:".selected"},italic:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-italic"><\/i><\/a>',selected:".selected"},forecolor:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-pencil"><\/i><\/a>',selected:".selected"},bgcolor:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-brush"><\/i><\/a>',selected:".selected"},strikethrough:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-strikethrough"><\/i><\/a>',selected:".selected"},eraser:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-eraser"><\/i><\/a>',selected:".selected"},quote:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-quotes-left"><\/i><\/a>',selected:".selected"},source:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-code"><\/i><\/a>',selected:".selected"},fontfamily:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-font2"><\/i><\/a>',selected:".selected"},fontsize:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-text-height"><\/i><\/a>',selected:".selected"},head:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-header"><\/i><\/a>',selected:".selected"},orderlist:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-list-numbered"><\/i><\/a>',selected:".selected"},unorderlist:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-list-bullet"><\/i><\/a>',selected:".selected"},alignleft:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-align-left"><\/i><\/a>',selected:".selected"},aligncenter:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-align-center"><\/i><\/a>',selected:".selected"},alignright:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-align-right"><\/i><\/a>',selected:".selected"},link:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-link"><\/i><\/a>',selected:".selected"},unlink:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-unlink"><\/i><\/a>',selected:".selected"},table:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-table"><\/i><\/a>',selected:".selected"},emotion:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-happy"><\/i><\/a>',selected:".selected"},img:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-picture"><\/i><\/a>',selected:".selected"},video:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-play"><\/i><\/a>',selected:".selected"},location:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-location"><\/i><\/a>',selected:".selected"},insertcode:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-terminal"><\/i><\/a>',selected:".selected"},undo:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-ccw"><\/i><\/a>',selected:".selected"},redo:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-cw"><\/i><\/a>',selected:".selected"},fullscreen:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-enlarge2"><\/i><\/a>',selected:'<a href="#" tabindex="-1" class="selected"><i class="wangeditor-menu-img-shrink2"><\/i><\/a>'}}}),_e(function(E,$){E.fn.initDefaultConfig=function(){var editor=this;editor.config=$.extend({},E.config);editor.UI=$.extend({},E.UI)}}),_e(function(E,$){E.fn.addEditorContainer=function(){this.$editorContainer=$('<div class="wangEditor-container"><\/div>')}}),_e(function(E){E.fn.addTxt=function(){var editor=this,txt=new E.Txt(editor);editor.txt=txt}}),_e(function(E){E.fn.addMenuContainer=function(){var editor=this;editor.menuContainer=new E.MenuContainer(editor)}}),_e(function(E,$){E.createMenuFns=[];E.createMenu=function(fn){E.createMenuFns.push(fn)};E.fn.addMenus=function(){function check(menuId){return menuIds.indexOf(menuId)>=0?!0:!1}var editor=this,menuIds=editor.config.menus;$.each(E.createMenuFns,function(k,createMenuFn){createMenuFn.call(editor,check)})}}),_e(function(E){E.createMenu(function(check){var menuId="bold";if(check(menuId)){var editor=this,lang=editor.config.lang,menu=new E.Menu({editor:editor,id:menuId,title:lang.bold,commandName:"Bold"});menu.clickEventSelected=function(e){var isRangeEmpty=editor.isRangeEmpty();isRangeEmpty?editor.commandForElem("b,strong,h1,h2,h3,h4,h5",e,"Bold"):editor.command(e,"Bold")};editor.menus[menuId]=menu}})}),_e(function(E){E.createMenu(function(check){var menuId="underline";if(check(menuId)){var editor=this,lang=editor.config.lang,menu=new E.Menu({editor:editor,id:menuId,title:lang.underline,commandName:"Underline"});menu.clickEventSelected=function(e){var isRangeEmpty=editor.isRangeEmpty();isRangeEmpty?editor.commandForElem("u,a",e,"Underline"):editor.command(e,"Underline")};editor.menus[menuId]=menu}})}),_e(function(E){E.createMenu(function(check){var menuId="italic";if(check(menuId)){var editor=this,lang=editor.config.lang,menu=new E.Menu({editor:editor,id:menuId,title:lang.italic,commandName:"Italic"});menu.clickEventSelected=function(e){var isRangeEmpty=editor.isRangeEmpty();isRangeEmpty?editor.commandForElem("i",e,"Italic"):editor.command(e,"Italic")};editor.menus[menuId]=menu}})}),_e(function(E,$){E.createMenu(function(check){var menuId="forecolor";if(check(menuId)){var editor=this,lang=editor.config.lang,configColors=editor.config.colors,menu=new E.Menu({editor:editor,id:menuId,title:lang.forecolor}),$content=$("<div><\/div>");$.each(configColors,function(k,v){$content.append(['<a href="#" class="color-item"','    title="'+v+'" commandValue="'+k+'" ','    style="color: '+k+'" ','><i class="wangeditor-menu-img-pencil"><\/i><\/a>'].join(""))});$content.on("click","a[commandValue]",function(e){var $elem=$(this),commandValue=$elem.attr("commandValue");menu.selected&&editor.isRangeEmpty()?editor.commandForElem("font[color]",e,"forecolor",commandValue):editor.command(e,"forecolor",commandValue)});menu.dropPanel=new E.DropPanel(editor,menu,{$content:$content,width:125});menu.updateSelectedEvent=function(){var rangeElem=editor.getRangeElem();return(rangeElem=editor.getSelfOrParentByName(rangeElem,"font[color]"),rangeElem)?!0:!1};editor.menus[menuId]=menu}})}),_e(function(E,$){E.createMenu(function(check){function checkElemFn(elem){var cssText;return elem&&elem.style&&elem.style.cssText!=null&&(cssText=elem.style.cssText,cssText&&cssText.indexOf("background-color:")>=0)?!0:!1}var menuId="bgcolor",menu,$content;if(check(menuId)){var editor=this,lang=editor.config.lang,configColors=editor.config.colors;menu=new E.Menu({editor:editor,id:menuId,title:lang.bgcolor});$content=$("<div><\/div>");$.each(configColors,function(k,v){$content.append(['<a href="#" class="color-item"','    title="'+v+'" commandValue="'+k+'" ','    style="color: '+k+'" ','><i class="wangeditor-menu-img-brush"><\/i><\/a>'].join(""))});$content.on("click","a[commandValue]",function(e){var $elem=$(this),commandValue=$elem.attr("commandValue");menu.selected&&editor.isRangeEmpty()?editor.commandForElem({selector:"span,font",check:checkElemFn},e,"BackColor",commandValue):editor.command(e,"BackColor",commandValue)});menu.dropPanel=new E.DropPanel(editor,menu,{$content:$content,width:125});menu.updateSelectedEvent=function(){var rangeElem=editor.getRangeElem();return(rangeElem=editor.getSelfOrParentByName(rangeElem,"span,font",checkElemFn),rangeElem)?!0:!1};editor.menus[menuId]=menu}})}),_e(function(E){E.createMenu(function(check){var menuId="strikethrough";if(check(menuId)){var editor=this,lang=editor.config.lang,menu=new E.Menu({editor:editor,id:menuId,title:lang.strikethrough,commandName:"StrikeThrough"});menu.clickEventSelected=function(e){var isRangeEmpty=editor.isRangeEmpty();isRangeEmpty?editor.commandForElem("strike",e,"StrikeThrough"):editor.command(e,"StrikeThrough")};editor.menus[menuId]=menu}})}),_e(function(E,$){E.createMenu(function(check){var menuId="eraser";if(check(menuId)){var editor=this,lang=editor.config.lang,menu=new E.Menu({editor:editor,id:menuId,title:lang.eraser,commandName:"RemoveFormat"});menu.clickEvent=function(e){function commandFn(){var editor=this,rangeElem,pElem,$pElem,quoteElem,$quoteElem,listElem,$listElem;rangeElem=editor.getRangeElem();quoteElem=editor.getSelfOrParentByName(rangeElem,"blockquote");quoteElem&&($quoteElem=$(quoteElem),$clearElem=$("<p>"+$quoteElem.text()+"<\/p>"),$quoteElem.after($clearElem).remove());pElem=editor.getSelfOrParentByName(rangeElem,"p,h1,h2,h3,h4,h5");pElem&&($pElem=$(pElem),$clearElem=$("<p>"+$pElem.text()+"<\/p>"),$pElem.after($clearElem).remove());listElem=editor.getSelfOrParentByName(rangeElem,"ul,ol");listElem&&($listElem=$(listElem),$clearElem=$("<p>"+$listElem.text()+"<\/p>"),$listElem.after($clearElem).remove())}function callback(){var editor=this;$clearElem&&editor.restoreSelectionByElem($clearElem.get(0))}var isRangeEmpty=editor.isRangeEmpty(),$clearElem;if(!isRangeEmpty){editor.command(e,"RemoveFormat");return}editor.customCommand(e,commandFn,callback)};editor.menus[menuId]=menu}})}),_e(function(E,$){E.createMenu(function(check){function updateValue(){var $code=menu.$codeTextarea,$txt=editor.txt.$txt,value=$.trim($code.val());value||(value="<p><br><\/p>");editor.config.jsFilter&&(value=value.replace(/<script[\s\S]*?<\/script>/ig,""));try{$txt.html(value)}catch(ex){}}var menuId="source";if(check(menuId)){var editor=this,lang=editor.config.lang,txtHtml,menu=new E.Menu({editor:editor,id:menuId,title:lang.source});menu.isShowCode=!1;menu.clickEvent=function(){var self=this,editor=self.editor,$txt=editor.txt.$txt,txtOuterHeight=$txt.outerHeight(),txtHeight=$txt.height(),$code;self.$codeTextarea||(self.$codeTextarea=$('<textarea class="code-textarea"><\/textarea>'));$code=self.$codeTextarea;$code.css({height:txtHeight,"margin-top":txtOuterHeight-txtHeight});$code.val($txt.html());$code.on("change",function(){updateValue()});$txt.after($code).hide();$code.show();menu.isShowCode=!0;this.updateSelected();editor.disableMenusExcept("source");txtHtml=$txt.html()};menu.clickEventSelected=function(){var self=this,editor=self.editor,$txt=editor.txt.$txt,$code=self.$codeTextarea;$code&&(updateValue(),$code.after($txt).hide(),$txt.show(),menu.isShowCode=!1,this.updateSelected(),editor.enableMenusExcept("source"),$txt.html()!==txtHtml&&editor.onchange&&typeof editor.onchange=="function"&&editor.onchange.call(editor))};menu.updateSelectedEvent=function(){return this.isShowCode};editor.menus[menuId]=menu}})}),_e(function(E,$){E.createMenu(function(check){var menuId="quote";if(check(menuId)){var editor=this,lang=editor.config.lang,menu=new E.Menu({editor:editor,id:menuId,title:lang.quote,commandName:"formatBlock",commandValue:"blockquote"});menu.clickEvent=function(e){function commandFn(){$quote=$("<p>"+$rangeElem.text()+"<\/p>");$rangeElem.after($quote).remove();$quote.wrap("<blockquote>")}function callback(){var editor=this;$quote&&editor.restoreSelectionByElem($quote.get(0))}var rangeElem=editor.getRangeElem(),$rangeElem,currentQuote,$quote;if(!rangeElem){e.preventDefault();return}if(currentQuote=editor.getSelfOrParentByName(rangeElem,"blockquote"),currentQuote){e.preventDefault();return}if(rangeElem=editor.getLegalTags(rangeElem),$rangeElem=$(rangeElem),$rangeElem.text()){if(!rangeElem){editor.command(e,"formatBlock","blockquote");return}editor.customCommand(e,commandFn,callback)}};menu.clickEventSelected=function(e){function commandFn(){var $quoteElem,$children;if($quoteElem=$(quoteElem),$children=$quoteElem.children(),$children.length){$children.each(function(){var $item=$(this);$item.get(0).nodeName==="P"?$quoteElem.after($item):$quoteElem.after("<p>"+$item.text()+"<\/p>");$lastChild=$item});$quoteElem.remove();return}}function callback(){var editor=this;$lastChild&&editor.restoreSelectionByElem($lastChild.get(0))}var rangeElem,quoteElem,$lastChild;if(rangeElem=editor.getRangeElem(),quoteElem=editor.getSelfOrParentByName(rangeElem,"blockquote"),!quoteElem){e.preventDefault();return}editor.customCommand(e,commandFn,callback)};menu.updateSelectedEvent=function(){var self=this,editor=self.editor,rangeElem;return(rangeElem=editor.getRangeElem(),rangeElem=editor.getSelfOrParentByName(rangeElem,"blockquote"),rangeElem)?!0:!1};editor.menus[menuId]=menu;editor.ready(function(){var editor=this,$txt=editor.txt.$txt,isPrevEnter=!1;$txt.on("keydown",function(e){var rangeElem,currentRangeElem,$currentRangeElem;if(e.keyCode!==13){isPrevEnter=!1;return}if(rangeElem=editor.getRangeElem(),rangeElem=editor.getSelfOrParentByName(rangeElem,"blockquote"),!rangeElem){isPrevEnter=!1;return}if(!isPrevEnter){isPrevEnter=!0;return}currentRangeElem=editor.getRangeElem();$currentRangeElem=$(currentRangeElem);$currentRangeElem.length&&$currentRangeElem.parent().after($currentRangeElem);editor.restoreSelectionByElem(currentRangeElem,"start");isPrevEnter=!1;e.preventDefault()})});editor.ready(function(){function commandFn(){$rangeElem&&$rangeElem.remove()}function callback(){if($rangeElem){var $prev=$rangeElem.prev();$prev.length?editor.restoreSelectionByElem($prev.get(0)):editor.initSelection()}}var editor=this,$txt=editor.txt.$txt,$rangeElem;$txt.on("keydown",function(e){var rangeElem,text;e.keyCode===8&&(rangeElem=editor.getRangeElem(),rangeElem=editor.getSelfOrParentByName(rangeElem,"blockquote"),rangeElem)&&(($rangeElem=$(rangeElem),text=$rangeElem.text(),text)||editor.customCommand(e,commandFn,callback))})})}})}),_e(function(E,$){E.createMenu(function(check){var menuId="fontfamily",tpl;if(check(menuId)){var editor=this,lang=editor.config.lang,configFamilys=editor.config.familys,menu=new E.Menu({editor:editor,id:menuId,title:lang.fontfamily,commandName:"fontName"}),data={};$.each(configFamilys,function(k,v){data[v]=v});tpl='<span style="font-family:{#commandValue};">{#title}<\/span>';menu.dropList=new E.DropList(editor,menu,{data:data,tpl:tpl,selectorForELemCommand:"font[face]"});menu.updateSelectedEvent=function(){var rangeElem=editor.getRangeElem();return(rangeElem=editor.getSelfOrParentByName(rangeElem,"font[face]"),rangeElem)?!0:!1};editor.menus[menuId]=menu}})}),_e(function(E){E.createMenu(function(check){var menuId="fontsize";if(check(menuId)){var editor=this,lang=editor.config.lang,configSize=editor.config.fontsizes,menu=new E.Menu({editor:editor,id:menuId,title:lang.fontsize,commandName:"fontSize"}),data=configSize;menu.dropList=new E.DropList(editor,menu,{data:data,tpl:'<span style="font-size:{#title};">{#title}<\/span>',selectorForELemCommand:"font[size]"});menu.updateSelectedEvent=function(){var rangeElem=editor.getRangeElem();return(rangeElem=editor.getSelfOrParentByName(rangeElem,"font[size]"),rangeElem)?!0:!1};editor.menus[menuId]=menu}})}),_e(function(E){E.createMenu(function(check){function beforeEvent(e){editor.queryCommandState("InsertOrderedList")?(isOrderedList=!0,editor.command(e,"InsertOrderedList")):isOrderedList=!1}function afterEvent(e){isOrderedList&&editor.command(e,"InsertOrderedList")}var menuId="head",tpl;if(check(menuId)){var editor=this,lang=editor.config.lang,menu=new E.Menu({editor:editor,id:menuId,title:lang.head,commandName:"formatBlock"}),isOrderedList;tpl="{#commandValue}{#title}";menu.dropList=new E.DropList(editor,menu,{data:{"<h1>":"标题1","<h2>":"标题2","<h3>":"标题3","<h4>":"标题4","<h5>":"标题5"},tpl:tpl,beforeEvent:beforeEvent,afterEvent:afterEvent});menu.updateSelectedEvent=function(){var rangeElem=editor.getRangeElem();return(rangeElem=editor.getSelfOrParentByName(rangeElem,"h1,h2,h3,h4,h5"),rangeElem)?!0:!1};editor.menus[menuId]=menu}})}),_e(function(E){E.createMenu(function(check){var menuId="unorderlist";if(check(menuId)){var editor=this,lang=editor.config.lang,menu=new E.Menu({editor:editor,id:menuId,title:lang.unorderlist,commandName:"InsertUnorderedList"});editor.menus[menuId]=menu}})}),_e(function(E){E.createMenu(function(check){var menuId="orderlist";if(check(menuId)){var editor=this,lang=editor.config.lang,menu=new E.Menu({editor:editor,id:menuId,title:lang.orderlist,commandName:"InsertOrderedList"});editor.menus[menuId]=menu}})}),_e(function(E,$){E.createMenu(function(check){var menuId="alignleft";if(check(menuId)){var editor=this,lang=editor.config.lang,menu=new E.Menu({editor:editor,id:menuId,title:lang.alignleft,commandName:"JustifyLeft"});menu.updateSelectedEvent=function(){var rangeElem=editor.getRangeElem();return(rangeElem=editor.getSelfOrParentByName(rangeElem,"p,h1,h2,h3,h4,h5,li",function(elem){var cssText;return elem&&elem.style&&elem.style.cssText!=null&&(cssText=elem.style.cssText,cssText&&/text-align:\s*left;/.test(cssText))?!0:$(elem).attr("align")==="left"?!0:!1}),rangeElem)?!0:!1};editor.menus[menuId]=menu}})}),_e(function(E,$){E.createMenu(function(check){var menuId="aligncenter";if(check(menuId)){var editor=this,lang=editor.config.lang,menu=new E.Menu({editor:editor,id:menuId,title:lang.aligncenter,commandName:"JustifyCenter"});menu.updateSelectedEvent=function(){var rangeElem=editor.getRangeElem();return(rangeElem=editor.getSelfOrParentByName(rangeElem,"p,h1,h2,h3,h4,h5,li",function(elem){var cssText;return elem&&elem.style&&elem.style.cssText!=null&&(cssText=elem.style.cssText,cssText&&/text-align:\s*center;/.test(cssText))?!0:$(elem).attr("align")==="center"?!0:!1}),rangeElem)?!0:!1};editor.menus[menuId]=menu}})}),_e(function(E,$){E.createMenu(function(check){var menuId="alignright";if(check(menuId)){var editor=this,lang=editor.config.lang,menu=new E.Menu({editor:editor,id:menuId,title:lang.alignright,commandName:"JustifyRight"});menu.updateSelectedEvent=function(){var rangeElem=editor.getRangeElem();return(rangeElem=editor.getSelfOrParentByName(rangeElem,"p,h1,h2,h3,h4,h5,li",function(elem){var cssText;return elem&&elem.style&&elem.style.cssText!=null&&(cssText=elem.style.cssText,cssText&&/text-align:\s*right;/.test(cssText))?!0:$(elem).attr("align")==="right"?!0:!1}),rangeElem)?!0:!1};editor.menus[menuId]=menu}})}),_e(function(E,$){E.createMenu(function(check){var menuId="link";if(check(menuId)){var editor=this,lang=editor.config.lang,menu=new E.Menu({editor:editor,id:menuId,title:lang.link}),$content=$("<div><\/div>"),$div1=$('<div style="margin:20px 10px;" class="clearfix"><\/div>'),$div2=$div1.clone(),$div3=$div1.clone().css("margin","0 10px"),$textInput=$('<input type="text" class="block" placeholder="'+lang.text+'"/>'),$urlInput=$('<input type="text" class="block" placeholder="'+lang.link+'"/>'),$btnSubmit=$('<button class="right">'+lang.submit+"<\/button>"),$btnCancel=$('<button class="right gray">'+lang.cancel+"<\/button>");$div1.append($textInput);$div2.append($urlInput);$div3.append($btnSubmit).append($btnCancel);$content.append($div1).append($div2).append($div3);menu.dropPanel=new E.DropPanel(editor,menu,{$content:$content,width:300});menu.clickEvent=function(){var menu=this,dropPanel=menu.dropPanel,url,rangeElem,text,isRangeEmpty;if(dropPanel.isShowing){dropPanel.hide();return}$textInput.val("");$urlInput.val("http://");url="";rangeElem=editor.getRangeElem();rangeElem=editor.getSelfOrParentByName(rangeElem,"a");rangeElem&&(url=rangeElem.href||"");text="";isRangeEmpty=editor.isRangeEmpty();isRangeEmpty?rangeElem&&(text=rangeElem.textContent||rangeElem.innerHTML):text=editor.getRangeText()||"";url&&$urlInput.val(url);text&&$textInput.val(text);isRangeEmpty?$textInput.removeAttr("disabled"):$textInput.attr("disabled",!0);dropPanel.show()};menu.updateSelectedEvent=function(){var rangeElem=editor.getRangeElem();return(rangeElem=editor.getSelfOrParentByName(rangeElem,"a"),rangeElem)?!0:!1};$btnCancel.click(function(e){e.preventDefault();menu.dropPanel.hide()});$btnSubmit.click(function(e){e.preventDefault();var rangeElem=editor.getRangeElem(),targetElem=editor.getSelfOrParentByName(rangeElem,"a"),isRangeEmpty=editor.isRangeEmpty(),$linkElem,linkHtml,commandFn,callback,$txt=editor.txt.$txt,$oldLinks,$newLinks,uniqId="link"+E.random(),url=$.trim($urlInput.val()),text=$.trim($textInput.val());if(!url){menu.dropPanel.focusFirstInput();return}text||(text=url);isRangeEmpty?targetElem?($linkElem=$(targetElem),commandFn=function(){$linkElem.attr("href",url);$linkElem.text(text)},callback=function(){var editor=this;editor.restoreSelectionByElem(targetElem)},editor.customCommand(e,commandFn,callback)):(linkHtml='<a href="'+url+'" target="_blank">'+text+"<\/a>",E.userAgent.indexOf("Firefox")>0&&(linkHtml+="<span>&nbsp;<\/span>"),editor.command(e,"insertHtml",linkHtml)):($oldLinks=$txt.find("a"),$oldLinks.attr(uniqId,"1"),editor.command(e,"createLink",url),$newLinks=$txt.find("a").not("["+uniqId+"]"),$newLinks.attr("target","_blank"),$oldLinks.removeAttr(uniqId))});editor.menus[menuId]=menu}})}),_e(function(E,$){E.createMenu(function(check){var menuId="unlink";if(check(menuId)){var editor=this,lang=editor.config.lang,menu=new E.Menu({editor:editor,id:menuId,title:lang.unlink,commandName:"unLink"});menu.clickEvent=function(e){function commandFn(){$a.after($span).remove()}function callback(){editor.restoreSelectionByElem($span.get(0))}var isRangeEmpty=editor.isRangeEmpty(),rangeElem,aElem,$a,$span;if(!isRangeEmpty){editor.command(e,"unLink");return}if(rangeElem=editor.getRangeElem(),aElem=editor.getSelfOrParentByName(rangeElem,"a"),!aElem){e.preventDefault();return}$a=$(aElem);$span=$("<span>"+$a.text()+"<\/span>");editor.customCommand(e,commandFn,callback)};editor.menus[menuId]=menu}})}),_e(function(E,$){E.createMenu(function(check){var menuId="table";if(check(menuId)){for(var editor=this,lang=editor.config.lang,menu=new E.Menu({editor:editor,id:menuId,title:lang.table}),$content=$('<div style="font-size: 14px; color: #666; text-align:right;"><\/div>'),$table=$('<table class="choose-table" style="margin-bottom:10px;margin-top:5px;">'),$row=$("<span>0<\/span>"),$rowspan=$("<span> 行 <\/span>"),$col=$("<span>0<\/span>"),$colspan=$("<span> 列<\/span>"),$tr,j,i=0;i<15;i++){for($tr=$('<tr index="'+(i+1)+'">'),j=0;j<20;j++)$tr.append($('<td index="'+(j+1)+'">'));$table.append($tr)}$content.append($table);$content.append($row).append($rowspan).append($col).append($colspan);$table.on("mouseenter","td",function(e){var $currentTd=$(e.currentTarget),currentTdIndex=$currentTd.attr("index"),$currentTr=$currentTd.parent(),currentTrIndex=$currentTr.attr("index");$row.text(currentTrIndex);$col.text(currentTdIndex);$table.find("tr").each(function(){var $tr=$(this),trIndex=$tr.attr("index");parseInt(trIndex,10)<=parseInt(currentTrIndex,10)?$tr.find("td").each(function(){var $td=$(this),tdIndex=$td.attr("index");parseInt(tdIndex,10)<=parseInt(currentTdIndex,10)?$td.addClass("active"):$td.removeClass("active")}):$tr.find("td").removeClass("active")})}).on("mouseleave",function(){$table.find("td").removeClass("active");$row.text(0);$col.text(0)});$table.on("click","td",function(e){for(var $currentTd=$(e.currentTarget),currentTdIndex=$currentTd.attr("index"),$currentTr=$currentTd.parent(),currentTrIndex=$currentTr.attr("index"),rownum=parseInt(currentTrIndex,10),colnum=parseInt(currentTdIndex,10),j,tableHtml="<table>",i=0;i<rownum;i++){for(tableHtml+="<tr>",j=0;j<colnum;j++)tableHtml+="<td><span>&nbsp;<\/span><\/td>";tableHtml+="<\/tr>"}tableHtml+="<\/table>";editor.command(e,"insertHtml",tableHtml)});menu.dropPanel=new E.DropPanel(editor,menu,{$content:$content,width:262});editor.menus[menuId]=menu}})}),_e(function(E,$){E.createMenu(function(check){function insertEmotionImgs(data,$tabContent){$.each(data,function(k,emotion){var src=emotion.icon||emotion.url,value=emotion.value||emotion.title,commandValue=emotionsShow==="icon"?src:value,$command=$('<a href="#" commandValue="'+commandValue+'"><\/a>'),$img=$("<img>");$img.attr("_src",src);$command.append($img);$tabContent.append($command);editor.emotionUrls.push(src)})}var menuId="emotion",menu;if(check(menuId)){var editor=this,config=editor.config,lang=config.lang,configEmotions=config.emotions,emotionsShow=config.emotionsShow;editor.emotionUrls=[];menu=new E.Menu({editor:editor,id:menuId,title:lang.emotion});var $panelContent=$('<div class="panel-tab"><\/div>'),$tabContainer=$('<div class="tab-container"><\/div>'),$contentContainer=$('<div class="content-container emotion-content-container"><\/div>');$.each(configEmotions,function(k,emotion){var title=emotion.title,data=emotion.data,$tab,$tabContent;if(E.log("正在处理 "+title+" 表情的数据..."),$tab=$('<a href="#">'+title+" <\/a>"),$tabContainer.append($tab),$tabContent=$('<div class="content"><\/div>'),$contentContainer.append($tabContent),$tab.click(function(e){$tabContainer.children().removeClass("selected");$contentContainer.children().removeClass("selected");$tabContent.addClass("selected");$tab.addClass("selected");e.preventDefault()}),typeof data=="string")E.log("将通过 "+data+" 地址ajax下载表情包"),$.get(data,function(result){result=$.parseJSON(result);E.log("下载完毕，得到 "+result.length+" 个表情");insertEmotionImgs(result,$tabContent)});else if(Object.prototype.toString.call(data).toLowerCase().indexOf("array")>0)insertEmotionImgs(data,$tabContent);else{E.error("data 数据格式错误，请修改为正确格式，参考文档："+E.docsite);return}});$panelContent.append($tabContainer).append($contentContainer);$tabContainer.children().first().addClass("selected");$contentContainer.children().first().addClass("selected");$contentContainer.on("click","a[commandValue]",function(e){var $a=$(e.currentTarget),commandValue=$a.attr("commandValue");emotionsShow==="icon"?editor.command(e,"InsertImage",commandValue):editor.command(e,"insertHtml","<span>"+commandValue+"<\/span>");e.preventDefault()});menu.dropPanel=new E.DropPanel(editor,menu,{$content:$panelContent,width:350});menu.clickEvent=function(){var menu=this,dropPanel=menu.dropPanel;if(dropPanel.isShowing){dropPanel.hide();return}(dropPanel.show(),menu.imgLoaded)||($contentContainer.find("img").each(function(){var $img=$(this),_src=$img.attr("_src");$img.on("error",function(){E.error("加载不出表情图片 "+_src)});$img.attr("src",_src);$img.removeAttr("_src")}),menu.imgLoaded=!0)};editor.menus[menuId]=menu}})}),_e(function(E,$){function linkContentHandler(editor,menu,$linkContent){function callback(){$urlInput.val("")}var lang=editor.config.lang,$urlContainer=$('<div style="margin:20px 10px 10px 10px;"><\/div>'),$urlInput=$('<input type="text" class="block" placeholder="http://"/>'),$btnSubmit,$btnCancel;$urlContainer.append($urlInput);$btnSubmit=$('<button class="right">'+lang.submit+"<\/button>");$btnCancel=$('<button class="right gray">'+lang.cancel+"<\/button>");$linkContent.append($urlContainer).append($btnSubmit).append($btnCancel);$btnCancel.click(function(e){e.preventDefault();menu.dropPanel.hide()});$btnSubmit.click(function(e){var url,imgHtml;if(e.preventDefault(),url=$.trim($urlInput.val()),!url){$urlInput.focus();return}imgHtml='<img style="max-width:100%;" src="'+url+'"/>';editor.command(e,"insertHtml",imgHtml,callback)})}E.createMenu(function(check){function tabToggle(){$uploadTab.click(function(e){$tabContainer.children().removeClass("selected");$contentContainer.children().removeClass("selected");$uploadContent.addClass("selected");$uploadTab.addClass("selected");e.preventDefault()});$linkTab.click(function(e){$tabContainer.children().removeClass("selected");$contentContainer.children().removeClass("selected");$linkContent.addClass("selected");$linkTab.addClass("selected");e.preventDefault();E.placeholder&&$linkContent.find("input[type=text]").focus()});$uploadTab.click()}function hideUploadImg(){$tabContainer.remove();$uploadContent.remove();$linkContent.addClass("selected")}function hideLinkImg(){$tabContainer.remove();$linkContent.remove();$uploadContent.addClass("selected")}var menuId="img",$uploadTab,$linkTab,$uploadContent,$linkContent;if(check(menuId)){var editor=this,lang=editor.config.lang,menu=new E.Menu({editor:editor,id:menuId,title:lang.img}),$panelContent=$('<div class="panel-tab"><\/div>'),$tabContainer=$('<div class="tab-container"><\/div>'),$contentContainer=$('<div class="content-container"><\/div>');$panelContent.append($tabContainer).append($contentContainer);$uploadTab=$('<a href="#">上传图片<\/a>');$linkTab=$('<a href="#">网络图片<\/a>');$tabContainer.append($uploadTab).append($linkTab);$uploadContent=$('<div class="content"><\/div>');$contentContainer.append($uploadContent);$linkContent=$('<div class="content"><\/div>');$contentContainer.append($linkContent);linkContentHandler(editor,menu,$linkContent);menu.dropPanel=new E.DropPanel(editor,menu,{$content:$panelContent,width:400,onRender:function(){var init=editor.config.customUploadInit;init&&init.call(editor)}});editor.menus[menuId]=menu;editor.ready(function(){function hidePanel(){menu.dropPanel.hide()}var editor=this,config=editor.config,uploadImgUrl=config.uploadImgUrl,customUpload=config.customUpload,linkImg=config.hideLinkImg;uploadImgUrl||customUpload?(editor.$uploadContent=$uploadContent,tabToggle(),linkImg&&hideLinkImg()):hideUploadImg();$uploadContent.click(function(){setTimeout(hidePanel)})})}})}),_e(function(E,$){E.createMenu(function(check){var menuId="video";if(check(menuId)){var editor=this,lang=editor.config.lang,reg=/^<(iframe)|(embed)/i,menu=new E.Menu({editor:editor,id:menuId,title:lang.video}),$content=$("<div><\/div>"),$linkInputContainer=$('<div style="margin:20px 10px;"><\/div>'),$linkInput=$('<input type="text" class="block" placeholder=\'格式如：<iframe src="..." frameborder=0 allowfullscreen><\/iframe>\'/>');$linkInputContainer.append($linkInput);var $sizeContainer=$('<div style="margin:20px 10px;"><\/div>'),$widthInput=$('<input type="text" value="640" style="width:50px;text-align:center;"/>'),$heightInput=$('<input type="text" value="498" style="width:50px;text-align:center;"/>');$sizeContainer.append("<span> "+lang.width+" <\/span>").append($widthInput).append("<span> px &nbsp;&nbsp;&nbsp;<\/span>").append("<span> "+lang.height+" <\/span>").append($heightInput).append("<span> px <\/span>");var $btnContainer=$("<div><\/div>"),$howToCopy=$('<a href="http://www.kancloud.cn/wangfupeng/wangeditor2/134973" target="_blank" style="display:inline-block;margin-top:10px;margin-left:10px;color:#999;">如何复制视频链接？<\/a>'),$btnSubmit=$('<button class="right">'+lang.submit+"<\/button>"),$btnCancel=$('<button class="right gray">'+lang.cancel+"<\/button>");$btnContainer.append($howToCopy).append($btnSubmit).append($btnCancel);$content.append($linkInputContainer).append($sizeContainer).append($btnContainer);$btnCancel.click(function(e){e.preventDefault();$linkInput.val("");menu.dropPanel.hide()});$btnSubmit.click(function(e){e.preventDefault();var link=$.trim($linkInput.val()),$link,width=parseInt($widthInput.val()),height=parseInt($heightInput.val()),$div=$("<div>"),html="<p>{content}<\/p>";if(!link){menu.dropPanel.focusFirstInput();return}if(!reg.test(link)){alert("视频链接格式错误！");menu.dropPanel.focusFirstInput();return}if(isNaN(width)||isNaN(height)){alert("宽度或高度不是数字！");return}$link=$(link);$link.attr("width",width).attr("height",height);html=html.replace("{content}",$div.append($link).html());editor.command(e,"insertHtml",html);$linkInput.val("")});menu.dropPanel=new E.DropPanel(editor,menu,{$content:$content,width:400});editor.menus[menuId]=menu}})}),_e(function(E,$){var inputKeyup=function(input){return"onkeyup"in input}(document.createElement("input"));E.baiduMapAk="TVhjYjq1ICT2qqL5LdS8mwas";E.numberOfLocation=0;E.createMenu(function(check){function callback(){$searchInput.val("")}var menuId="location",mapData,hasCallback,menu,$searchInput,$clearBtn,$map,$mapLoading;if(check(menuId)){if(++E.numberOfLocation>1){E.error("目前不支持在一个页面多个编辑器上同时使用地图，可通过自定义菜单配置去掉地图菜单");return}var editor=this,config=editor.config,lang=config.lang,ak=config.mapAk;editor.mapData={};mapData=editor.mapData;mapData.markers=[];mapData.mapContainerId="map"+E.random();mapData.clearLocations=function(){var map=mapData.map;map&&(map.clearOverlays(),mapData.markers=[])};mapData.searchMap=function(){var map=mapData.map;if(map){var BMap=window.BMap,cityName=$cityInput.val(),locationName=$searchInput.val(),myGeo,marker;cityName!==""&&(locationName&&locationName!==""||map.centerAndZoom(cityName,11),locationName&&locationName!==""&&(myGeo=new BMap.Geocoder,myGeo.getPoint(locationName,function(point){point?(map.centerAndZoom(point,13),marker=new BMap.Marker(point),map.addOverlay(marker),marker.enableDragging(),mapData.markers.push(marker)):map.centerAndZoom(cityName,11)},cityName)))}};hasCallback=!1;window.baiduMapCallBack=function(){function locationFun(result){var cityName=result.name,timeoutId,searchFn;if(map.setCenter(cityName),$cityInput.val(cityName),E.placeholder&&$searchInput.focus(),inputKeyup){searchFn=function(e){e.type==="keyup"&&e.keyCode===13&&e.preventDefault();timeoutId&&clearTimeout(timeoutId);timeoutId=setTimeout(mapData.searchMap,500)};$cityInput.on("keyup change paste",searchFn);$searchInput.on("keyup change paste",searchFn)}else searchFn=function(){if(!$content.is(":visible")){clearTimeout(timeoutId);return}var currentCity="",currentSearch="",city=$cityInput.val(),search=$searchInput.val();(city!==currentCity||search!==currentSearch)&&(mapData.searchMap(),currentCity=city,currentSearch=search);timeoutId&&clearTimeout(timeoutId);timeoutId=setTimeout(searchFn,1e3)},timeoutId=setTimeout(searchFn,1e3)}var BMap,map,myCity;hasCallback||(hasCallback=!0,BMap=window.BMap,mapData.map||(mapData.map=new BMap.Map(mapData.mapContainerId)),map=mapData.map,map.centerAndZoom(new BMap.Point(116.404,39.915),11),map.addControl(new BMap.MapTypeControl),map.setCurrentCity("北京"),map.enableScrollWheelZoom(!0),myCity=new BMap.LocalCity,myCity.get(locationFun),map.addEventListener("click",function(e){var marker=new BMap.Marker(new BMap.Point(e.point.lng,e.point.lat));map.addOverlay(marker);marker.enableDragging();mapData.markers.push(marker)},!1))};mapData.loadMapScript=function(){var script=document.createElement("script");script.type="text/javascript";script.src="https://api.map.baidu.com/api?v=2.0&ak="+ak+"&s=1&callback=baiduMapCallBack";try{document.body.appendChild(script)}catch(ex){E.error("加载地图过程中发生错误")}};mapData.initMap=function(){window.BMap?window.baiduMapCallBack():mapData.loadMapScript()};menu=new E.Menu({editor:editor,id:menuId,title:lang.location});editor.menus[menuId]=menu;var $content=$("<div><\/div>"),$inputContainer=$('<div style="margin:10px 0;"><\/div>'),$cityInput=$('<input type="text"/>');$cityInput.css({width:"80px","text-align":"center"});$searchInput=$('<input type="text"/>');$searchInput.css({width:"300px","margin-left":"10px"}).attr("placeholder",lang.searchlocation);$clearBtn=$('<button class="right link">'+lang.clearLocation+"<\/button>");$inputContainer.append($clearBtn).append($cityInput).append($searchInput);$content.append($inputContainer);$clearBtn.click(function(e){$searchInput.val("");$searchInput.focus();mapData.clearLocations();e.preventDefault()});$map=$('<div id="'+mapData.mapContainerId+'"><\/div>');$map.css({height:"260px",width:"100%",position:"relative","margin-top":"10px",border:"1px solid #f1f1f1"});$mapLoading=$("<span>"+lang.loading+"<\/span>");$mapLoading.css({position:"absolute",width:"100px","text-align":"center",top:"45%",left:"50%","margin-left":"-50px"});$map.append($mapLoading);$content.append($map);var $btnContainer=$('<div style="margin:10px 0;"><\/div>'),$btnSubmit=$('<button class="right">'+lang.submit+"<\/button>"),$btnCancel=$('<button class="right gray">'+lang.cancel+"<\/button>"),$checkLabel=$('<label style="display:inline-block;margin-top:10px;color:#666;"><\/label>'),$check=$('<input type="checkbox">');$checkLabel.append($check).append('<span style="display:inline-block;margin-left:5px;">  '+lang.dynamicMap+"<\/span>");$btnContainer.append($checkLabel).append($btnSubmit).append($btnCancel);$content.append($btnContainer);$btnCancel.click(function(e){e.preventDefault();callback();menu.dropPanel.hide()});$btnSubmit.click(function(e){e.preventDefault();var map=mapData.map,isDynamic=$check.is(":checked"),markers=mapData.markers,center=map.getCenter(),centerLng=center.lng,centerLat=center.lat,zoom=map.getZoom(),size=map.getSize(),sizeWidth=size.width,sizeHeight=size.height,position,src,iframe;if(src=isDynamic?"http://ueditor.baidu.com/ueditor/dialogs/map/show.html#":"http://api.map.baidu.com/staticimage?",src=src+"center="+centerLng+","+centerLat+"&zoom="+zoom+"&width="+sizeWidth+"&height="+sizeHeight,markers.length>0&&(src=src+"&markers=",$.each(markers,function(key,value){position=value.getPosition();key>0&&(src=src+"|");src=src+position.lng+","+position.lat})),isDynamic){if(markers.length>1){alert(lang.langDynamicOneLocation);return}src+="&markerStyles=l,A";iframe='<iframe class="ueditor_baidumap" src="{src}" frameborder="0" width="'+sizeWidth+'" height="'+sizeHeight+'"><\/iframe>';iframe=iframe.replace("{src}",src);editor.command(e,"insertHtml",iframe,callback)}else editor.command(e,"insertHtml",'<img style="max-width:100%;" src="'+src+'"/>',callback)});menu.dropPanel=new E.DropPanel(editor,menu,{$content:$content,width:500});menu.onRender=function(){ak===E.baiduMapAk&&E.warn("建议在配置中自定义百度地图的mapAk，否则可能影响地图功能，文档："+E.docsite)};menu.clickEvent=function(){var menu=this,dropPanel=menu.dropPanel,firstTime=!1;if(dropPanel.isShowing){dropPanel.hide();return}mapData.map||(firstTime=!0);dropPanel.show();mapData.initMap();firstTime||$searchInput.focus()}}})}),_e(function(E,$){function loadHljs(){if(!(E.userAgent.indexOf("MSIE 8")>0)&&!window.hljs){var script=document.createElement("script");script.type="text/javascript";script.src="//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js";document.body.appendChild(script)}}E.createMenu(function(check){function contentHandle($content){var $textareaContainer=$("<div><\/div>"),codeTpl;$textareaContainer.css({margin:"15px 5px 5px 5px",height:"160px","text-align":"center"});$textarea.css({width:"100%",height:"100%",padding:"10px"});$textarea.on("keydown",function(e){e.keyCode===9&&e.preventDefault()});$textareaContainer.append($textarea);$content.append($textareaContainer);var $btnContainer=$("<div><\/div>"),$btnSubmit=$('<button class="right">'+lang.submit+"<\/button>"),$btnCancel=$('<button class="right gray">'+lang.cancel+"<\/button>");$btnContainer.append($btnSubmit).append($btnCancel).append($langSelect);$content.append($btnContainer);$btnCancel.click(function(e){e.preventDefault();menu.dropPanel.hide()});codeTpl='<pre style="max-width:100%;overflow-x:auto;"><code{#langClass}>{#content}<\/code><\/pre>';$btnSubmit.click(function(e){function commandFn(){var className;lang&&(className=$targetElem.attr("class"),className!==lang+" hljs"&&$targetElem.attr("class",lang+" hljs"));$targetElem.html(val)}function callback(){editor.restoreSelectionByElem(targetElem);doHightlight()}var val,rangeElem,html,targetElem,$targetElem;if(e.preventDefault(),val=$textarea.val(),!val){$textarea.focus();return}rangeElem=editor.getRangeElem();$.trim($(rangeElem).text())&&codeTpl.indexOf("<p><br><\/p>")!==0&&(codeTpl="<p><br><\/p>"+codeTpl);var lang=$langSelect?$langSelect.val():"",langClass="",doHightlight=function(){$txt.find("pre code").each(function(i,block){var $block=$(block);$block.attr("codemark")||window.hljs&&(window.hljs.highlightBlock(block),$block.attr("codemark","1"))})};if(lang&&(langClass=' class="'+lang+' hljs"'),val=val.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;"),!menu.selected){html=codeTpl.replace("{#langClass}",langClass).replace("{#content}",val);editor.command(e,"insertHtml",html,doHightlight);return}(targetElem=editor.getSelfOrParentByName(rangeElem,"pre"),targetElem&&(targetElem=editor.getSelfOrParentByName(rangeElem,"code")),targetElem)&&($targetElem=$(targetElem),editor.customCommand(e,commandFn,callback))})}function updateMenu(){var rangeElem=editor.getRangeElem(),targetElem=editor.getSelfOrParentByName(rangeElem,"code");targetElem?editor.disableMenusExcept("insertcode"):editor.enableMenusExcept("insertcode")}var menuId="insertcode";if(check(menuId)){setTimeout(loadHljs,0);var editor=this,config=editor.config,lang=config.lang,$txt=editor.txt.$txt,menu=new E.Menu({editor:editor,id:menuId,title:lang.insertcode});menu.clickEvent=function(){var menu=this,dropPanel=menu.dropPanel,hljs;if(dropPanel.isShowing){dropPanel.hide();return}if($textarea.val(""),dropPanel.show(),hljs=window.hljs,hljs&&hljs.listLanguages){if($langSelect.children().length!==0)return;$langSelect.css({"margin-top":"9px","margin-left":"5px"});$.each(hljs.listLanguages(),function(key,lang){lang==="xml"&&(lang="html");lang===config.codeDefaultLang?$langSelect.append('<option value="'+lang+'" selected="selected">'+lang+"<\/option>"):$langSelect.append('<option value="'+lang+'">'+lang+"<\/option>")})}else $langSelect.hide()};menu.clickEventSelected=function(){var menu=this,dropPanel=menu.dropPanel,rangeElem,targetElem,$targetElem,className;if(dropPanel.isShowing){dropPanel.hide();return}(dropPanel.show(),rangeElem=editor.getRangeElem(),targetElem=editor.getSelfOrParentByName(rangeElem,"pre"),targetElem&&(targetElem=editor.getSelfOrParentByName(rangeElem,"code")),targetElem)&&($targetElem=$(targetElem),$textarea.val($targetElem.text()),$langSelect&&(className=$targetElem.attr("class"),className&&$langSelect.val(className.split(" ")[0])))};menu.updateSelectedEvent=function(){var self=this,editor=self.editor,rangeElem;return(rangeElem=editor.getRangeElem(),rangeElem=editor.getSelfOrParentByName(rangeElem,"pre"),rangeElem)?!0:!1};var $content=$("<div><\/div>"),$textarea=$("<textarea><\/textarea>"),$langSelect=$("<select><\/select>");contentHandle($content);menu.dropPanel=new E.DropPanel(editor,menu,{$content:$content,width:500});editor.menus[menuId]=menu;$txt.on("keydown",function(e){if(e.keyCode===13){var rangeElem=editor.getRangeElem(),targetElem=editor.getSelfOrParentByName(rangeElem,"code");targetElem&&editor.command(e,"insertHtml","\n")}});$txt.on("keydown click",function(){setTimeout(updateMenu)})}})}),_e(function(E){E.createMenu(function(check){var menuId="undo";if(check(menuId)){var editor=this,lang=editor.config.lang,menu=new E.Menu({editor:editor,id:menuId,title:lang.undo});menu.clickEvent=function(){editor.undo()};editor.menus[menuId]=menu;editor.ready(function(){function undo(){editor.undoRecord()}var editor=this,$txt=editor.txt.$txt,timeoutId;$txt.on("keydown",function(e){var keyCode=e.keyCode;if(e.ctrlKey&&keyCode===90){editor.undo();return}keyCode===13?undo():(timeoutId&&clearTimeout(timeoutId),timeoutId=setTimeout(undo,1e3))});editor.undoRecord()})}})}),_e(function(E){E.createMenu(function(check){var menuId="redo";if(check(menuId)){var editor=this,lang=editor.config.lang,menu=new E.Menu({editor:editor,id:menuId,title:lang.redo});menu.clickEvent=function(){editor.redo()};editor.menus[menuId]=menu}})}),_e(function(E){var scrollTopWhenFullScreen;E.createMenu(function(check){var menuId="fullscreen";if(check(menuId)){var editor=this,$txt=editor.txt.$txt,config=editor.config,zIndexConfig=config.zindex||1e4,lang=config.lang,isSelected=!1,zIndex,maxHeight,menu=new E.Menu({editor:editor,id:menuId,title:lang.fullscreen});menu.clickEvent=function(){var $editorContainer=editor.$editorContainer,$wrapper,txtHeight,txtOuterHeight,menuContainer;$editorContainer.addClass("wangEditor-fullscreen");zIndex=$editorContainer.css("z-index");$editorContainer.css("z-index",zIndexConfig);txtHeight=$txt.height();txtOuterHeight=$txt.outerHeight();editor.useMaxHeight&&(maxHeight=$txt.css("max-height"),$txt.css("max-height","none"),$wrapper=$txt.parent(),$wrapper.after($txt),$wrapper.remove(),$txt.css("overflow-y","auto"));menuContainer=editor.menuContainer;$txt.height(E.$window.height()-menuContainer.height()-(txtOuterHeight-txtHeight));editor.menuContainer.$menuContainer.attr("style","");isSelected=!0;editor.isFullScreen=!0;scrollTopWhenFullScreen=E.$window.scrollTop()};menu.clickEventSelected=function(){var $editorContainer=editor.$editorContainer;$editorContainer.removeClass("wangEditor-fullscreen");$editorContainer.css("z-index",zIndex);editor.useMaxHeight?$txt.css("max-height",maxHeight):editor.$valueContainer.css("height",editor.valueContainerHeight);editor.txt.initHeight();isSelected=!1;editor.isFullScreen=!1;scrollTopWhenFullScreen!=null&&E.$window.scrollTop(scrollTopWhenFullScreen)};menu.updateSelectedEvent=function(){return isSelected};editor.menus[menuId]=menu}})}),_e(function(E,$){E.fn.renderMenus=function(){var editor=this,menus=editor.menus,menuIds=editor.config.menus,menuContainer=editor.menuContainer,menu,groupIdx=0;$.each(menuIds,function(k,v){if(v==="|"){groupIdx++;return}menu=menus[v];menu&&menu.render(groupIdx)})}}),_e(function(E){E.fn.renderMenuContainer=function(){var editor=this,menuContainer=editor.menuContainer,$editorContainer=editor.$editorContainer;menuContainer.render()}}),_e(function(E){E.fn.renderTxt=function(){var editor=this,txt=editor.txt;txt.render();editor.ready(function(){txt.initHeight()})}}),_e(function(E){E.fn.renderEditorContainer=function(){var editor=this,$valueContainer=editor.$valueContainer,$editorContainer=editor.$editorContainer,$txt=editor.txt.$txt,$prev,$parent;$valueContainer===$txt?($prev=editor.$prev,$parent=editor.$parent,$prev&&$prev.length?$prev.after($editorContainer):$parent.prepend($editorContainer)):($valueContainer.after($editorContainer),$valueContainer.hide())}}),_e(function(E,$){E.fn.eventMenus=function(){var menus=this.menus;$.each(menus,function(k,v){v.bindEvent()})}}),_e(function(E){E.fn.eventMenuContainer=function(){}}),_e(function(E){E.fn.eventTxt=function(){var txt=this.txt;txt.saveSelectionEvent();txt.updateValueEvent();txt.updateMenuStyleEvent()}}),_e(function(E){E.plugin(function(){var editor=this,fns=editor.config.uploadImgFns;fns.onload||(fns.onload=function(resultText){E.log("上传结束，返回结果为 "+resultText);var editor=this,originalName=editor.uploadImgOriginalName||"",img;resultText.indexOf("error|")===0?(E.warn("上传失败："+resultText.split("|")[1]),alert(resultText.split("|")[1])):(E.log("上传成功，即将插入编辑区域，结果为："+resultText),img=document.createElement("img"),img.onload=function(){var html='<img src="'+resultText+'" alt="'+originalName+'" style="max-width:100%;"/>';editor.command(null,"insertHtml",html);E.log("已插入图片，地址 "+resultText);img=null},img.onerror=function(){E.error("使用返回的结果获取图片，发生错误。请确认以下结果是否正确："+resultText);img=null},img.src=resultText)});fns.ontimeout||(fns.ontimeout=function(){E.error("上传图片超时");alert("上传图片超时")});fns.onerror||(fns.onerror=function(){E.error("上传上图片发生错误");alert("上传上图片发生错误")})})}),_e(function(E,$){window.FileReader&&window.FormData&&E.plugin(function(){function convertBase64UrlToBlob(urlData,filetype){for(var bytes=window.atob(urlData.split(",")[1]),ab=new ArrayBuffer(bytes.length),ia=new Uint8Array(ab),i=0;i<bytes.length;i++)ia[i]=bytes.charCodeAt(i);return new Blob([ab],{type:filetype})}function insertImg(src,event){var img=document.createElement("img");img.onload=function(){var html='<img src="'+src+'" style="max-width:100%;"/>';editor.command(event,"insertHtml",html);E.log("已插入图片，地址 "+src);img=null};img.onerror=function(){E.error("使用返回的结果获取图片，发生错误。请确认以下结果是否正确："+src);img=null};img.src=src}function updateProgress(e){if(e.lengthComputable){var percentComplete=e.loaded/e.total;editor.showUploadProgress(percentComplete*100)}}var editor=this,config=editor.config,uploadImgUrl=config.uploadImgUrl,uploadTimeout=config.uploadTimeout,uploadImgFns=config.uploadImgFns,onload=uploadImgFns.onload,ontimeout=uploadImgFns.ontimeout,onerror=uploadImgFns.onerror;uploadImgUrl&&(editor.xhrUploadImg=function(opt){function timeoutCallback(){timeoutId&&clearTimeout(timeoutId);xhr&&xhr.abort&&xhr.abort();event.preventDefault();timeoutfn&&timeoutfn.call(editor,xhr);editor.hideUploadProgress()}var event=opt.event,fileName=opt.filename||"",base64=opt.base64,fileType=opt.fileType||"image/png",name=opt.name||"wangEditor_upload_file",loadfn=opt.loadfn||onload,errorfn=opt.errorfn||onerror,timeoutfn=opt.timeoutfn||ontimeout,params=editor.config.uploadParams||{},headers=editor.config.uploadHeaders||{},fileExt="png",xhr,timeoutId,formData;if(fileName.indexOf(".")>0?fileExt=fileName.slice(fileName.lastIndexOf(".")-fileName.length+1):fileType.indexOf("/")>0&&fileType.split("/")[1]&&(fileExt=fileType.split("/")[1]),E.isOnWebsite){E.log("预览模拟上传");insertImg(base64,event);return}xhr=new XMLHttpRequest;formData=new FormData;xhr.onload=function(){timeoutId&&clearTimeout(timeoutId);editor.uploadImgOriginalName=fileName;fileName.indexOf(".")>0&&(editor.uploadImgOriginalName=fileName.split(".")[0]);loadfn&&loadfn.call(editor,xhr.responseText,xhr);editor.hideUploadProgress()};xhr.onerror=function(){timeoutId&&clearTimeout(timeoutId);event.preventDefault();errorfn&&errorfn.call(editor,xhr);editor.hideUploadProgress()};xhr.upload.onprogress=updateProgress;formData.append(name,convertBase64UrlToBlob(base64,fileType),E.random()+"."+fileExt);$.each(params,function(key,value){formData.append(key,value)});xhr.open("POST",uploadImgUrl,!0);$.each(headers,function(key,value){xhr.setRequestHeader(key,value)});xhr.withCredentials=!0;xhr.send(formData);timeoutId=setTimeout(timeoutCallback,uploadTimeout);E.log("开始上传...并开始超时计算")})})}),_e(function(E,$){E.plugin(function(){function render(){isRender||(isRender=!0,$progress.css({top:menuHeight+"px"}),$editorContainer.append($progress))}function hideProgress(){$progress.hide();timeoutId=null}var editor=this,menuContainer=editor.menuContainer,menuHeight=menuContainer.height(),$editorContainer=editor.$editorContainer,width=$editorContainer.width(),$progress=$('<div class="wangEditor-upload-progress"><\/div>'),isRender=!1,timeoutId;editor.showUploadProgress=function(progress){timeoutId&&clearTimeout(timeoutId);render();$progress.show();$progress.width(progress*width/100)};editor.hideUploadProgress=function(time){timeoutId&&clearTimeout(timeoutId);time=time||750;timeoutId=setTimeout(hideProgress,time)}})}),_e(function(E,$){E.plugin(function(){var editor=this,config=editor.config,uploadImgUrl=config.uploadImgUrl,uploadTimeout=config.uploadTimeout,event,$uploadContent,$uploadIcon,upfile;uploadImgUrl&&($uploadContent=editor.$uploadContent,$uploadContent)&&($uploadIcon=$('<div class="upload-icon-container"><i class="wangeditor-menu-img-upload"><\/i><\/div>'),$uploadContent.append($uploadIcon),upfile=new E.UploadFile({editor:editor,uploadUrl:uploadImgUrl,timeout:uploadTimeout,fileAccept:"image/jpg,image/jpeg,image/png,image/gif,image/bmp"}),$uploadIcon.click(function(e){event=e;upfile.selectFiles()}))})}),_e(function(E,$){if(window.FileReader&&window.FormData){var UploadFile=function(opt){this.editor=opt.editor;this.uploadUrl=opt.uploadUrl;this.timeout=opt.timeout;this.fileAccept=opt.fileAccept;this.multiple=!0};UploadFile.fn=UploadFile.prototype;UploadFile.fn.clear=function(){this.$input.val("");E.log("input value 已清空")};UploadFile.fn.render=function(){var self=this;if(!self._hasRender){E.log("渲染dom");var fileAccept=self.fileAccept,acceptTpl=fileAccept?'accept="'+fileAccept+'"':"",multiple=self.multiple,multipleTpl=multiple?'multiple="multiple"':"",$input=$('<input type="file" '+acceptTpl+" "+multipleTpl+"/>"),$container=$('<div style="visibility:hidden;"><\/div>');$container.append($input);E.$body.append($container);$input.on("change",function(e){self.selected(e,$input.get(0))});self.$input=$input;self._hasRender=!0}};UploadFile.fn.selectFiles=function(){var self=this;E.log("使用 html5 方式上传");self.render();E.log("选择文件");self.$input.click()};UploadFile.fn.selected=function(e,input){var self=this,files=input.files||[];files.length!==0&&(E.log("选中 "+files.length+" 个文件"),$.each(files,function(key,value){self.upload(value)}))};UploadFile.fn.upload=function(file){function clearInput(){self.clear()}var self=this,editor=self.editor,filename=file.name||"",fileType=file.type||"",uploadImgFns=editor.config.uploadImgFns,uploadFileName=editor.config.uploadImgFileName||"wangEditorH5File",onload=uploadImgFns.onload,ontimeout=uploadImgFns.ontimeout,onerror=uploadImgFns.onerror,reader=new FileReader;if(!onload||!ontimeout||!onerror){E.error("请为编辑器配置上传图片的 onload ontimeout onerror 回调事件");return}E.log("开始执行 "+filename+" 文件的上传");reader.onload=function(e){E.log("已读取"+filename+"文件");var base64=e.target.result||this.result;editor.xhrUploadImg({event:e,filename:filename,base64:base64,fileType:fileType,name:uploadFileName,loadfn:function(resultText,xhr){clearInput();var editor=this;onload.call(editor,resultText,xhr)},errorfn:function(xhr){clearInput();E.isOnWebsite&&alert("wangEditor官网暂时没有服务端，因此报错。实际项目中不会发生");var editor=this;onerror.call(editor,xhr)},timeoutfn:function(xhr){clearInput();E.isOnWebsite&&alert("wangEditor官网暂时没有服务端，因此超时。实际项目中不会发生");var editor=this;ontimeout(editor,xhr)}})};reader.readAsDataURL(file)};E.UploadFile=UploadFile}}),_e(function(E,$){if(!window.FileReader||!window.FormData){var UploadFile=function(opt){this.editor=opt.editor;this.uploadUrl=opt.uploadUrl;this.timeout=opt.timeout;this.fileAccept=opt.fileAccept;this.multiple=!1};UploadFile.fn=UploadFile.prototype;UploadFile.fn.clear=function(){this.$input.val("");E.log("input value 已清空")};UploadFile.fn.hideModal=function(){this.modal.hide()};UploadFile.fn.render=function(){var self=this,editor=self.editor,uploadFileName=editor.config.uploadImgFileName||"wangEditorFormFile",uploadUrl,modal;if(!self._hasRender){uploadUrl=self.uploadUrl;E.log("渲染dom");var iframeId="iframe"+E.random(),$iframe=$('<iframe name="'+iframeId+'" id="'+iframeId+'" frameborder="0" width="0" height="0"><\/iframe>'),multiple=self.multiple,multipleTpl=multiple?'multiple="multiple"':"",$p=$("<p>选择图片并上传<\/p>"),$input=$('<input type="file" '+multipleTpl+' name="'+uploadFileName+'"/>'),$btn=$('<input type="submit" value="上传"/>'),$form=$('<form enctype="multipart/form-data" method="post" action="'+uploadUrl+'" target="'+iframeId+'"><\/form>'),$container=$('<div style="margin:10px 20px;"><\/div>');$form.append($p).append($input).append($btn);$.each(editor.config.uploadParams,function(key,value){$form.append($('<input type="hidden" name="'+key+'" value="'+value+'"/>'))});$container.append($form);$container.append($iframe);self.$input=$input;self.$iframe=$iframe;modal=new E.Modal(editor,undefined,{$content:$container});self.modal=modal;self._hasRender=!0}};UploadFile.fn.bindLoadEvent=function(){function onloadFn(){var resultText=$.trim(iframeWindow.document.body.innerHTML),fileFullName,fileOriginalName;resultText&&(fileFullName=self.$input.val(),fileOriginalName=fileFullName,fileFullName.lastIndexOf("\\")>=0&&(fileOriginalName=fileFullName.slice(fileFullName.lastIndexOf("\\")+1),fileOriginalName.indexOf(".")>0&&(fileOriginalName=fileOriginalName.split(".")[0])),editor.uploadImgOriginalName=fileOriginalName,onload.call(editor,resultText),self.clear(),self.hideModal())}var self=this;if(!self._hasBindLoad){var editor=self.editor,$iframe=self.$iframe,iframe=$iframe.get(0),iframeWindow=iframe.contentWindow,onload=editor.config.uploadImgFns.onload;iframe.attachEvent?iframe.attachEvent("onload",onloadFn):iframe.onload=onloadFn;self._hasBindLoad=!0}};UploadFile.fn.show=function(){function show(){modal.show();self.bindLoadEvent()}var self=this,modal=self.modal;setTimeout(show)};UploadFile.fn.selectFiles=function(){var self=this;E.log("使用 form 方式上传");self.render();self.clear();self.show()};E.UploadFile=UploadFile}}),_e(function(E,$){E.plugin(function(){function findPasteImgAndUpload(){var reg=/^data:(image\/\w+);base64/,$imgs=$txt.find("img");E.log("粘贴后，检查到编辑器有"+$imgs.length+"个图片。开始遍历图片，试图找到刚刚粘贴过来的图片");$.each($imgs,function(){var img=this,$img=$(img),flag,base64=$img.attr("src"),type;($imgsBeforePaste.each(function(){if(img===this)return flag=!0,!1}),flag)||(E.log("找到一个粘贴过来的图片"),reg.test(base64)?(E.log("src 是 base64 格式，可以上传"),type=base64.match(reg)[1],editor.xhrUploadImg({event:pasteEvent,base64:base64,fileType:type,name:uploadFileName})):E.log("src 为 "+base64+" ，不是 base64 格式，暂时不支持上传"),$img.remove())});E.log("遍历结束")}var editor=this,txt=editor.txt,$txt=txt.$txt,config=editor.config,uploadImgUrl=config.uploadImgUrl,uploadFileName=config.uploadImgFileName||"wangEditorPasteFile",pasteEvent,$imgsBeforePaste;if(uploadImgUrl)$txt.on("paste",function(e){pasteEvent=e;var data=pasteEvent.clipboardData||pasteEvent.originalEvent.clipboardData,text,items;(text=data==null?window.clipboardData&&window.clipboardData.getData("text"):data.getData("text/plain")||data.getData("text/html"),text)||(items=data&&data.items,items?(E.log("通过 data.items 得到了数据"),$.each(items,function(key,value){var fileType=value.type||"",file,reader;fileType.indexOf("image")<0||(file=value.getAsFile(),reader=new FileReader,E.log("得到一个粘贴图片"),reader.onload=function(e){E.log("读取到粘贴的图片");var base64=e.target.result||this.result;editor.xhrUploadImg({event:pasteEvent,base64:base64,fileType:fileType,name:uploadFileName})},reader.readAsDataURL(file))})):(E.log("未从 data.items 得到数据，使用检测粘贴图片的方式"),$imgsBeforePaste=$txt.find("img"),E.log("粘贴前，检查到编辑器有"+$imgsBeforePaste.length+"个图片"),setTimeout(findPasteImgAndUpload,0)))})})}),_e(function(E,$){E.plugin(function(){var editor=this,txt=editor.txt,$txt=txt.$txt,config=editor.config,uploadImgUrl=config.uploadImgUrl,uploadFileName=config.uploadImgFileName||"wangEditorDragFile";if(uploadImgUrl){E.$document.on("dragleave drop dragenter dragover",function(e){e.preventDefault()});$txt.on("drop",function(dragEvent){dragEvent.preventDefault();var originalEvent=dragEvent.originalEvent,files=originalEvent.dataTransfer&&originalEvent.dataTransfer.files;files&&files.length&&$.each(files,function(k,file){var type=file.type,name=file.name,reader;type.indexOf("image/")<0||(E.log("得到图片 "+name),reader=new FileReader,reader.onload=function(e){E.log("读取到图片 "+name);var base64=e.target.result||this.result;editor.xhrUploadImg({event:dragEvent,base64:base64,fileType:type,name:uploadFileName})},reader.readAsDataURL(file))})})}})}),_e(function(E,$){E.plugin(function(){function render(){isRendered||(bindEvent(),$toolbar.append($triangle).append($delete).append($zoomSmall).append($zoomBig),editor.$editorContainer.append($toolbar),isRendered=!0)}function bindEvent(){function command(e,callback){html=$txt.html();var cb=function(){callback&&callback();html!==$txt.html()&&$txt.change()};commandFn&&editor.customCommand(e,commandFn,cb)}var commandFn;$delete.click(function(e){commandFn=function(){$currentTable.remove()};command(e,function(){setTimeout(hide,100)})});$zoomBig.click(function(e){commandFn=function(){$currentTable.css({width:"100%"})};command(e,function(){setTimeout(show)})});$zoomSmall.click(function(e){commandFn=function(){$currentTable.css({width:"auto"})};command(e,function(){setTimeout(show)})})}function show(){var width;if(!editor._disabled&&$currentTable!=null){$currentTable.addClass("clicked");var tablePosition=$currentTable.position(),tableTop=tablePosition.top,tableLeft=tablePosition.left,tableHeight=$currentTable.outerHeight(),tableWidth=$currentTable.outerWidth(),top=tableTop+tableHeight,left=tableLeft,marginLeft=0,txtTop=$currentTxt.position().top,txtHeight=$currentTxt.outerHeight();top>txtTop+txtHeight&&(top=txtTop+txtHeight);$toolbar.show();width=$toolbar.outerWidth();marginLeft=tableWidth/2-width/2;$toolbar.css({top:top+5,left:left,"margin-left":marginLeft});marginLeft<0?($toolbar.css("margin-left","0"),$triangle.hide()):$triangle.show()}}function hide(){$currentTable!=null&&($currentTable.removeClass("clicked"),$currentTable=null,$toolbar.hide())}var editor=this,txt=editor.txt,$txt=txt.$txt,html="",$currentTxt=editor.useMaxHeight?$txt.parent():$txt,$currentTable,isRendered=!1,$toolbar=$('<div class="txt-toolbar"><\/div>'),$triangle=$('<div class="tip-triangle"><\/div>'),$delete=$('<a href="#"><i class="wangeditor-menu-img-trash-o"><\/i><\/a>'),$zoomSmall=$('<a href="#"><i class="wangeditor-menu-img-search-minus"><\/i><\/a>'),$zoomBig=$('<a href="#"><i class="wangeditor-menu-img-search-plus"><\/i><\/a>');$currentTxt.on("click","table",function(e){var $table=$(e.currentTarget);if(render(),$currentTable&&$currentTable.get(0)===$table.get(0)){setTimeout(hide,100);return}$currentTable=$table;show();e.preventDefault();e.stopPropagation()}).on("click keydown scroll",function(){setTimeout(hide,100)});E.$body.on("click keydown scroll",function(){setTimeout(hide,100)})})}),_e(function(E,$){E.userAgent.indexOf("MSIE 8")>0||E.plugin(function(){function imgLink(e,url){if($currentImg){var commandFn,callback=function(){url!=null&&(currentLink=url);html!==$txt.html()&&$txt.change()},$link,inLink=!1,$parent=$currentImg.parent();if($parent.get(0).nodeName.toLowerCase()==="a"?($link=$parent,inLink=!0):$link=$('<a target="_blank"><\/a>'),url==null)return $link.attr("href")||"";if(url==="")inLink&&(commandFn=function(){$currentImg.unwrap()});else{if(url===currentLink)return;commandFn=function(){$link.attr("href",url);inLink||$currentImg.wrap($link)}}commandFn&&(html=$txt.html(),editor.customCommand(e,commandFn,callback))}}function render(){isRendered||(bindToolbarEvent(),bindDragEvent(),$menuContainer.append($delete).append($zoomSmall).append($zoomBig).append($alignLeft).append($alignCenter).append($alignRight).append($link).append($unLink),$linkInputContainer.append($linkInput).append($linkBtnCancel).append($linkBtnSubmit),$toolbar.append($triangle).append($menuContainer).append($linkInputContainer),editor.$editorContainer.append($toolbar).append($dragPoint),isRendered=!0)}function bindToolbarEvent(){function customCommand(e,callback){var cb;html=$txt.html();cb=function(){callback&&callback();html!==$txt.html()&&$txt.change()};commandFn&&editor.customCommand(e,commandFn,cb)}var commandFn;$delete.click(function(e){imgLink(e,"");commandFn=function(){$currentImg.remove()};customCommand(e,function(){setTimeout(hide,100)})});$zoomBig.click(function(e){commandFn=function(){var img=$currentImg.get(0),width=img.width,height=img.height;width=width*1.1;height=height*1.1;$currentImg.css({width:width+"px",height:height+"px"})};customCommand(e,function(){setTimeout(show)})});$zoomSmall.click(function(e){commandFn=function(){var img=$currentImg.get(0),width=img.width,height=img.height;width=width*.9;height=height*.9;$currentImg.css({width:width+"px",height:height+"px"})};customCommand(e,function(){setTimeout(show)})});$alignLeft.click(function(e){commandFn=function(){$currentImg.parents("p").css({"text-align":"left"}).attr("align","left")};customCommand(e,function(){setTimeout(hide,100)})});$alignRight.click(function(e){commandFn=function(){$currentImg.parents("p").css({"text-align":"right"}).attr("align","right")};customCommand(e,function(){setTimeout(hide,100)})});$alignCenter.click(function(e){commandFn=function(){$currentImg.parents("p").css({"text-align":"center"}).attr("align","center")};customCommand(e,function(){setTimeout(hide,100)})});$link.click(function(e){e.preventDefault();currentLink=imgLink(e);$linkInput.val(currentLink);$menuContainer.hide();$linkInputContainer.show()});$linkBtnSubmit.click(function(e){e.preventDefault();var url=$.trim($linkInput.val());url&&imgLink(e,url);setTimeout(hide)});$linkBtnCancel.click(function(e){e.preventDefault();$linkInput.val(currentLink);$menuContainer.show();$linkInputContainer.hide()});$unLink.click(function(e){e.preventDefault();imgLink(e,"");setTimeout(hide)})}function bindDragEvent(){function mousemove(e){var diffX,diffY,currentDragMarginLeft,currentDragMarginTop,currentImgWidth,currentImggHeight;diffX=e.pageX-_x;diffY=e.pageY-_y;currentDragMarginLeft=dragMarginLeft+diffX;currentDragMarginTop=dragMarginTop+diffY;$dragPoint.css({"margin-left":currentDragMarginLeft,"margin-top":currentDragMarginTop});currentImgWidth=imgWidth+diffX;currentImggHeight=imgHeight+diffY;$currentImg&&$currentImg.css({width:currentImgWidth,height:currentImggHeight})}var _x,_y,dragMarginLeft,dragMarginTop,imgWidth,imgHeight;$dragPoint.on("mousedown",function(e){if($currentImg){_x=e.pageX;_y=e.pageY;dragMarginLeft=parseFloat($dragPoint.css("margin-left"),10);dragMarginTop=parseFloat($dragPoint.css("margin-top"),10);imgWidth=$currentImg.width();imgHeight=$currentImg.height();$toolbar.hide();E.$document.on("mousemove._dragResizeImg",mousemove);E.$document.on("mouseup._dragResizeImg",function(){E.$document.off("mousemove._dragResizeImg");E.$document.off("mouseup._dragResizeImg");hide();$dragPoint.css({"margin-left":dragMarginLeft,"margin-top":dragMarginTop});isOnDrag=!1});isOnDrag=!0}})}function show(){var width;if(!editor._disabled&&$currentImg!=null){$currentImg.addClass("clicked");var imgPosition=$currentImg.position(),imgTop=imgPosition.top,imgLeft=imgPosition.left,imgHeight=$currentImg.outerHeight(),imgWidth=$currentImg.outerWidth();$dragPoint.css({top:imgTop+imgHeight,left:imgLeft+imgWidth});var top=imgTop+imgHeight,left=imgLeft,marginLeft=0,txtTop=$currentTxt.position().top,txtHeight=$currentTxt.outerHeight();top>txtTop+txtHeight?top=txtTop+txtHeight:$dragPoint.show();$toolbar.show();width=$toolbar.outerWidth();marginLeft=imgWidth/2-width/2;$toolbar.css({top:top+5,left:left,"margin-left":marginLeft});marginLeft<0?($toolbar.css("margin-left","0"),$triangle.hide()):$triangle.show();editor.disableMenusExcept()}}function hide(){$currentImg!=null&&($currentImg.removeClass("clicked"),$currentImg=null,$toolbar.hide(),$dragPoint.hide(),editor.enableMenusExcept())}function isEmotion(imgSrc){var result=!1;return editor.emotionUrls?($.each(editor.emotionUrls,function(index,url){var flag=!1;return imgSrc===url&&(result=!0,flag=!0),flag?!1:void 0}),result):result}var editor=this,lang=editor.config.lang,txt=editor.txt,$txt=txt.$txt,html="",$currentTxt=editor.useMaxHeight?$txt.parent():$txt,$editorContainer=editor.$editorContainer,$currentImg,currentLink="",isRendered=!1,$dragPoint=$('<div class="img-drag-point"><\/div>'),$toolbar=$('<div class="txt-toolbar"><\/div>'),$triangle=$('<div class="tip-triangle"><\/div>'),$menuContainer=$("<div><\/div>"),$delete=$('<a href="#"><i class="wangeditor-menu-img-trash-o"><\/i><\/a>'),$zoomSmall=$('<a href="#"><i class="wangeditor-menu-img-search-minus"><\/i><\/a>'),$zoomBig=$('<a href="#"><i class="wangeditor-menu-img-search-plus"><\/i><\/a>'),$alignLeft=$('<a href="#"><i class="wangeditor-menu-img-align-left"><\/i><\/a>'),$alignCenter=$('<a href="#"><i class="wangeditor-menu-img-align-center"><\/i><\/a>'),$alignRight=$('<a href="#"><i class="wangeditor-menu-img-align-right"><\/i><\/a>'),$link=$('<a href="#"><i class="wangeditor-menu-img-link"><\/i><\/a>'),$unLink=$('<a href="#"><i class="wangeditor-menu-img-unlink"><\/i><\/a>'),$linkInputContainer=$('<div style="display:none;"><\/div>'),$linkInput=$('<input type="text" style="height:26px; margin-left:10px; width:200px;"/>'),$linkBtnSubmit=$('<button class="right">'+lang.submit+"<\/button>"),$linkBtnCancel=$('<button class="right gray">'+lang.cancel+"<\/button>"),isOnDrag=!1;$currentTxt.on("mousedown","img",function(e){e.preventDefault()}).on("click","img",function(e){var $img=$(e.currentTarget),src=$img.attr("src");if(src&&!isEmotion(src)){if(render(),$currentImg&&$currentImg.get(0)===$img.get(0)){setTimeout(hide,100);return}$currentImg=$img;show();$menuContainer.show();$linkInputContainer.hide();e.preventDefault();e.stopPropagation()}}).on("click keydown scroll",function(){isOnDrag||setTimeout(hide,100)})})}),_e(function(E,$){E.plugin(function(){function render(){isRendered||($toolbar.append($triangle).append($triggerLink),editor.$editorContainer.append($toolbar),isRendered=!0)}function setPosition(){if($currentLink){var position=$currentLink.position(),left=position.left,top=position.top,height=$currentLink.height(),topResult=top+height+5,menuHeight=editor.menuContainer.height(),txtHeight=editor.txt.$txt.outerHeight();topResult>menuHeight+txtHeight&&(topResult=menuHeight+txtHeight+5);$toolbar.css({top:topResult,left:left})}}function show(){if(!isShow&&$currentLink){render();$toolbar.show();var href=$currentLink.attr("href");$triggerLink.attr("href",href);setPosition();isShow=!0}}function hide(){isShow&&$currentLink&&($toolbar.hide(),isShow=!1)}var editor=this,lang=editor.config.lang,$txt=editor.txt.$txt,$currentLink,$toolbar=$('<div class="txt-toolbar"><\/div>'),$triangle=$('<div class="tip-triangle"><\/div>'),$triggerLink=$('<a href="#" target="_blank"><i class="wangeditor-menu-img-link"><\/i> '+lang.openLink+"<\/a>"),isRendered,isShow=!1,showTimeoutId,hideTimeoutId,showTimeoutIdByToolbar;$txt.on("mouseenter","a",function(e){showTimeoutId&&clearTimeout(showTimeoutId);showTimeoutId=setTimeout(function(){var a=e.currentTarget,$a=$(a),$img;($currentLink=$a,$img=$a.children("img"),$img.length&&($img.click(function(){hide()}),$img.hasClass("clicked")))||show()},500)}).on("mouseleave","a",function(){hideTimeoutId&&clearTimeout(hideTimeoutId);hideTimeoutId=setTimeout(hide,500)}).on("click keydown scroll",function(){setTimeout(hide,100)});$toolbar.on("mouseenter",function(){hideTimeoutId&&clearTimeout(hideTimeoutId)}).on("mouseleave",function(){showTimeoutIdByToolbar&&clearTimeout(showTimeoutIdByToolbar);showTimeoutIdByToolbar=setTimeout(hide,500)})})}),_e(function(E){E.plugin(function(){var editor=this,menuFixed=editor.config.menuFixed,bodyMarginTop;if(menuFixed!==!1&&typeof menuFixed=="number"){bodyMarginTop=parseFloat(E.$body.css("margin-top"),10);isNaN(bodyMarginTop)&&(bodyMarginTop=0);var $editorContainer=editor.$editorContainer,editorTop=$editorContainer.offset().top,editorHeight=$editorContainer.outerHeight(),$menuContainer=editor.menuContainer.$menuContainer,menuCssPosition=$menuContainer.css("position"),menuCssTop=$menuContainer.css("top"),menuTop=$menuContainer.offset().top,menuHeight=$menuContainer.outerHeight(),$txt=editor.txt.$txt;E.$window.scroll(function(){if(!editor.isFullScreen){var sTop=E.$window.scrollTop(),menuWidth=$menuContainer.width();menuTop===0&&(menuTop=$menuContainer.offset().top,editorTop=$editorContainer.offset().top,editorHeight=$editorContainer.outerHeight(),menuHeight=$menuContainer.outerHeight());sTop>=menuTop&&sTop+menuFixed+menuHeight+30<editorTop+editorHeight?($menuContainer.css({position:"fixed",top:menuFixed}),$menuContainer.width(menuWidth),E.$body.css({"margin-top":bodyMarginTop+menuHeight}),editor._isMenufixed||(editor._isMenufixed=!0)):($menuContainer.css({position:menuCssPosition,top:menuCssTop}),$menuContainer.css("width","100%"),E.$body.css({"margin-top":bodyMarginTop}),editor._isMenufixed&&(editor._isMenufixed=!1))}})}})}),_e(function(E,$){E.createMenu(function(check){var menuId="indent",editor,menu;check(menuId)&&(editor=this,menu=new E.Menu({editor:editor,id:menuId,title:"缩进",$domNormal:$('<a href="#" tabindex="-1"><i class="wangeditor-menu-img-indent-left"><\/i><\/a>'),$domSelected:$('<a href="#" tabindex="-1" class="selected"><i class="wangeditor-menu-img-indent-left"><\/i><\/a>')}),menu.clickEvent=function(e){function commandFn(){$p.css("text-indent","2em")}var elem=editor.getRangeElem(),p=editor.getSelfOrParentByName(elem,"p"),$p;if(!p)return e.preventDefault();$p=$(p);editor.customCommand(e,commandFn)},menu.clickEventSelected=function(e){function commandFn(){$p.css("text-indent","0")}var elem=editor.getRangeElem(),p=editor.getSelfOrParentByName(elem,"p"),$p;if(!p)return e.preventDefault();$p=$(p);editor.customCommand(e,commandFn)},menu.updateSelectedEvent=function(){var elem=editor.getRangeElem(),p=editor.getSelfOrParentByName(elem,"p"),$p,indent;return p?($p=$(p),indent=$p.css("text-indent"),!indent||indent==="0px")?!1:!0:!1},editor.menus[menuId]=menu)})}),_e(function(E,$){E.createMenu(function(check){var menuId="lineheight",editor;if(check(menuId)){editor=this;editor.commandHooks.lineHeight=function(value){var rangeElem=editor.getRangeElem(),targetElem=editor.getSelfOrParentByName(rangeElem,"p,h1,h2,h3,h4,h5,pre");targetElem&&$(targetElem).css("line-height",value+"")};var menu=new E.Menu({editor:editor,id:menuId,title:"行高",commandName:"lineHeight",$domNormal:$('<a href="#" tabindex="-1"><i class="wangeditor-menu-img-arrows-v"><\/i><\/a>'),$domSelected:$('<a href="#" tabindex="-1" class="selected"><i class="wangeditor-menu-img-arrows-v"><\/i><\/a>')});menu.dropList=new E.DropList(editor,menu,{data:{"1.0":"1.0倍","1.5":"1.5倍","1.8":"1.8倍","2.0":"2.0倍","2.5":"2.5倍","3.0":"3.0倍"},tpl:'<span style="line-height:{#commandValue}">{#title}<\/span>'});editor.menus[menuId]=menu}})}),_e(function(E,$){E.plugin(function(){var editor=this,customUpload=editor.config.customUpload,$uploadContent,$uploadIcon,btnId,containerId;if(customUpload){if(editor.config.uploadImgUrl){alert("自定义上传无效，详看浏览器日志console.log");E.error("已经配置了 uploadImgUrl ，就不能再配置 customUpload ，两者冲突。将导致自定义上传无效。");return}}else return;$uploadContent=editor.$uploadContent;$uploadContent||E.error("自定义上传，无法获取 editor.$uploadContent");$uploadIcon=$('<div class="upload-icon-container"><i class="wangeditor-menu-img-upload"><\/i><\/div>');$uploadContent.append($uploadIcon);btnId="upload"+E.random();containerId="upload"+E.random();$uploadIcon.attr("id",btnId);$uploadContent.attr("id",containerId);editor.customUploadBtnId=btnId;editor.customUploadContainerId=containerId})}),_e(function(E){E.info("本页面富文本编辑器由 wangEditor 提供 http://wangeditor.github.io/ ")}),window.wangEditor});$(function(){function initWang($editor,set){var h=$editor.data("height")||"500px",settings=$.extend({height:h,uploadImgUrl:"/api/WangUp/UploadFile",defaultText:""},set),editor=$editor.data("wangEditor");return editor?editor:(editor=new wangEditor($editor),$editor.css({height:settings.height}),$editor.data("wangEditor",editor),editor.config.uploadHeaders={Accept:"text/x-json"},editor.config.uploadImgUrl=settings.uploadImgUrl,editor.config.menus=$.map(wangEditor.config.menus,function(item){return["video","insertcode","fullscreen"].indexOf(item)>=0?null:item}),editor.onchange=function(){editor.$txt.trigger("change",this);$editor.trigger("change")},editor.create(),editor.$txt.html(settings.defaultText),editor)}function registerWang(){var field="item",selector="textarea.richedit",act=function($form,callback){$form.find(selector).each(function(i,o){var $o=$(o),wang=$o.initWang(),item=$o.data(field);callback&&callback(wang,item)})};$("body").on("after.InitForm",function(sender,form){var $form=$(form);act($form)}).on("after.Binder",function(sender,form,model){var $form=$(form);act($form,function(wang,ff){ff&&wang.$txt.html(model[ff])})}).on("after.ResetForm",function(sender,form){var $form=$(form);act($form,function(wang){wang.$txt.html("")})})}$.fn.initWang=function(set){return initWang($(this),set)};$.registerWang=registerWang}),function(Sail){var clickOrTouch,ExportExcel;Sail.debug=!1;Sail.enableDebug=function(){Sail.debug=!0};$.fn.initEditor=function(){return $(this).find(".myeditor").each(function(i,o){try{var editor=new baidu.editor.ui.Editor({initialframewidth:"100%"});editor.render($(o).prop("id"));$(o).data("editor",editor)}catch(e){console.log("编辑器初始化失败")}}),this};$.fn.resetEditor=function(){try{$(this).find(".myeditor").each(function(i,o){var editor=$(o).data("editor");editor.ready(function(){editor.setContent("")})})}catch(e){console.log("重置编辑器失败")}return this};$.fn.editorToModel=function(model){try{$(this).find(".myeditor").each(function(i,o){var editor=$(o).data("editor");editor.ready(function(){model[$(o).data("item")]=editor.getContent()})})}catch(e){console.log("从编辑器取值失败")}return model};$.fn.setToEditor=function(model){try{$(this).find(".myeditor").each(function(i,o){var $obj=$(o),editor=$obj.data("editor");editor.ready(function(){editor.setContent(model[$obj.data("item")])})})}catch(e){console.log("设置编辑器内容失败")}return this};$.fn.valToInt=function(){var val=$(this).val(),x;return val?(x=parseInt(val),isNaN(x)&&(x=0),x):0};$.fn.valToFloat=function(){var val=$(this).val(),x;return val?(x=parseFloat(val),isNaN(x)&&(x=0),x):0};$.fn.AddSum=function(cols,title,skipStep){var tbody=$(this),table=tbody.parent(),tfoot=$("<tr>"),trs,i;for(skipStep||(skipStep=1),trs=table.find("thead tr:eq(0) th").length,tfoot.html(""),$("<th>{0}<\/th>".format(title?title:"合计")).appendTo(tfoot),i=1;i<trs;i++)$("<th>&nbsp;<\/th>").appendTo(tfoot);return $.each(cols,function(i,o){var sum=0,tdIndex=-1,fixed=2;typeof o=="number"?tdIndex=o:(tdIndex=o[0],fixed=o[1]);tbody.find("tr").each(function(trindex){if(trindex%skipStep!=0)return!0;var td=$(this).find("td:eq("+tdIndex+")"),istablesaw=td.find("span.tablesaw-cell-content").length>0,value=istablesaw?td.find("span.tablesaw-cell-content").text():td.text();return $.each(value.split("\n"),function(index,str){if(str){var num=parseFloat(str);isNaN(num)||(sum+=num)}}),!0});tfoot.appendTo(tbody);tfoot.find("th:eq("+tdIndex+")").text(sum.toFixed(fixed))}),tfoot};$.fn.Display=function(isShow){var $this=$(this);return isShow?$this.show():$this.hide(),$this};$.fn.MakeHead=function(heads){$(this).empty();var tr=$("<tr><\/tr>").appendTo(this);try{heads.map(function(v){var $th=$("<th>").appendTo(tr);typeof v=="string"?$th.text(v):(v.name&&$th.text(v.name),v.class&&$th.addClass(v.class),v.width&&$th.width(v.width))})}catch(err){console.log(err)}return this};clickOrTouch="ontouchend"in window?"touchend":"click";$.fn.ClickOrTouch=function(target,act){var $this=$(this);$this.on(clickOrTouch,target,act);return $this};$.fn.SetDate=function(){return $(this).on("focus",function(){WdatePicker({lang:"zh-cn",skin:"default",onpicked:function(){$(this).blur();$(this).change()},oncleared:function(){$(this).blur();$(this).change()}})}).prop("readonly",!0),this};$.fn.SetDateTime=function(){return $(this).on("focus",function(){WdatePicker({dateFmt:"yyyy-M-d HH:mm:ss",minDate:"%y-%M-%d 08:mm:ss",lang:"zh-cn",skin:"whyGreen",onpicked:function(){$(this).blur();$(this).change()},oncleared:function(){$(this).blur();$(this).change()}})}).prop("readonly",!0),this};$.fn.initForm=function(){var form=$(this);return form.find("input.date:enabled").SetDate(),form.find("input.datetime:enabled").SetDateTime(),form.find("select.ajaxSelect").each(function(){$(this).ajaxAddOptions()}),$(".dateSwitch").each(function(i,o){$(o).DateSwitch()}),$.fn.bootstrapSwitch&&form.find("input[type=checkbox].checkSwitch").each(function(){var check=$(this);check.bootstrapSwitch({onText:check.data("ontext"),offText:check.data("offtext"),labelText:check.data("label")})}),form.initEditor(),$.registerWang&&$.registerWang(),form.trigger("after.InitForm",form),form};$.fn.ResetForm=function(){var form=$(this);return form.find("textarea,input:not([type=radio], [type=checkbox])").val("").trigger("change"),form.find("input[type=checkbox],input[type=radio]").prop("checked",!1).trigger("change"),form.find(".has-error").removeClass("has-error"),$.fn.bootstrapSwitch&&form.find("input[type=checkbox].checkSwitch").each(function(){$(this).bootstrapSwitch("state",!1).prop("checked",!1)}),form.find("input,textarea").each(function(){var $this=$(this),defaultValue=$this.data("defaultvalue");defaultValue!=undefined?$this.val(defaultValue):$this.val("");$this.trigger("change")}),form.find("img").each(function(){var $this=$(this),defaultValue=$this.data("defaultvalue");defaultValue!=undefined&&$this.prop("src",defaultValue)}),form.find("select").each(function(){var $this=$(this),defaultValue=$this.data("defaultvalue");defaultValue==undefined&&(defaultValue=$this.find("option:eq(0)").val());$this.val(defaultValue).trigger("change")}),form.resetEditor(),$("body").trigger("after.ResetForm",form),form.trigger("after.form.ResetForm",form),form};$.fn.tagName=function(){return this.prop("tagName")};$.fn.GetJson=function(){var model={},form=$(this),items=form.find("input,textarea,select"),o,i,name,value,p;items.each(function(){var obj=$(this),name=obj.prop("name"),id=obj.prop("id");return!id||id.indexOf("s2id_")===0?!0:(name||(name=id,obj.prop("name",name)),!0)});o=items.serializeArray();for(i in o)o.hasOwnProperty(i)&&(name=o[i].name,value=o[i].value,typeof model[name]=="undefined"?model[name]=value:model[name]+=","+value);for(p in model)model.hasOwnProperty(p)&&(model[p]=$.trim(model[p]));return form.find("input[type=checkbox][data-valuetype=bool]").each(function(){var checkbox=$(this),id=checkbox.prop("id");model[id]=checkbox.is(":checked")}),model=form.editorToModel(model),form.trigger("after.GetJson",model),model};$.fn.AddOptions=function(data,defaulttext,defaultvalue,setting){var set=$.extend({key:"Key",value:"Value"},setting),$select=$(this),optStr="<option>";defaultvalue||(defaultvalue="");$select.empty();defaulttext&&$(optStr).val(defaultvalue).text(defaulttext).appendTo($select);$.each(data,function(i,o){$(optStr).val(o[set.key]).text(o[set.value]).appendTo($select).data(o)})};$.fn.ajaxAddOptions=function(url,id,text,defaultId,defaultText){var item=$(this),$this=item,optstr;return(url||(url=$this.data("url")),!url)?item:(url.indexOf("/")!==0&&(url=$.SailConfig.ApiRoot+url),id||(id=$this.data("value")||"id",text=$this.data("text")||"Name",defaultId=$this.data("defaultvalue"),defaultText=$this.data("defaulttext")),optstr="<option value='{0}'>{1}<\/<option>",item.empty(),defaultText&&item.append(optstr.format(defaultId,defaultText)),$.ajax({url:url,success:function(json){json.IsSuccess&&($(json.Data).each(function(index,element){var option=$(optstr.format(element[id],element[text]));option.data("item",element);item.append(option)}),item.trigger("ajax.Done",json.Data))}}),item)};$.fn.closeModal=function(){$("#modal_overlay").fadeOut(200);$(this).trigger("hidden.bs.modal");$(this).hide()};$.fn.myModal=function(options){var modal=$(this),overlay=$("#modal_overlay");overlay.length===0&&($("body").append($("<div id='modal_overlay'><\/div>")),overlay=$("#modal_overlay"));switch(options){case"hide":modal.closeModal();break;default:modal.off("click","[aria-hidden=true]").on("click","[aria-hidden=true]",function(){modal.closeModal()});overlay.css({display:"block",opacity:0});overlay.fadeTo(100,.6);modal.fadeTo(100,1)}};$.fn.ItemBinder=function(object){var $this=$(this),binder=$this.data("binder");return binder||(binder=new Sail.Binder($(this),object),$this.data("binder",binder)),object&&binder.SetObject(object),binder};$.fn.CheckValidation=function(){return $(this).validationEngine({returnIsValid:!0})};$.fn.EnterToClick=function(btn){return $(this).keydown(function(event){event.keyCode===13&&$(btn).click()}),this};$.fn.TableChange=function(){var $this=$(this);return $this.find("td").each(function(i,o){$(o).html()||$(o).html("&nbsp;")}),$this};$.fn.loadRemoteTmpl=function(){var $this=$(this),html=$this.html();return html&&html.trim()||$this.prop("src")&&$.ajax({url:$this.prop("src"),async:!1,cache:!1,success:function(template){$this.html(template)}}),$this};$.fn.Link=function(tmpl,data){return $.isArray(data)||(data=[data]),$.Loadtmpl(tmpl).link(this,data),$.fn.tooltip&&$(this).find("[data-toggle=tooltip]").tooltip(),$(this).TableChange()};$.fn.Render=function(tmpl,data){return $.isArray(data)||(data=[data]),$.fn.tooltip&&$(this).find("[data-toggle=tooltip]").tooltip(),$(this).html($.Loadtmpl(tmpl).render(data)),$(this).TableChange()};$.fn.DateSwitch=function(){var $this=$(this),$ipts=$this.find("input[type=text]"),$start=$ipts.eq(0),$end=$ipts.eq(1),dayFormat="yyyy-MM-dd",isInit;[".today",".thisWeek",".thisMonth",".preDay",".nextDay",".preWeek",".nextWeek",".preMonth",".nextMonth"].forEach(function(x){$this.off("click",x)});$this.on("click",".today",function(){var date=(new Date).format(dayFormat);$start.val(date);$end.val(date)}).on("click",".thisWeek",function(){$start.val((new Date).WeekFirst().format(dayFormat));$end.val((new Date).WeekEnd().format(dayFormat))}).on("click",".thisMonth",function(){$start.val((new Date).MonthFirst().format(dayFormat));$end.val((new Date).MonthEnd().format(dayFormat))}).on("click",".preDay",function(){$start.val()||$start.val((new Date).format(dayFormat));var date=DateTime.Parse($start.val()).AddDays(-1).format(dayFormat);$start.val(date);$end.val(date)}).on("click",".nextDay",function(){$start.val()||$start.val((new Date).format(dayFormat));var date=DateTime.Parse($start.val()).AddDays(1).format(dayFormat);$start.val(date);$end.val(date)}).on("click",".preWeek",function(){$start.val()||$start.val((new Date).format(dayFormat));var date=DateTime.Parse($start.val()).WeekFirst().AddDays(-7);$start.val(date.format(dayFormat));$end.val(date.WeekEnd().format(dayFormat))}).on("click",".nextWeek",function(){$start.val()||$start.val((new Date).format(dayFormat));var date=DateTime.Parse($start.val()).WeekFirst().AddDays(7);$start.val(date.format(dayFormat));$end.val(date.WeekEnd().format(dayFormat))}).on("click",".preMonth",function(){$start.val()||$start.val((new Date).format(dayFormat));var date=DateTime.Parse($start.val()).MonthFirst().AddMonths(-1);$start.val(date.format(dayFormat));$end.val(date.MonthEnd().format(dayFormat))}).on("click",".nextMonth",function(){$start.val()||$start.val((new Date).format(dayFormat));var date=DateTime.Parse($start.val()).MonthFirst().AddMonths(1);$start.val(date.format(dayFormat));$end.val(date.MonthEnd().format(dayFormat))});return isInit=$this.data("init"),isInit!==!1&&$this.find(".thisMonth").click(),$this};$.fn.InitLogin=function(controll,path){var $this=$(this),$loginId=$this.find("#LoginId"),$Password=$this.find("#Password"),$ckRemember=$this.find("#ckRemember"),$btnLogin,cookieName,loginId;console.log($ckRemember);$btnLogin=$this.find("#btnLogin");cookieName=path+"LoginId";console.log(cookieName);$loginId.focus();$Password.EnterToClick($btnLogin);loginId=$.cookie(cookieName);console.log(loginId);loginId&&($ckRemember.attr("checked",!0),$loginId.val(loginId),$Password.focus());$btnLogin.click(function(){$.post($.SailConfig.ApiRoot+controll+"/login",{"":JSON.stringify($this.GetJson())},function(result){if(!result.IsSuccess){ShowError(result.Msg);return}$ckRemember.is(":checked")?(console.log($loginId.val()),$.cookie(cookieName,$loginId.val(),{expires:30,path:path}),console.log($.cookie(cookieName))):$.removeCookie(cookieName,{path:path});window.location.href=path})})};$.fn.Table2Excel=function(options){var e=this;return e.each(function(){$.data(e,"plugin_table2excel")||$.data(e,"plugin_table2excel",new Sail.ExportExcel(this,options))}),e};ExportExcel=function(){function ExportExcel(element,options){this.element=element;this.defaults={exclude:".noExl",name:"Table2Excel"};this.settings=$.extend({},this.defaults,options);this.init()}return ExportExcel.prototype.init=function(){var _this=this,e=this;e.uri="data:application/vnd.ms-excel;base64,";e.template={head:'<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets>',sheet:{head:"<x:ExcelWorksheet><x:Name>",tail:"<\/x:Name><x:WorksheetOptions><x:DisplayGridlines/><\/x:WorksheetOptions><\/x:ExcelWorksheet>"},mid:"<\/x:ExcelWorksheets><\/x:ExcelWorkbook><\/xml><![endif]--><\/head><body>",table:{head:"<table>",tail:"<\/table>"},foot:"<\/body><\/html>"};e.tableRows=[];$(e.element).each(function(i,o){var tempRows="";$(o).find("tr").not(_this.settings.exclude).each(function(i,o){tempRows+="<tr>"+$(o).html()+"<\/tr>"});_this.tableRows.push(tempRows)});e.tableToExcel(e.tableRows,e.settings.name)},ExportExcel.prototype.format=function(s,c){return s.replace(/{(\w+)}/g,function(m,p){return c[p]})},ExportExcel.prototype.base64=function(s){return window.btoa(unescape(encodeURIComponent(s)))},ExportExcel.prototype.getFileName=function(settings){return(settings.filename?settings.filename:"table2excel")+".xls"},ExportExcel.prototype.tableToExcel=function(table,name){var e=this,fullTemplate,i,link,a;if(e.ctx={worksheet:name||"Worksheet",table:table},fullTemplate=e.template.head,$.isArray(table))for(i in table)fullTemplate+=e.template.sheet.head+"Table"+i+""+e.template.sheet.tail;if(fullTemplate+=e.template.mid,$.isArray(table))for(i in table)fullTemplate+=e.template.table.head+"{table"+i+"}"+e.template.table.tail;fullTemplate+=e.template.foot;for(i in table)table.hasOwnProperty(i)&&(e.ctx["table"+i]=table[i]);return delete e.ctx.table,link=e.uri+e.base64(e.format(fullTemplate,e.ctx)),a=document.createElement("a"),a.download=e.getFileName(e.settings),a.href=link,a.setAttribute("hidden","hidden"),document.body.append(a),a.click(),!0},ExportExcel}();Sail.ExportExcel=ExportExcel}(Sail||(Sail={}));$().ready(function(){$("body").initForm().validationEngine()}),function(Sail){$.setSailConfig=function(set){$.SailConfig=$.extend({Root:"/",ApiRoot:"/Api/",PageContent:".flexbox-content"},set)};$.setSailConfig(null);$.CreateModal=function(id,set){return new Sail.Modal(id,set)};$.LoadParam=function(obj){return JSON.parse(decodeURIComponent(btoa($(obj).val())))};$.decodeParam=function(){if(!location.search)return{};var search=location.search.substring(1);return JSON.parse('{"'+decodeURI(search).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')};$.encodeObject=function(obj){return atob(encodeURIComponent(JSON.stringify(obj)))};$.decodeObject=function(str){return JSON.parse(decodeURIComponent(btoa(str)))};$.Request=function(name){var url=window.location.href,reg=new RegExp("(\\?|&)"+name+"=([^&?#]*)","i"),arr=url.match(reg);return arr?decodeURIComponent(arr[2]):""};$.ItemBinder=function(container,objItem){return new Sail.Binder(container,objItem)};$.Delete=function(url,data,act){return typeof data=="function"&&(act=data,data=null),$.ajax({url:url,type:"delete",data:data,dataType:"json",success:act})};$.Put=function(url,data,act){return typeof data=="function"&&(act=data,data=null),$.ajax({type:"put",url:url,data:data,dataType:"json",success:act})};$.LoadHtml=function(tmplName){function formatTemplatePath(name){return $.SailConfig.Root+"templates/"+name+".tmpl.html"}var tmplHtml="",template;return tmplName&&(tmplName.indexOf("#")==0?(template=$(tmplName).loadRemoteTmpl().html(),tmplHtml=template):(tmplHtml=$(document).data(tmplName+"_Tmpl"),tmplHtml||$.ajax({url:formatTemplatePath(tmplName),async:!1,cache:!1,success:function(template){tmplHtml=template;$(document).data(tmplName+"_Tmpl",template)}}))),tmplHtml};$.Loadtmpl=function(tmplName){var tmplHtml=$.LoadHtml(tmplName);return $.templates(tmplHtml)};$.Pagination=function(set){return new Sail.Pagination(set)}}(Sail||(Sail={})),function(DateTime){function AddDateTime(addType,numbers,dateTime){if(numbers==0||!addType)return dateTime;addType=addType.replace(/(^[\s　]*)|([\s　]*$)/g,"");addType=addType.toLowerCase();try{var giYear=dateTime.getFullYear(),giMonth=dateTime.getMonth(),giDay=dateTime.getDate(),giHour=dateTime.getHours(),giMinute=dateTime.getMinutes(),giSecond=dateTime.getSeconds(),giMillisecond=dateTime.getMilliseconds();switch(addType){case"millisecond":giMillisecond+=numbers;break;case"second":giSecond+=numbers;break;case"minute":giMinute+=numbers;break;case"hour":giHour+=numbers;break;case"day":giDay+=numbers;break;case"month":giMonth+=numbers;break;case"year":giYear+=numbers}dateTime.setFullYear(giYear);dateTime.setMonth(giMonth);dateTime.setDate(giDay);dateTime.setHours(giHour);dateTime.setMinutes(giMinute);dateTime.setSeconds(giSecond);dateTime.setMilliseconds(giMillisecond)}catch(e){}return dateTime}function Parse(str){if(!str)return null;var m=/^(?:-([0-9]{1,2})|([0-9]{4}))?(?:-?(?:([0-9]{2})?(?:-?([0-9]{2}))?|W([0-9]{2})(?:-?([1-7]))?|([0-9]{3})))?(?:T([0-9]{2})(?::?([0-9]{2})(?::?([0-9]{2}))?)?(?:[,\.]([0-9]+))?(?:(Z)|([+-])([0-9]{2})(?::?([0-9]{2}))?)?)?$/.exec(str);if(m)return new Date(m[2],(m[3]||1)-1,m[4]||1,m[8]||0,m[9]||0,m[10]||0,m[11]||0)}function IsLeapYear(year){return year%4==0||year%100==0||year%400==0}function DaysCount(year,month){var days;return month?(days=[31,28,31,30,31,30,31,31,30,31,30,31][month-1],IsLeapYear(year)&&month==2&&(days=29),days):IsLeapYear(year)?366:365}function MonthDaysList(year){var months=[31,28,31,30,31,30,31,31,30,31,30,31];return IsLeapYear(year)&&(months[1]=29),months}Date.prototype.dayofWeek=function(){return["周日","周一","周二","周三","周四","周五","周六"][this.getDay()]};Date.prototype.format=function(format){var o,k,tmp;o={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds(),ddd:this.dayofWeek()};/(y+)/.test(format)&&(format=format.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(k in o)o.hasOwnProperty(k)&&new RegExp("("+k+")").test(format)&&(tmp=RegExp.$1.length===1?o[k]:("00"+o[k]).substr((""+o[k]).length),format=format.replace(RegExp.$1,tmp));return format};Date.prototype.MonthFirst=function(){var result=new Date(this.getTime());return result.setDate(1),result};Date.prototype.MonthEnd=function(){var result=new Date(this.getTime());return result.setDate(DaysCount(this.getFullYear(),this.getMonth()+1)),result};Date.prototype.WeekFirst=function(){var day=this.getDay();return day===0?this.AddDays(-6):new Date(this-(this.getDay()-1)*864e5)};Date.prototype.WeekEnd=function(){var weekFirstDay=this.WeekFirst();return new Date((weekFirstDay/1e3+518400)*1e3)};Date.prototype.AddSeconds=function(seconds){return AddDateTime("second",seconds,this)};Date.prototype.AddMinutes=function(minutes){return AddDateTime("minute",minutes,this)};Date.prototype.AddHours=function(hours){return AddDateTime("hour",hours,this)};Date.prototype.AddDays=function(days){return AddDateTime("day",days,this)};Date.prototype.AddMonths=function(months){return AddDateTime("month",months,this)};Date.prototype.AddYears=function(years){return AddDateTime("year",years,this)};DateTime.Parse=Parse;DateTime.IsLeapYear=IsLeapYear;DateTime.DaysCount=DaysCount;DateTime.MonthDaysList=MonthDaysList}(DateTime||(DateTime={})),function(Sail){function getProperties(obj){var props=[];for(var p in obj)obj.hasOwnProperty(p)&&typeof obj[p]!="function"&&props.push({Name:p,Value:obj[p],Type:typeof obj[p]});return props}var ControlType,Binder;(function(ControlType){ControlType[ControlType.Val=0]="Val";ControlType[ControlType.Checked=1]="Checked";ControlType[ControlType.Src=2]="Src";ControlType[ControlType.Html=3]="Html"})(Sail.ControlType||(Sail.ControlType={}));ControlType=Sail.ControlType;$.fn.GetControlType=function(){var control=this;switch(control.prop("tagName")){case"IMG":return ControlType.Src;case"SELECT":case"TEXTAREA":return ControlType.Val;case"INPUT":switch(control.attr("type")){case"checkbox":case"radio":return ControlType.Checked;default:return ControlType.Val}default:return ControlType.Html}};$.fn.SetValue=function(value){function formatValue(control,value){var helper=control.data("helper"),func;return helper?(func=Sail.Binder.Helpers[helper],func(value)):value}var control=this;if(control&&typeof value!="undefined"){switch(control.GetControlType()){case ControlType.Checked:control.prop("checked",value);$.fn.bootstrapSwitch&&control.hasClass("checkSwitch")&&control.bootstrapSwitch("state",value);break;case ControlType.Val:(value||value===0)&&(control.hasClass("date")&&value?control.val(value.substring(0,10)):control.hasClass("datetime")&&value?control.val(DateTime.Parse(value).format("yyyy-MM-dd hh:mm")):control.data("dateformat")&&value?control.val(DateTime.Parse(value).format(control.data("dateformat"))):control.val(formatValue(control,value)));break;case ControlType.Src:control.prop("src",value);break;case ControlType.Html:value||value===0?control.hasClass("date")?control.html(value.substring(0,10)):control.hasClass("datetime")?control.html(DateTime.Parse(value).format("yyyy-MM-dd hh:mm")):control.data("dateformat")?control.html(DateTime.Parse(value).format(control.data("dateformat"))):control.html(formatValue(control,value)):control.empty()}control.trigger("change")}};$.fn.GetValue=function(type){var control=this,controlType=control.GetControlType();switch(type){case"boolean":return control.is(":checked");case"number":return parseFloat(control.val());case"string":default:switch(controlType){case ControlType.Val:return control.val();case ControlType.Src:return control.prop("src");case ControlType.Html:return control.html();default:return control.val()}}};Sail.getProperties=getProperties;$.fn.BindObject=function(model){var $item=$(this),props=getProperties(model),index,p,control,prop,value;for(index in props)if(props.hasOwnProperty(index))if(p=props[index],control=$item.find("#"+p.Name+",[name="+p.Name+"]"),control.length>0){prop=control.data("prop");value=p.Value;try{prop&&(value=p.Value[prop])}catch(e){value=p.Value}value==null&&(value="");control.SetValue(value)}else p.Type=="object"&&$item.find("[data-prop='"+p.Name+"']").each(function(index,obj){var id=$(obj).prop("id");try{p.Value&&this.SetValue($(obj),p.Value[id])}catch(e){}});$item.find(".prop:not(input):not(select):not(textarea)").each(function(i,o){var $control=$(o),prop,d,value;if($control.empty(),prop=$control.attr("name"),prop)try{d=model;value=eval("d."+prop);$control.SetValue(value)}catch(e){console.log(e)}});$item.find("[data-hbind]").each(function(i,o){var $control=$(o),prop;if($control.empty(),prop=$control.data("hbind"),prop)try{$control.SetValue($.templates(prop).render([model]))}catch(e){console.log(e)}});$item.find("[data-tmpl]:not(input):not(select):not(textarea)").each(function(i,o){var $control=$(o),tmpl=$control.data("tmpl"),hdata=$control.data("hdata"),dd=model,tmplate;if(hdata&&(dd=model[hdata]),tmpl)if(tmpl=="inline"){tmplate=$control.data("template");tmplate||(tmplate=$.templates($control.html()),Sail.debug&&(console.log($control),console.log($control.html())),$control.data("template",tmplate));try{$.isArray(dd)||(dd=[dd]);Sail.debug&&(console.log(tmplate),console.log(tmplate.render(dd)));$control.empty();$control.html(tmplate.render(dd))}catch(e){console.log(e)}}else try{$control.empty();$control.Render(tmpl,dd)}catch(e){console.log(e)}});$item.setToEditor(model);$item.trigger("after.Binder",[$item,model])};Binder=function(){function Binder(container,objItem){this._$item=$(container);this.CurrentItem=objItem}return Binder.Helper=function(ext){Binder.Helpers=$.extend(Binder.Helpers,ext)},Binder.prototype.ToHtml=function(model){this._$item.BindObject(model)},Binder.prototype.SetObject=function(obj){this.CurrentItem=obj;this.ToHtml(this.CurrentItem)},Binder}();Sail.Binder=Binder}(Sail||(Sail={})),function(){function encode(s){return config.raw?s:encodeURIComponent(s)}function decode(s){return config.raw?s:decodeURIComponent(s)}function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value))}function parseCookieValue(s){s.indexOf('"')===0&&(s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{s=decodeURIComponent(s.replace(pluses," "))}catch(e){return}try{return config.json?JSON.parse(s):s}catch(e){}}function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value}var config,pluses=/\+/g;$.cookie=function(key,value,options){var days,t,result,cookies,i,l;if(value!==undefined&&!$.isFunction(value))return options=$.extend({},config.defaults,options),typeof options.expires=="number"&&(days=options.expires,t=options.expires=new Date,t.setDate(t.getDate()+days)),document.cookie=[encode(key),"=",stringifyCookieValue(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("");for(result=key?undefined:{},cookies=document.cookie?document.cookie.split("; "):[],i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split("="),name=decode(parts.shift()),cookie=parts.join("=");if(key&&key===name){result=read(cookie,value);break}key||(cookie=read(cookie))===undefined||(result[name]=cookie)}return result};config={defaults:{}};config=$.cookie;$.removeCookie=function(key,options){return $.cookie(key)!==undefined?($.cookie(key,"",$.extend({},options,{expires:-1})),!0):!1}}(JCookies||(JCookies={})),function(Sail){Sail.modalTemplates={dialog:"<div class='zqui-modal modal' role='dialog' data-backdrop='static' ><div class=\"zqui-modal__mask\"><\/div><div class='zqui-modal__dialog modal-dialog'><div class='zqui-modal__content modal-content'><div class='zqui-modal__bd modal-body'><\/div><\/div><\/div><\/div>",header:"<div class='zqui-modal__hd modal-header'><div class='zqui-modal__title modal-title'><\/div><a class='zqui-close' data-dismiss='modal' aria-hidden='true'>×<\/a><\/div>",footer:"<div class='zqui-modal__ft modal-footer'><\/div>",cancleButton:"<a  class='zqui-btn btn zqui-btn_secondary zqui-btn_default default btnCancel' data-dismiss='modal' aria-hidden='true'><\/a>",okButton:'<button class="zqui-btn btn zqui-btn_primary btn-primary btnOk"><\/button>'};var Modal=function(){function Modal(id,settings){var _this=this,dialog,div,body,foot,tmpl;if(settings=$.extend({title:"",modalHandle:"#btnAdd",tmplName:"#modalTmpl",addEvent:null,okEvent:null,init:null,hideEvent:null,cssClass:"",okTitle:"确定",cancelTitle:"取消"},settings),dialog=$(Sail.modalTemplates.dialog),dialog.prop("id",id||guid()),dialog.find(".modal-dialog").addClass(settings.cssClass),div=dialog.find(".modal-content"),body=dialog.find(".modal-body"),this.head=$(Sail.modalTemplates.header).insertBefore(body),this.head.find(".modal-title").html(settings.title),foot=$(Sail.modalTemplates.footer).appendTo(div),settings.cancelTitle&&$(Sail.modalTemplates.cancleButton).html(settings.cancelTitle).appendTo(foot),settings.okTitle&&(this.$ok=$(Sail.modalTemplates.okButton).html(settings.okTitle).appendTo(foot),settings.okEvent))this.$ok.on("click",function(){settings.okEvent(_this)});if(settings.hideEvent)div.parent().parent().on("hidden.bs.modal",function(){settings.hideEvent(_this)});settings.modalHandle&&settings.addEvent&&$(settings.modalHandle).click(function(){settings.addEvent(_this);_this.Show()});div.parent().parent().appendTo("body");this.modal=dialog;tmpl=$.LoadHtml(settings.tmplName);$("<div class='divView'>").appendTo(body);$("<div class='divEditor'>").html(tmpl).appendTo(body);this.modal.initForm();settings.init&&settings.init(this.modal)}return Modal.prototype.Show=function(){this.resetOk();this.modal.modal()},Modal.prototype.Hide=function(){this.modal.modal("hide")},Modal.prototype.Title=function(title){this.head.find(".modal-title").html(title)},Modal.prototype.resetOk=function(){this.$ok&&this.$ok.prop("disabled",!1)},Modal}();Sail.Modal=Modal}(Sail||(Sail={})),function(MsgBox){function SetConfig(options){MsgBox.growl_default_options.template=$.extend(MsgBox.growl_default_options.template,options)}function Error(text){return $.growl(text,{type:"danger"})}function Info(text){return $.growl(text,{type:"info"})}function Success(text){return $.growl(text,{type:"success"})}function Show(result,successText,act){typeof successText=="function"&&(act=successText,successText=null);result.IsSuccess?Success(successText||result.Msg):Error(result.Msg);act&&result.IsSuccess&&act(result.Data)}function Action(result,act,msg){result.IsSuccess?act&&act(result.Data):Error(msg||result.Msg)}var bootstrap_growl_remove=[];MsgBox.growl_default_options={ele:"body",type:"info",allow_dismiss:!0,position:{from:"top",align:"center"},offset:20,spacing:10,z_index:99999,fade_in:400,delay:5e3,pause_on_mouseover:!0,template:{alertPrefix:"alert-",container:'<div class="col-sm-10 col-sm-10 col-md-3 alert">',dismiss:'<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;<\/button>'}};$.growl=function(content,options){var message=content,growlClass,$growl,offsetAmount,css,fadeIn;options=$.extend(!0,{},MsgBox.growl_default_options,options);growlClass="bootstrap-growl-"+options.position.from+"-"+options.position.align;$growl=$(options.template.container);$growl.addClass(growlClass);$growl.addClass("bootstrap-growl");$growl.addClass(options.template.alertPrefix+options.type);$growl.append($(options.template.dismiss));$growl.append(message);offsetAmount=options.offset;$("."+growlClass).remove();$("."+growlClass).each(function(){return offsetAmount=Math.max(offsetAmount,parseInt($(this).css(options.position.from))+$(this).outerHeight()+options.spacing)});css={position:options.ele==="body"?"fixed":"absolute",margin:0,"z-index":options.z_index,display:"none"};css[options.position.from]=offsetAmount+"px";$growl.css(css);$(options.ele).append($growl);switch(options.position.align){case"center":$growl.css({left:"50%",marginLeft:-($growl.outerWidth()/2)+"px"});break;case"left":$growl.css("left",options.offset+"px");break;case"right":$growl.css("right",options.offset+"px")}return $("body").trigger("grow.show"),fadeIn=$growl.fadeIn(options.fade_in,function(event){if($("body").trigger("grow.shown",event),options.delay>0){if(options.pause_on_mouseover==!0)$growl.on("mouseover",function(){clearTimeout(bootstrap_growl_remove[$growl.index()])}).on("mouseleave",function(){bootstrap_growl_remove[$growl.index()]=setTimeout(function(){return $growl.remove()},options.delay)});bootstrap_growl_remove[$growl.index()]=setTimeout(function(){return $growl.remove()},options.delay)}}),$growl};MsgBox.SetConfig=SetConfig;MsgBox.Error=Error;MsgBox.Info=Info;MsgBox.Success=Success;MsgBox.Show=Show;MsgBox.Action=Action}(MsgBox||(MsgBox={}));var ShowMessage=MsgBox.Show,ShowInfo=MsgBox.Info,ShowSuccess=MsgBox.Success,ShowError=MsgBox.Error,Sail;(function(Sail){var ApiHelper=function(){function ApiHelper(controller){this.Controller=controller}return ApiHelper.prototype.GetApi=function(actionName){return $.SailConfig.ApiRoot+this.Controller+"/"+actionName},ApiHelper.prototype.get=function(action,data,success){typeof data=="function"&&(success=data,data=null);$.get(this.GetApi(action),data,function(result){success(result)})},ApiHelper.prototype.post=function(action,data,success){typeof data=="function"&&(success=data,data=null);$.post(this.GetApi(action),data,function(result){success(result)})},ApiHelper.prototype.put=function(action,data,success){typeof data=="function"&&(success=data,data=null);$.ajax({type:"put",url:this.GetApi(action),data:data,success:function(result){success(result)}})},ApiHelper.prototype.delete=function(action,data,success){typeof data=="function"&&(success=data,data=null);$.ajax({type:"delete",url:this.GetApi(action),data:data,success:function(result){success(result)}})},ApiHelper}(),RazorPage;Sail.ApiHelper=ApiHelper;RazorPage=function(){function RazorPage(title,api,idName,set){var _this=this,content,tool,$formBody,tmpl,buttons;this.ApiName=api;this.IdName=idName;this.Id="";this.Page=undefined;this.modal=undefined;this.setting=$.extend({saveApi:"Save",isAutoHide:!0,title:title},set);this.$Editor=$("<div id=divEditor><\/div>");this.$Viewer=$("<div id=divViewer><\/div>");content=$.SailConfig.PageContent;this.content=$(content);$("#toolbar").ResetForm().appendTo(this.content.find(".toolbar"));this.$form=$("#divDetail");this.$List=$("#divList");this.btnAdd=$("#btnAdd");tool=this;this.content.on("click",".btnReturn",function(){_this.Cancel()});if(this.$form.length>0){this.$form.on("click","#btnSave",function(){tool.Save(this)});$formBody=this.$form.find(".form-body");this.$Editor.html($.LoadHtml("#modalTmpl")).prependTo($formBody);this.$Viewer.html($.LoadHtml("#viewTmpl")).prependTo($formBody);this.$form.initForm();Sail.debug&&console.log("init form")}this.$Viewer.on("click",".btnToEdit",function(){_this.ToEdit()});this.$Editor.on("click",".btnToView",function(){_this.ToView()});this.btnAdd.click(function(){_this.Add()});$.fn.tooltip&&this.content.find('[data-toggle="tooltip"]').tooltip();Sail.RazorPage.Default=this;$("body").trigger("pageInit.after",[this]);tmpl='<button class="zqui-btn zqui-btn_{{:color || \'primary\'}} view" name="{{:name}}">{{:text}}<\/button>';buttons=$.templates(tmpl).render(this.setting.operation||[]);$(buttons).insertBefore("#btnCancel");(this.setting.operation||[]).forEach(function(v){var selector="[name="+v.name+"]";tool.$form.on("click",selector,function(e){v.act.call(this,e)})})}return RazorPage.prototype.SetTitle=function(title){var $title=this.content.find(".page-title");return $title.length==0&&(this.content.find(".page-content").prepend("<h3 class='page-title'><\/h3><hr>"),$title=this.content.find(".page-title")),$title.html(title),this},RazorPage.prototype.Cancel=function(){return this.Id="",this.modal?this.modal.Hide():(this.$form.hide(),this.$List.show()),this.$form.find(".has-error").removeClass("has-error"),this.content.trigger("after.Cancel",[this.Page,this.modal?this.modal.modal:this.$form]),window.location.hash="",this},RazorPage.prototype.SetFormTitle=function(title){this.$form.find(".detailTitle span").eq(0).html(title)},RazorPage.prototype.GetApi=function(name){return $.SailConfig.ApiRoot+this.ApiName+"/"+name},RazorPage.prototype.on=function(event,selector,data){this.content.on(event,selector,data);return this},RazorPage.prototype.GetDataId=function(obj){return obj[this.IdName]==undefined&&console.log("获取主键值失败,可能是idName不对"),obj[this.IdName]},RazorPage.prototype.listApi=function(){return this.GetApi("getlist")},RazorPage.prototype.showDetail=function(act){this.$form.show().ResetForm();this.$List.hide();this.$form.find("#btnSave").show().prop("disabled",!1);this.$Viewer.hide();this.$Editor.show();this.SetFormTitle(act+this.setting.title)},RazorPage.prototype.displayNav=function(isShow){var $main=this.$form.find(".mainForm");$main.find(".tabbable  .nav:eq(0) ").Display(isShow)},RazorPage.prototype.ToEdit=function(){this.showDetail("编辑");var data=this.$form.data("dataItem");this.$form.find(".btnToView").show();this.$Editor.ItemBinder().SetObject(data);this.Id=this.GetDataId(data);window.location.hash="edit__"+this.Id;this.content.trigger("after.Edit",[data,this.Page,null])},RazorPage.prototype.ToView=function(){this.showDetail("查看");var data=this.$form.data("dataItem");$.when(this.content.trigger("before.View",[data,this.Page,null])).done(function(){this.$Viewer.ItemBinder().SetObject(data);this.$form.find("#btnSave").hide();this.$Editor.hide();this.$Viewer.show();this.Id=this.GetDataId(data);window.location.hash="view__"+this.Id;this.content.trigger("after.View",[data,this.Page,null])})},RazorPage.prototype.Add=function(){return Sail.debug&&console.log("add"),this.Id="",this.modal?(this.modal.modal.ResetForm(),this.modal.Title("新增"+this.setting.title),this.modal.Show()):(this.showDetail("新增"),this.displayNav(!1),this.$form.find(".btnToView").hide()),window.location.hash="add",this.content.trigger("after.Add"),this.$form.find("button.view").hide(),this},RazorPage.prototype.EditAct=function(data,page,obj){this.Id=this.GetDataId(data);this.$form.data("dataItem",data);this.$form.find("button.view").hide();this.content.trigger("before.Edit",[data,page,obj]);var $target=this.modal?this.modal.modal:this.$Editor;this.modal?(this.modal.Title("编辑"+this.setting.title),this.modal.Show()):(this.showDetail("编辑"),this.displayNav(!1),this.$Editor.find(".btnToView").show());$target.ResetForm();$target.ItemBinder().SetObject(data);window.location.hash="edit__"+this.Id;this.content.trigger("after.Edit",[data,page,obj])},RazorPage.prototype.ViewAct=function(data,page,obj){if(this.Id=this.GetDataId(data),this.$form.data("dataItem",data),this.$form.find("button.view").show(),!this.modal){this.showDetail("查看");this.$form.find("#btnSave").hide();this.$Editor.hide();this.$Viewer.show();this.displayNav(!0);var that=this;this.content.trigger("before.View",[data,this.Page,null]);that.$Viewer.ItemBinder().SetObject(data)}window.location.hash="view__"+this.Id;this.content.trigger("after.View",[data,page,obj])},RazorPage.prototype.Save=function(btn){var data={},xform=this.modal?this.modal.modal:this.$Editor,tool;return xform.CheckValidation()?(data=xform.GetJson(),data=this.PreSave(xform,data),!data)?null:(tool=this,$(btn).prop("disabled",!0),$.ajax({type:"put",url:this.GetApi(this.setting.saveApi+"?id=")+(this.Id||""),data:{"":JSON.stringify(data)},success:function(result){$(btn).prop("disabled",!1);MsgBox.Show(result,"保存成功",function(){tool.$form.data("dataItem",result.Data);tool.Id=tool.GetDataId(result.Data);tool.Page&&tool.Page.Query();tool.setting.isAutoHide&&tool.Cancel();window.location.hash="";tool.content.trigger("after.Save",[result])})},error:function(){$(btn).prop("disabled",!1);MsgBox.Error("提交失败,请检查网络连接")}}),this):(MsgBox.Error("请确认所有必填项都已填写且所有内容都已正确填写"),null)},RazorPage.prototype.CreatePage=function(param){var _this=this,tool=this;return param=$.extend({getPostKey:function(){return $("#toolbar").GetJson()},handleName:tool.listApi()},param),this.Page=$.Pagination(param),this.RegisterAct($(this.Page.settings.bodyContainer),this.Page),$("#toolbar .btnReset").click(function(){$("#toolbar").ResetForm();_this.Page.Query(1)}),window.onhashchange=function(){window.location.hash==""&&(_this.Cancel(),_this.Page.Query(),console.log("this.Cancel",_this.Cancel(),_this.Page.Query()))},this.Page},RazorPage.prototype.RegisterAct=function(body,page){var tool=this;body.on("click",".btnView",function(){tool.ViewAct($.view(this).data,page,this)}).on("click",".btnEdit",function(){tool.EditAct($.view(this).data,page,this)}).on("click",".btnRemove",function(){tool.DeleteAct($.view(this).data,page,this)}).on("click",".btnAct",function(){tool.BtnAct($.view(this).data,page,this)}).on("click",".btnExpand",function(){tool.ViewAct($.view(this).data,page,this)})},RazorPage.prototype.DeleteAct=function(data,page,obj){var tool=this;confirm("确定要删除吗?")&&$.Delete(tool.GetApi("delete"),{"":tool.GetDataId(data)},function(result){MsgBox.Show(result,"",function(){page&&page.Query();tool.content.trigger("after.Delete",[data,page,obj])})})},RazorPage.prototype.BtnAct=function(data,page,obj){var tool=this,act;(obj=$(obj),act=obj.data("act"),confirm("确定要"+obj.data("originalTitle")+"吗"))&&$.post(tool.GetApi(act),{"":tool.GetDataId(data)},function(result){MsgBox.Show(result,"",function(){page&&page.Query();tool.content.trigger("after.Action",[data,page,obj,act])})})},RazorPage.prototype.PreSave=function(form,model){return model},RazorPage}();Sail.RazorPage=RazorPage})(Sail||(Sail={})),function(Sail){function noData(desc){var tag=desc.tagName(),$tr,cols;desc.empty();$tr=null;tag==="TBODY"&&(cols=desc.parents("table").find("tr th").length,$tr=$("<tr><td><\/td><\/tr>").appendTo(desc),desc=$tr.find("td").attr("colspan",cols));desc.html(Sail.noDataTmpl)}function setPageSetting(set){Sail.pageSetting=set}function loadPages(pageInfo){pageInfo.Pages=[];pageInfo.PageIndex>1&&(pageInfo.Pages.push({index:1,title:Sail.pageSetting.first}),pageInfo.Pages.push({index:pageInfo.PageIndex-1,title:Sail.pageSetting.pre}));for(var i=pageInfo.StartIndex;i<=pageInfo.EndIndex;i++)pageInfo.Pages.push({index:i,title:i,isSelect:i==pageInfo.PageIndex});return pageInfo.PageIndex<pageInfo.PageCount&&(pageInfo.Pages.push({index:pageInfo.PageIndex+1,title:Sail.pageSetting.next}),pageInfo.Pages.push({index:pageInfo.PageCount,title:Sail.pageSetting.last})),pageInfo.Pages}var SetContainer,Pagination;Sail.pageSetting={first:"第一页",last:"最末页",next:">>",pre:"<<"};Sail.noDataTmpl="<div class='nodata'><\/div>";Sail.noData=noData;Sail.setPageSetting=setPageSetting;SetContainer=function(container,set,isNotTable){var data=isNotTable?{reQueryHandle:container+"  .btnQuery",headContainer:null,bodyContainer:container+" .pageBody",footContainer:container+" .page"}:{reQueryHandle:container+" .btnQuery",headContainer:container+"  table thead",bodyContainer:container+"  table tbody",footContainer:container+"  .page"};return $.extend(data,set)};Sail.SetContainer=SetContainer;$.fn.SetPagination=function(set,isnotTable){var $this=$(this),data={reQueryHandle:$this.find(".btnQuery"),footContainer:$this.find(".page"),headContainer:null};return isnotTable?data.bodyContainer=$this.find(".pageBody"):(data.headContainer=$this.find("table thead"),data.bodyContainer=$this.find("table tbody")),new Pagination($.extend(data,set))};Pagination=function(){function Pagination(set){var _this=this,result;set=jQuery.extend({isPaging:!0,reQueryHandle:"#btnQuery",headContainer:"#pageList table thead",bodyContainer:"#pageList table tbody",footContainer:"#pageList #page",ajaxType:function(){return"get"},queryed:null,pageSize:10,bodyTmpl:"#listTmpl",footTmpl:"tableFoot",titles:{},titleWidth:[],handleName:null,events:[],getPostKey:function(){return{}}},set);this.settings=set;this.Container=$(set.bodyContainer);result=this;set.events&&$.each(set.events,function(index,event){if(event.handle&&event.act)_this.Container.on("click",event.handle,function(){console.log($(this).view());event.act($.view(this).data,this,result)})});set.init&&set.init.call(this);this.currentIndex=1;$(set.reQueryHandle).click(function(){_this.Query(1)});set.headContainer&&set.titles&&$(set.headContainer).MakeHead(set.titles,set.titleWidth);$(set.footContainer).on("click",".onPage",function(){var page=$(this).data("page");console.log(page);console.log($(this));result.Query(page)})}return Pagination.prototype.Query=function(pageIndex){var _this=this,tooltip='[data-toggle="tooltip"]',settings,postData,url,type;return pageIndex&&(this.currentIndex=pageIndex),pageIndex=this.currentIndex,settings=this.settings,postData=settings.getPostKey(),settings.isPaging&&(postData.pageSize=settings.pageSize,postData.pageIndex=pageIndex),url=settings.handleName,typeof url=="function"&&(url=url()),type=settings.ajaxType(),type!=="get"&&(postData={"":JSON.stringify(postData)}),$.ajax({type:type,url:url,data:postData,dataType:"json",success:function(data){if(data&&data.IsSuccess){var infoDatas=data.Data;settings.isPaging&&(loadPages(data.Data.PageInfo),infoDatas=data.Data.Data);_this.Container=$(settings.bodyContainer);_this.Container.Link(settings.bodyTmpl,infoDatas);data.Data.Data.length===0&&noData(_this.Container);_this.Container.TableChange();settings.isPaging&&settings.footTmpl&&settings.footContainer&&$(settings.footContainer).Render(settings.footTmpl,data.Data.PageInfo);$.fn.tooltip&&($(_this.settings.headContainer).find(tooltip).tooltip(),$(_this.settings.footContainer).find(tooltip).tooltip(),_this.Container.find("td a").tooltip());settings.queryed&&settings.queryed(data.Data,_this)}else MsgBox.Error(data.Msg)}}),this},Pagination}();Sail.Pagination=Pagination}(Sail||(Sail={})),function(){Number.prototype.PadLeft=function(a,b){return String(this).PadLeft(a,b)};Number.prototype.PadRight=function(a,b){return String(this).PadRight(a,b)}}(NumberHelper||(NumberHelper={})),function(){function PadHelper(src,length,padStr){var d,i;if(padStr||(padStr=" "),src.length<length){for(d=new String,i=1;i<=length-src.length;i++)d+=padStr;return d}return""}String.prototype.SubStringByByte=function(n){var str=this;if(!str||!n)return"";for(var a=0,i=0,temp="",i=0;i<str.length;i++){if(a+=str.charCodeAt(i)>255?2:1,a>n)return temp+"...";temp+=str.charAt(i)}return str};String.prototype.PadLeft=function(length,str){return PadHelper(this,length,str)+this};String.prototype.PadRight=function(length,str){return this+PadHelper(this,length,str)};String.prototype.format=function(){for(var a,args=[],_i=0;_i<arguments.length;_i++)args[+_i]=arguments[_i];return a=arguments,0===arguments.length?this:this.replace(/\{(\d+)\}/g,function(b,c){return a[parseInt(c)]})};String.prototype.ToInt=function(){if(!this)return 0;var a=parseInt(this);return isNaN(a)?0:a};String.prototype.ToFloat=function(){if(!this)return 0;var a=parseFloat(this);return isNaN(a)?0:a};String.prototype.RemoveHtmlTag=function(){var str=this;return str=str.replace(/<\/?[^>]*>/g,""),str=str.replace(/[ | ]*\n/g,"\n"),str.replace(/&nbsp;/gi,"")}}(StringHelper||(StringHelper={})),function(Sail){function formatNumber(num){return String(num).split("").reverse().join("").replace(/(\d{3})(?=[^$])/g,"$1,").split("").reverse().join("")}function digitUppercase(n){var fraction=["角","分"],digit=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],unit=[["元","万","亿"],["","拾","佰","仟"]],head=n<0?"欠":"",s,i,p,j;for(n=Math.abs(n),s="",i=0;i<fraction.length;i++)s+=(digit[Math.floor(n*10*Math.pow(10,i))%10]+fraction[i]).replace(/零./,"");for(s=s||"整",n=Math.floor(n),i=0;i<unit[0].length&&n>0;i++){for(p="",j=0;j<unit[1].length&&n>0;j++)p=digit[n%10]+unit[1][j]+p,n=Math.floor(n/10);s=p.replace(/(零.)*零$/,"").replace(/^$/,"零")+unit[0][i]+s}return head+s.replace(/(零.)*零元/,"元").replace(/(零.)+/g,"零").replace(/^整$/,"零元整")}function ToPre(str,preType){if(preType||(preType="pre"),!str)return"";var pos=str.lastIndexOf("/");return pos>=0&&(str=str.substr(0,pos)+"/"+preType+str.substr(pos)),str}Sail.formatNumber=formatNumber;Sail.digitUppercase=digitUppercase;Sail.ToPre=ToPre;Sail.Binder.Helper({formatNumber:function(str){return formatNumber(str)},Uppercase:function(str){return digitUppercase(str)}});$.views&&($.views.helpers({subString:function(str,n){return str.SubStringByByte(n)},subStringNoHtml:function(str,n){return str.RemoveHtmlTag().SubStringByByte(n)},ToPre:function(str,preType){return ToPre(str,preType)}}),$.views.converters({ToPre:function(str){return ToPre(str,null)},ToDate:function(value){return value?value.substring(0,10):""},ToFullDateTime:function(value){return value?DateTime.Parse(value).toLocaleString():""},ToDateHz:function(value){return value?DateTime.Parse(value).format("yyyy年MM月dd日"):""},ToWeekDate:function(value){return value?DateTime.Parse(value).format("MM月dd日 (ddd)"):""},ToDateTime:function(value){return value?DateTime.Parse(value).format("yyyy年MM月dd日 hh:mm"):""},ToDateTime2:function(value){return value?DateTime.Parse(value).format("yyyy-MM-dd hh:mm:ss"):""},intToStr:function(value){return""+value},strToInt:function(value){return value?parseInt(value):0},strToFloat:function(value){return value?parseFloat(value):0},FloatToStr:function(value){return""+value},FloatToStrSpace:function(value){return value===0?"":""+value}}))}(Sail||(Sail={})),function(validationEngine){function SetConfig(set){validationEngine.customSet=$.extend(validationEngine.customSet,set)}function loadValidation(caller){var rulesParsing=$(caller).attr("class"),getRules=/\[(.*)\]/.exec(rulesParsing),str=getRules[1],result=str.split(/\[|,|\]/);return validateCall(caller,result)}function validateCall(caller,rules){function radioHack(){$("input[name='"+callerName+"']").size()>1&&(callerType=="radio"||callerType=="checkbox")&&(caller=$("input[name='"+callerName+"'][type!=hidden]:first"),showTriangle=!1)}function required(caller){var types,value;callerType=$(caller).attr("type");switch($(caller).prop("tagName").toLowerCase()){case"textarea":callerType="textarea";break;case"select":callerType="select"}types=["hidden","text","password","textarea","select","date","number","tel","email","url","month","week","time","datetime","datetime-local","search"];callerType||(callerType="text");switch(callerType){case"radio":case"checkbox":callerName=$(caller).attr("name");$("input[name='"+callerName+"']:checked").size()===0&&(isError=!0,promptText+=$("input[name='"+callerName+"']").size()===1?validationEngine.validationEngineLanguage.allRules.required.alertTextCheckboxe:validationEngine.validationEngineLanguage.allRules.required.alertTextCheckboxMultiple);break;default:types.indexOf(callerType)>=0&&(value=$(caller).val(),typeof value=="object"?(!value||value.length<=0)&&(isError=!0):value&&value.trim()||(isError=!0),isError==!0&&(promptText+=validationEngine.validationEngineLanguage.allRules.required.alertText))}}function customRegex(caller,rules,position){var customRule=rules[position+1],pattern,txt;validationEngine.validationEngineLanguage.allRules[customRule]?(pattern=eval(validationEngine.validationEngineLanguage.allRules[customRule].regex),$(caller).val()&&!pattern.test($(caller).val())&&(isError=!0,txt=validationEngine.validationEngineLanguage.allRules[customRule].alertText,promptText+=txt)):(pattern=eval("/"+customRule+"/"),$(caller).val()&&!pattern.test($(caller).val())&&(isError=!0,txt=$(caller).data("errormsg")||"规则不匹配",console.log($(caller).data("errormsg")),promptText+=txt))}function confirm(caller,rules,position){var confirmField=rules[position+1];$(caller).val()!==$("#"+confirmField).val()&&(isError=!0,promptText+=validationEngine.validationEngineLanguage.allRules.confirm.alertText)}function length(caller,rules,position){var startLength=eval(rules[position+1]),endLength=eval(rules[position+2]),feildLength=$(caller).val().length;(feildLength<startLength||feildLength>endLength)&&(isError=!0,promptText+=validationEngine.validationEngineLanguage.allRules.length.alertText+startLength+validationEngine.validationEngineLanguage.allRules.length.alertText2+endLength+validationEngine.validationEngineLanguage.allRules.length.alertText3)}var promptText="",callerName=$(caller).attr("name"),callerType,i,group;for(isError=!1,showTriangle=!0,callerType=$(caller).attr("type"),i=0;i<rules.length;i++)switch(rules[i]){case"optional":if(!$(caller).val())return isError;break;case"required":validationEngine.settings.ignoreRequire!=!0&&required(caller);break;case"custom":customRegex(caller,rules,i);break;case"length":length(caller,rules,i);break;case"confirm":confirm(caller,rules,i)}return radioHack(),isError?buildPrompt(caller,promptText):(group=findTipsGroup(caller),group.removeClass(validationEngine.settings.error).prop("title","")),isError?!0:!1}function findTipsGroup(caller){var group=$(caller).closest(validationEngine.settings.formGroup);return group.length===0&&(group=$(caller).parent().parent()),group}function buildPrompt(caller,promptText){var group=findTipsGroup(caller);return group.addClass(validationEngine.settings.error),group.prop("title",promptText),$("<div>")}function submitValidation(caller){var stopForm=!1,items=$(caller).find("[class*=validate]");return items.each(function(){var validationPass=loadValidation(this);return validationPass?stopForm=!0:""}),stopForm}function setConfig(set){validationEngine.settings||SetConfig({});validationEngine.settings=jQuery.extend(validationEngine.customSet,set)}validationEngine.validationEngineLanguage={allRules:{required:{regex:"none",alertText:"必填",alertTextCheckboxMultiple:"请选择一个选项",alertTextCheckboxe:"必须选中"},length:{regex:"none",alertText:"长度在 ",alertText2:" 到 ",alertText3:" 个字符之间"},confirm:{regex:"none",alertText:"输入内容不匹配"},url:{regex:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,alertText:"无效的网址"},idNumber:{regex:/^\d{17}([0-9]|X|x)$/,alertText:"身份证号码无效"},mobile:{regex:/^(1)[0-9]{10}$/,alertText:"无效手机号码"},email:{regex:/^[a-zA-Z0-9_.-]+@([a-zA-Z0-9-]+.)+[a-zA-Z0-9]{2,4}$/,alertText:"无效邮件地址"},integer:{regex:/^-?[0-9]+$/,alertText:"只允许录入整数"},pinteger:{regex:/^[0-9]+$/,alertText:"只允许录入整数"},pdecimal:{regex:/^\d*\.?\d+$/,alertText:"只能输入数字"},decimal:{regex:/^-?\d*\.?\d+$/,alertText:"只能输入数字"},letter:{regex:/^[a-zA-Z0-9_]+$/,alertText:"只能输入字母、数字和下划线(_)"},phone:{regex:/^[0-9_,、-]+$/,alertText:"只能输入数字、下划线(_)和减号(-)逗号(,)顿号(、)"}}};validationEngine.customSet={error:"has-error",formGroup:".form-group-default",validationEventTriggers:"keyup blur",inlineValidation:!0,returnIsValid:!1,scroll:!0,unbindEngine:!1,ajaxSubmit:!0,success:!1,ignoreRequire:!1};$.IgnoreRequire=function(){validationEngine.customSet.ignoreRequire=!0};$.MustRequire=function(){validationEngine.customSet.ignoreRequire=!1};validationEngine.SetConfig=SetConfig;validationEngine.settings={};var isError=!1,showTriangle=!0;$.fn.validationEngine=function(set){if(setConfig(set),validationEngine.settings.inlineValidation==!0&&!validationEngine.settings.returnIsValid){var target="[class*=validate][type!=checkbox]";$(this).on(validationEngine.settings.validationEventTriggers,target,function(){var s=loadValidation(this)});$(this).on("click",target,function(){loadValidation(this)})}if(validationEngine.settings.returnIsValid)return!submitValidation(this)}}(validationEngine||(validationEngine={}));__extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b);d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();_this=this;$.views.helpers({ToDisabledLabel:function(isDisabled){var cssClass=isDisabled?"zqui-label_danger":"zqui-label_success",text=isDisabled?"已停用":"正常";return'<label class="zqui-label '+cssClass+'">'+text+"<\/label>"}});$.views.converters({toBoolStr:function(flag){return ToLabel({"是":"success","否":"danger"},flag?0:1)},toInfoLabel:function(flag){return ToLabel({"正常":"success","停用":"danger"},flag)}});$.fn.selectByText=function(text){var $ele=this;if($ele.tagName()!=="SELECT")throw new Error("invalid element");return $ele.find("option:contains("+text+")").prop("selected",!0),$ele};$.fn.iconUpload=function(){var $this=$(this),$group=$this.closest(".zqui-form-group"),iconApi=new Sail.ApiHelper("Icon");$this.uploadifive({width:"5rem",height:"5rem",uploadScript:iconApi.GetApi("UploadFile"),fileType:"image/*",fileSizeLimit:"5MB",buttonText:"<div class='zqui-upload__text'><\/div>",multi:!1,onUploadComplete:function(file,data){var result=JSON.parse(data),image=result.Data,$ele;$(".uploadifive-queue").hide();result.IsSuccess&&($group.find(".zqui-upload_img").find("img").prop("src",image.FilePath),$ele=$group.find("input[type=hidden]"),$ele.val(image.FilePath).data().file=image)},inited:function(){$group.find(".zqui-upload_img").insertAfter($group.find(".zqui-upload__text"));$group.find(".zqui-upload__text").hide()}})};UploadTmpls={upImagesTmpl:$.templates('<div class="zqui-upload zqui-upload_img" data-src={{:#data}} >\n                    <img src="{{:#data}}"  >\n                    <span class="zqui-upload__delete" > <i class="icon icon-trash btnRemove" > <\/i><\/span>\n                <\/div>'),viewImgTmpl:$.templates('<div class="zqui-upload zqui-upload_img" data-src={{:#data}} >\n                    <img src="{{:#data}}">\n                <\/div>')};$.fn.batchUploadPic=function(){function rebind(act){var images=$this.data("images")||[];act(images);$this.data("images",images);$list.html(tmpl.render(images));$this.val(JSON.stringify(images))}var tmpl=UploadTmpls.upImagesTmpl,iconApi=new Sail.ApiHelper("Icon"),$this=$(this),$item=$(this).closest(".zqui-upload__text"),$list=$(this).closest(".zqui-form-group").find(".imageList"),eleData=$this.data();console.log(eleData);$item.uploadifive({width:"5rem",height:"5rem",buttonText:"<span>上传<\/span>",uploadScript:iconApi.GetApi("UploadFile"),fileType:eleData.type||"image/*",fileSizeLimit:eleData.size||"5MB",multi:!0,onUploadComplete:function(file,data){var result=JSON.parse(data),image;console.log("fuck:",result);image=result.Data;$(".uploadifive-queue").hide();result.IsSuccess&&rebind(function(images){images.push(image.FilePath)})}});$list.on("click",".btnRemove",function(e){if(!confirm("确定要删除此图片么?"))return!1;var src=$(e.currentTarget).closest(".zqui-upload_img").data("src");rebind(function(images){return _.remove(images,function(s){return s==src})})})};$.fn.setBatchImages=function(images){var tmpl=UploadTmpls.upImagesTmpl,$this=$(this),$list=$(this).closest(".zqui-form-group").find(".imageList");$this.data("images",images);$this.val(JSON.stringify(images));$list.html(tmpl.render(images))};$.fn.SetButtonSelect=function(){var $list=$(this);$list.find("button"+Active.Selector).removeClass(Active.className);$list.each(function(i,o){var $group=$(o),value=$group.find("input:hidden").val();$group.find("button[value="+value+"]").addClass(Active.className)})};$.fn.disableButton=function(isDisable){var that=$(_this);that.closest(".zqui-form-group").find("button").toggleClass("disable",!!isDisable)};$.fn.ButtonSelect=function(){var $list=$(this);$list.each(function(){var $group=$(this);$group.off("click");$group.on("click","button",function(){var $preButton=$group.find(".active"),$btn=$(this),value,$input;$btn.hasClass("disabled")||($group.find("button"+Active.Selector).removeClass(Active.className),$btn.addClass(Active.className),value=$btn.val(),$input=$group.find("input"),$input.val(value),$input.trigger("after.Click",[$input,$btn,$preButton]),$("body").trigger($input.prop("name")+".button",[$btn,$preButton,$input]))})})};$$=PageReady;$(function(){var modelId=$.Request("id"),action=$.Request("action");$("body").on("keyup","#toolbar input[name=key]",function(event){event.keyCode===13&&$("#toolbar #btnQuery").click()});$("body").on("after.ResetForm",function(sender,form){$(".buttonSelect").ButtonSelect();$(form).find(".buttonSelect").SetButtonSelect()});$$(function(tool){if(tool){tool.on("after.Add",function(){$(".buttonSelect").SetButtonSelect();tool.$Editor.find(".selectModal").each(function(){var s=$(this).data();s.selecter.setData(null)})}).on("after.Edit",function(sender,data){$(".buttonSelect").SetButtonSelect();tool.$Editor.find(".selectModal").each(function(){var s=$(this).data();s.selecter.setData(data[s.target]);console.log(data[s.target])})}).on("after.View",function(){}).on("after.Save",function(){["add","view","edit"].indexOf(action)>=0&&self.close()}).on("after.Cancel",function(){["add","view","edit"].indexOf(action)>=0&&self.close()});switch(action){case"add":tool.Add();break;case"view":case"edit":modelId&&$.get(tool.GetApi("Get"),{id:modelId}).done(function(res){var act={view:"ViewAct",edit:"EditAct"};MsgBox.Action(res,function(){tool[act[action]](res.Data,tool.Page,tool)})})}}});$("body").on("click",".icon-calendar",function(){$(this).parent().find("input.date:last").trigger("focus")});$(".navTab").on("click","li",function(){var $li=$(this),$target=$($li.data("target")),$div=$li.closest(".navTab");$div.find("li.active").removeClass("active");$li.addClass("active");$div.find(".tabContent").hide();$target.show();$(".navTab").trigger("after.Switch",$li)})});$.views.converters({ToLabel:function(str,label){return"<label class='zqui-label "+label+" zqui-label_sm'>"+str+"<\/label>"}});ModelHelper=function(){function ModelHelper(){}return ModelHelper.rootId="ffffffff-ffff-ffff-ffff-ffffffffffff",ModelHelper}();Active=function(){function Active(){}return Active.className="active",Active.Selector=".active",Active}();ChooseModal=function(_super){function ChooseModal(config){var _this=_super.call(this,"",config)||this,that=_this,cfg=$.extend({reQueryHandle:that.find(".btnQuery"),headContainer:that.find("thead"),bodyContainer:that.find("tbody"),footContainer:that.find(".page"),getPostKey:function(){return that.find(".toolbar").GetJson()},events:[]},config);cfg.events.push({handle:".choose",act:function(data){var res=that.choose(data);res&&that.Hide()}});_this.page=new Sail.Pagination(cfg);_this.modal.on("click",".btnReset",function(){that.find(".toolbar").ResetForm();that.page.Query(1)});return _this}return __extends(ChooseModal,_super),ChooseModal.prototype.find=function(selector){return this.modal.find(selector)},ChooseModal.prototype.choose=function(){return!0},ChooseModal}(Sail.Modal);
/*! Select2 4.0.6-rc.0 | https://github.com/select2/select2/blob/master/LICENSE.md */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=function(b,c){return void 0===c&&(c="undefined"!=typeof window?require("jquery"):require("jquery")(b)),a(c),c}:a(jQuery)}(function(a){var b=function(){var b;return a&&a.fn&&a.fn.select2&&a.fn.select2.amd&&(b=a.fn.select2.amd),function(){if(!b||!b.requirejs){b?c=b:b={};var a,c,d;!function(b){function e(a,b){return v.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o=b&&b.split("/"),p=t.map,q=p&&p["*"]||{};if(a){for(a=a.split("/"),g=a.length-1,t.nodeIdCompat&&x.test(a[g])&&(a[g]=a[g].replace(x,"")),"."===a[0].charAt(0)&&o&&(n=o.slice(0,o.length-1),a=n.concat(a)),k=0;k<a.length;k++)if("."===(m=a[k]))a.splice(k,1),k-=1;else if(".."===m){if(0===k||1===k&&".."===a[2]||".."===a[k-1])continue;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}if((o||q)&&p){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),o)for(l=o.length;l>0;l-=1)if((e=p[o.slice(0,l).join("/")])&&(e=e[d])){f=e;h=k;break}if(f)break;!i&&q&&q[d]&&(i=q[d],j=k)}!f&&i&&(f=i,h=j);f&&(c.splice(0,h,f),a=c.join("/"))}return a}function g(a,c){return function(){var d=w.call(arguments,0);return"string"!=typeof d[0]&&1===d.length&&d.push(null),o.apply(b,d.concat([a,c]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){r[a]=b}}function j(a){if(e(s,a)){var c=s[a];delete s[a];u[a]=!0;n.apply(b,c)}if(!e(r,a)&&!e(u,a))throw new Error("No "+a);return r[a]}function k(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return a?k(a):[]}function m(a){return function(){return t&&t.config&&t.config[a]||{}}}var n,o,p,q,r={},s={},t={},u={},v=Object.prototype.hasOwnProperty,w=[].slice,x=/\.js$/;p=function(a,b){var c,d=k(a),e=d[0],g=b[1];return a=d[1],e&&(e=f(e,g),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(g)):f(a,g):(a=f(a,g),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}};q={require:function(a){return g(a)},exports:function(a){var b=r[a];return void 0!==b?b:r[a]={}},module:function(a){return{id:a,uri:"",exports:r[a],config:m(a)}}};n=function(a,c,d,f){var h,k,m,n,o,t,v,w=[],x=typeof d;if(f=f||a,t=l(f),"undefined"===x||"function"===x){for(c=!c.length&&d.length?["require","exports","module"]:c,o=0;o<c.length;o+=1)if(n=p(c[o],t),"require"===(k=n.f))w[o]=q.require(a);else if("exports"===k)w[o]=q.exports(a),v=!0;else if("module"===k)h=w[o]=q.module(a);else if(e(r,k)||e(s,k)||e(u,k))w[o]=j(k);else{if(!n.p)throw new Error(a+" missing "+k);n.p.load(n.n,g(f,!0),i(k),{});w[o]=r[k]}m=d?d.apply(r[a],w):void 0;a&&(h&&h.exports!==b&&h.exports!==r[a]?r[a]=h.exports:m===b&&v||(r[a]=m))}else a&&(r[a]=d)};a=c=o=function(a,c,d,e,f){if("string"==typeof a)return q[a]?q[a](c):j(p(a,l(c)).f);if(!a.splice){if(t=a,t.deps&&o(t.deps,t.callback),!c)return;c.splice?(a=c,c=d,d=null):a=b}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?n(b,a,c,d):setTimeout(function(){n(b,a,c,d)},4),o};o.config=function(a){return o(a)};a._defined=r;d=function(a,b,c){if("string"!=typeof a)throw new Error("See almond README: incorrect module build, no module name");b.splice||(c=b,b=[]);e(r,a)||e(s,a)||(s[a]=[a,b,c])};d.amd={jQuery:!0}}();b.requirejs=a;b.require=c;b.define=d}}(),b.define("almond",function(){}),b.define("jquery",[],function(){var b=a||$;return null==b&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),b}),b.define("select2/utils",["jquery"],function(a){function b(a){var b=a.prototype,c=[];for(var d in b)"function"==typeof b[d]&&"constructor"!==d&&c.push(d);return c}var c={},d,e;return c.Extend=function(a,b){function c(){this.constructor=a}var d={}.hasOwnProperty;for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},c.Decorate=function(a,c){function d(){var b=Array.prototype.unshift,d=c.prototype.constructor.length,e=a.prototype.constructor;d>0&&(b.call(arguments,a.prototype.constructor),e=c.prototype.constructor);e.apply(this,arguments)}function e(){this.constructor=d}var f=b(c),g=b(a),h,i,j,k,l;for(c.displayName=a.displayName,d.prototype=new e,h=0;h<g.length;h++)i=g[h],d.prototype[i]=a.prototype[i];for(j=function(a){var b=function(){},e;return a in d.prototype&&(b=d.prototype[a]),e=c.prototype[a],function(){return Array.prototype.unshift.call(arguments,b),e.apply(this,arguments)}},k=0;k<f.length;k++)l=f[k],d.prototype[l]=j(l);return d},d=function(){this.listeners={}},d.prototype.on=function(a,b){this.listeners=this.listeners||{};a in this.listeners?this.listeners[a].push(b):this.listeners[a]=[b]},d.prototype.trigger=function(a){var b=Array.prototype.slice,c=b.call(arguments,1);this.listeners=this.listeners||{};null==c&&(c=[]);0===c.length&&c.push({});c[0]._type=a;a in this.listeners&&this.invoke(this.listeners[a],b.call(arguments,1));"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},d.prototype.invoke=function(a,b){for(var c=0,d=a.length;c<d;c++)a[c].apply(this,b)},c.Observable=d,c.generateChars=function(a){for(var b="",c=0;c<a;c++)b+=Math.floor(36*Math.random()).toString(36);return b},c.bind=function(a,b){return function(){a.apply(b,arguments)}},c._convertData=function(a){var b,c,d,e,f;for(b in a)if(c=b.split("-"),d=a,1!==c.length){for(e=0;e<c.length;e++)f=c[e],f=f.substring(0,1).toLowerCase()+f.substring(1),f in d||(d[f]={}),e==c.length-1&&(d[f]=a[b]),d=d[f];delete a[b]}return a},c.hasScroll=function(b,c){var d=a(c),e=c.style.overflowX,f=c.style.overflowY;return(e!==f||"hidden"!==f&&"visible"!==f)&&("scroll"===e||"scroll"===f||d.innerHeight()<c.scrollHeight||d.innerWidth()<c.scrollWidth)},c.escapeMarkup=function(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof a?a:String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})},c.appendMany=function(b,c){if("1.7"===a.fn.jquery.substr(0,3)){var d=a();a.map(c,function(a){d=d.add(a)});c=d}b.append(c)},c.__cache={},e=0,c.GetUniqueElementId=function(a){var b=a.getAttribute("data-select2-id");return null==b&&(a.id?(b=a.id,a.setAttribute("data-select2-id",b)):(a.setAttribute("data-select2-id",++e),b=e.toString())),b},c.StoreData=function(a,b,d){var e=c.GetUniqueElementId(a);c.__cache[e]||(c.__cache[e]={});c.__cache[e][b]=d},c.GetData=function(b,d){var e=c.GetUniqueElementId(b);return d?c.__cache[e]&&null!=c.__cache[e][d]?c.__cache[e][d]:a(b).data(d):c.__cache[e]},c.RemoveData=function(a){var b=c.GetUniqueElementId(a);null!=c.__cache[b]&&delete c.__cache[b]},c}),b.define("select2/results",["jquery","./utils"],function(a,b){function c(a,b,d){this.$element=a;this.data=d;this.options=b;c.__super__.constructor.call(this)}return b.Extend(c,b.Observable),c.prototype.render=function(){var b=a('<ul class="select2-results__options" role="tree"><\/ul>');return this.options.get("multiple")&&b.attr("aria-multiselectable","true"),this.$results=b,b},c.prototype.clear=function(){this.$results.empty()},c.prototype.displayMessage=function(b){var c=this.options.get("escapeMarkup"),d,e;this.clear();this.hideLoading();d=a('<li role="treeitem" aria-live="assertive" class="select2-results__option"><\/li>');e=this.options.get("translations").get(b.message);d.append(c(e(b.args)));d[0].className+=" select2-results__message";this.$results.append(d)},c.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},c.prototype.append=function(a){var b,c,d,e;if(this.hideLoading(),b=[],null==a.results||0===a.results.length)return void(0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"}));for(a.results=this.sort(a.results),c=0;c<a.results.length;c++)d=a.results[c],e=this.option(d),b.push(e);this.$results.append(b)},c.prototype.position=function(a,b){b.find(".select2-results").append(a)},c.prototype.sort=function(a){return this.options.get("sorter")(a)},c.prototype.highlightFirstItem=function(){var a=this.$results.find(".select2-results__option[aria-selected]"),b=a.filter("[aria-selected=true]");b.length>0?b.first().trigger("mouseenter"):a.first().trigger("mouseenter");this.ensureHighlightVisible()},c.prototype.setClasses=function(){var c=this;this.data.current(function(d){var e=a.map(d,function(a){return a.id.toString()});c.$results.find(".select2-results__option[aria-selected]").each(function(){var c=a(this),d=b.GetData(this,"data"),f=""+d.id;null!=d.element&&d.element.selected||null==d.element&&a.inArray(f,e)>-1?c.attr("aria-selected","true"):c.attr("aria-selected","false")})})},c.prototype.showLoading=function(a){this.hideLoading();var b=this.options.get("translations").get("searching"),c={disabled:!0,loading:!0,text:b(a)},d=this.option(c);d.className+=" loading-results";this.$results.prepend(d)},c.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},c.prototype.option=function(c){var d=document.createElement("li"),e,f,g,h,i,j,k,l,m,n;d.className="select2-results__option";e={role:"treeitem","aria-selected":"false"};c.disabled&&(delete e["aria-selected"],e["aria-disabled"]="true");null==c.id&&delete e["aria-selected"];null!=c._resultId&&(d.id=c._resultId);c.title&&(d.title=c.title);c.children&&(e.role="group",e["aria-label"]=c.text,delete e["aria-selected"]);for(f in e)g=e[f],d.setAttribute(f,g);if(c.children){for(h=a(d),i=document.createElement("strong"),i.className="select2-results__group",a(i),this.template(c,i),j=[],k=0;k<c.children.length;k++)l=c.children[k],m=this.option(l),j.push(m);n=a("<ul><\/ul>",{"class":"select2-results__options select2-results__options--nested"});n.append(j);h.append(i);h.append(n)}else this.template(c,d);return b.StoreData(d,"data",c),d},c.prototype.bind=function(c){var e=this,f=c.id+"-results";this.$results.attr("id",f);c.on("results:all",function(a){e.clear();e.append(a.data);c.isOpen()&&(e.setClasses(),e.highlightFirstItem())});c.on("results:append",function(a){e.append(a.data);c.isOpen()&&e.setClasses()});c.on("query",function(a){e.hideMessages();e.showLoading(a)});c.on("select",function(){c.isOpen()&&(e.setClasses(),e.highlightFirstItem())});c.on("unselect",function(){c.isOpen()&&(e.setClasses(),e.highlightFirstItem())});c.on("open",function(){e.$results.attr("aria-expanded","true");e.$results.attr("aria-hidden","false");e.setClasses();e.ensureHighlightVisible()});c.on("close",function(){e.$results.attr("aria-expanded","false");e.$results.attr("aria-hidden","true");e.$results.removeAttr("aria-activedescendant")});c.on("results:toggle",function(){var a=e.getHighlightedResults();0!==a.length&&a.trigger("mouseup")});c.on("results:select",function(){var a=e.getHighlightedResults(),c;0!==a.length&&(c=b.GetData(a[0],"data"),"true"==a.attr("aria-selected")?e.trigger("close",{}):e.trigger("select",{data:c}))});c.on("results:previous",function(){var a=e.getHighlightedResults(),b=e.$results.find("[aria-selected]"),c=b.index(a),d,f;if(0!==c){d=c-1;0===a.length&&(d=0);f=b.eq(d);f.trigger("mouseenter");var g=e.$results.offset().top,h=f.offset().top,i=e.$results.scrollTop()+(h-g);0===d?e.$results.scrollTop(0):h-g<0&&e.$results.scrollTop(i)}});c.on("results:next",function(){var a=e.getHighlightedResults(),b=e.$results.find("[aria-selected]"),c=b.index(a),d=c+1,f;if(!(d>=b.length)){f=b.eq(d);f.trigger("mouseenter");var g=e.$results.offset().top+e.$results.outerHeight(!1),h=f.offset().top+f.outerHeight(!1),i=e.$results.scrollTop()+h-g;0===d?e.$results.scrollTop(0):h>g&&e.$results.scrollTop(i)}});c.on("results:focus",function(a){a.element.addClass("select2-results__option--highlighted")});c.on("results:message",function(a){e.displayMessage(a)});a.fn.mousewheel&&this.$results.on("mousewheel",function(a){var b=e.$results.scrollTop(),c=e.$results.get(0).scrollHeight-b+a.deltaY,d=a.deltaY>0&&b-a.deltaY<=0,f=a.deltaY<0&&c<=e.$results.height();d?(e.$results.scrollTop(0),a.preventDefault(),a.stopPropagation()):f&&(e.$results.scrollTop(e.$results.get(0).scrollHeight-e.$results.height()),a.preventDefault(),a.stopPropagation())});this.$results.on("mouseup",".select2-results__option[aria-selected]",function(c){var d=a(this),f=b.GetData(this,"data");if("true"===d.attr("aria-selected"))return void(e.options.get("multiple")?e.trigger("unselect",{originalEvent:c,data:f}):e.trigger("close",{}));e.trigger("select",{originalEvent:c,data:f})});this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(){var d=b.GetData(this,"data");e.getHighlightedResults().removeClass("select2-results__option--highlighted");e.trigger("results:focus",{data:d,element:a(this)})})},c.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},c.prototype.destroy=function(){this.$results.remove()},c.prototype.ensureHighlightVisible=function(){var a=this.getHighlightedResults();if(0!==a.length){var b=this.$results.find("[aria-selected]"),c=b.index(a),d=this.$results.offset().top,e=a.offset().top,f=this.$results.scrollTop()+(e-d),g=e-d;f-=2*a.outerHeight(!1);c<=2?this.$results.scrollTop(0):(g>this.$results.outerHeight()||g<0)&&this.$results.scrollTop(f)}},c.prototype.template=function(b,c){var d=this.options.get("templateResult"),e=this.options.get("escapeMarkup"),f=d(b,c);null==f?c.style.display="none":"string"==typeof f?c.innerHTML=e(f):a(c).append(f)},c}),b.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),b.define("select2/selection/base",["jquery","../utils","../keys"],function(a,b,c){function d(a,b){this.$element=a;this.options=b;d.__super__.constructor.call(this)}return b.Extend(d,b.Observable),d.prototype.render=function(){var c=a('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"><\/span>');return this._tabindex=0,null!=b.GetData(this.$element[0],"old-tabindex")?this._tabindex=b.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),c.attr("title",this.$element.attr("title")),c.attr("tabindex",this._tabindex),this.$selection=c,c},d.prototype.bind=function(a){var d=this,e=(a.id,a.id+"-results");this.container=a;this.$selection.on("focus",function(a){d.trigger("focus",a)});this.$selection.on("blur",function(a){d._handleBlur(a)});this.$selection.on("keydown",function(a){d.trigger("keypress",a);a.which===c.SPACE&&a.preventDefault()});a.on("results:focus",function(a){d.$selection.attr("aria-activedescendant",a.data._resultId)});a.on("selection:update",function(a){d.update(a.data)});a.on("open",function(){d.$selection.attr("aria-expanded","true");d.$selection.attr("aria-owns",e);d._attachCloseHandler(a)});a.on("close",function(){d.$selection.attr("aria-expanded","false");d.$selection.removeAttr("aria-activedescendant");d.$selection.removeAttr("aria-owns");d.$selection.focus();d._detachCloseHandler(a)});a.on("enable",function(){d.$selection.attr("tabindex",d._tabindex)});a.on("disable",function(){d.$selection.attr("tabindex","-1")})},d.prototype._handleBlur=function(b){var c=this;window.setTimeout(function(){document.activeElement==c.$selection[0]||a.contains(c.$selection[0],document.activeElement)||c.trigger("blur",b)},1)},d.prototype._attachCloseHandler=function(c){a(document.body).on("mousedown.select2."+c.id,function(c){var d=a(c.target),e=d.closest(".select2");a(".select2.select2-container--open").each(function(){a(this);this!=e[0]&&b.GetData(this,"element").select2("close")})})},d.prototype._detachCloseHandler=function(b){a(document.body).off("mousedown.select2."+b.id)},d.prototype.position=function(a,b){b.find(".selection").append(a)},d.prototype.destroy=function(){this._detachCloseHandler(this.container)},d.prototype.update=function(){throw new Error("The `update` method must be defined in child classes.");},d}),b.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(a,b,c){function e(){e.__super__.constructor.apply(this,arguments)}return c.Extend(e,b),e.prototype.render=function(){var a=e.__super__.render.call(this);return a.addClass("select2-selection--single"),a.html('<span class="select2-selection__rendered"><\/span><span class="select2-selection__arrow" role="presentation"><b role="presentation"><\/b><\/span>'),a},e.prototype.bind=function(a){var c=this,d;e.__super__.bind.apply(this,arguments);d=a.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",d).attr("role","textbox").attr("aria-readonly","true");this.$selection.attr("aria-labelledby",d);this.$selection.on("mousedown",function(a){1===a.which&&c.trigger("toggle",{originalEvent:a})});this.$selection.on("focus",function(){});this.$selection.on("blur",function(){});a.on("focus",function(){a.isOpen()||c.$selection.focus()})},e.prototype.clear=function(){var a=this.$selection.find(".select2-selection__rendered");a.empty();a.removeAttr("title")},e.prototype.display=function(a,b){var c=this.options.get("templateSelection");return this.options.get("escapeMarkup")(c(a,b))},e.prototype.selectionContainer=function(){return a("<span><\/span>")},e.prototype.update=function(a){if(0===a.length)return void this.clear();var b=a[0],c=this.$selection.find(".select2-selection__rendered"),d=this.display(b,c);c.empty().append(d);c.attr("title",b.title||b.text)},e}),b.define("select2/selection/multiple",["jquery","./base","../utils"],function(a,b,c){function d(){d.__super__.constructor.apply(this,arguments)}return c.Extend(d,b),d.prototype.render=function(){var a=d.__super__.render.call(this);return a.addClass("select2-selection--multiple"),a.html('<ul class="select2-selection__rendered"><\/ul>'),a},d.prototype.bind=function(){var f=this;d.__super__.bind.apply(this,arguments);this.$selection.on("click",function(a){f.trigger("toggle",{originalEvent:a})});this.$selection.on("click",".select2-selection__choice__remove",function(b){if(!f.options.get("disabled")){var d=a(this),e=d.parent(),g=c.GetData(e[0],"data");f.trigger("unselect",{originalEvent:b,data:g})}})},d.prototype.clear=function(){var a=this.$selection.find(".select2-selection__rendered");a.empty();a.removeAttr("title")},d.prototype.display=function(a,b){var c=this.options.get("templateSelection");return this.options.get("escapeMarkup")(c(a,b))},d.prototype.selectionContainer=function(){return a('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;<\/span><\/li>')},d.prototype.update=function(a){var b,d,h;if(this.clear(),0!==a.length){for(b=[],d=0;d<a.length;d++){var e=a[d],f=this.selectionContainer(),g=this.display(e,f);f.append(g);f.attr("title",e.title||e.text);c.StoreData(f[0],"data",e);b.push(f)}h=this.$selection.find(".select2-selection__rendered");c.appendMany(h,b)}},d}),b.define("select2/selection/placeholder",["../utils"],function(){function b(a,b,c){this.placeholder=this.normalizePlaceholder(c.get("placeholder"));a.call(this,b,c)}return b.prototype.normalizePlaceholder=function(a,b){return"string"==typeof b&&(b={id:"",text:b}),b},b.prototype.createPlaceholder=function(a,b){var c=this.selectionContainer();return c.html(this.display(b)),c.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),c},b.prototype.update=function(a,b){var c=1==b.length&&b[0].id!=this.placeholder.id,d;if(b.length>1||c)return a.call(this,b);this.clear();d=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(d)},b}),b.define("select2/selection/allowClear",["jquery","../keys","../utils"],function(a,b,c){function d(){}return d.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c);null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option.");this.$selection.on("mousedown",".select2-selection__clear",function(a){d._handleClear(a)});b.on("keypress",function(a){d._handleKeyboardClear(a,b)})},d.prototype._handleClear=function(a,b){var d,e,f,g,h;if(!this.options.get("disabled")&&(d=this.$selection.find(".select2-selection__clear"),0!==d.length)){if(b.stopPropagation(),e=c.GetData(d[0],"data"),f=this.$element.val(),this.$element.val(this.placeholder.id),g={data:e},this.trigger("clear",g),g.prevented)return void this.$element.val(f);for(h=0;h<e.length;h++)if(g={data:e[h]},this.trigger("unselect",g),g.prevented)return void this.$element.val(f);this.$element.trigger("change");this.trigger("toggle",{})}},d.prototype._handleKeyboardClear=function(a,c,d){d.isOpen()||c.which!=b.DELETE&&c.which!=b.BACKSPACE||this._handleClear(c)},d.prototype.update=function(b,d){if(b.call(this,d),!(this.$selection.find(".select2-selection__placeholder").length>0||0===d.length)){var e=a('<span class="select2-selection__clear">&times;<\/span>');c.StoreData(e[0],"data",d);this.$selection.find(".select2-selection__rendered").prepend(e)}},d}),b.define("select2/selection/search",["jquery","../utils","../keys"],function(a,b,c){function d(a,b,c){a.call(this,b,c)}return d.prototype.render=function(b){var c=a('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="textbox" aria-autocomplete="list" /><\/li>'),d;return this.$searchContainer=c,this.$search=c.find("input"),d=b.call(this),this._transferTabIndex(),d},d.prototype.bind=function(a,d,e){var f=this,g,h;a.call(this,d,e);d.on("open",function(){f.$search.trigger("focus")});d.on("close",function(){f.$search.val("");f.$search.removeAttr("aria-activedescendant");f.$search.trigger("focus")});d.on("enable",function(){f.$search.prop("disabled",!1);f._transferTabIndex()});d.on("disable",function(){f.$search.prop("disabled",!0)});d.on("focus",function(){f.$search.trigger("focus")});d.on("results:focus",function(a){f.$search.attr("aria-activedescendant",a.id)});this.$selection.on("focusin",".select2-search--inline",function(a){f.trigger("focus",a)});this.$selection.on("focusout",".select2-search--inline",function(a){f._handleBlur(a)});this.$selection.on("keydown",".select2-search--inline",function(a){var d,e;(a.stopPropagation(),f.trigger("keypress",a),f._keyUpPrevented=a.isDefaultPrevented(),a.which===c.BACKSPACE&&""===f.$search.val())&&(d=f.$searchContainer.prev(".select2-selection__choice"),d.length>0&&(e=b.GetData(d[0],"data"),f.searchRemoveChoice(e),a.preventDefault()))});g=document.documentMode;h=g&&g<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(){if(h)return void f.$selection.off("input.search input.searchcheck");f.$selection.off("keyup.search")});this.$selection.on("keyup.search input.search",".select2-search--inline",function(a){if(h&&"input"===a.type)return void f.$selection.off("input.search input.searchcheck");var b=a.which;b!=c.SHIFT&&b!=c.CTRL&&b!=c.ALT&&b!=c.TAB&&f.handleSearch(a)})},d.prototype._transferTabIndex=function(){this.$search.attr("tabindex",this.$selection.attr("tabindex"));this.$selection.attr("tabindex","-1")},d.prototype.createPlaceholder=function(a,b){this.$search.attr("placeholder",b.text)},d.prototype.update=function(a,b){var c=this.$search[0]==document.activeElement;this.$search.attr("placeholder","");a.call(this,b);this.$selection.find(".select2-selection__rendered").append(this.$searchContainer);this.resizeSearch();c&&this.$search.focus()},d.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var a=this.$search.val();this.trigger("query",{term:a})}this._keyUpPrevented=!1},d.prototype.searchRemoveChoice=function(a,b){this.trigger("unselect",{data:b});this.$search.val(b.text);this.handleSearch()},d.prototype.resizeSearch=function(){this.$search.css("width","25px");var a="";a=""!==this.$search.attr("placeholder")?this.$selection.find(".select2-selection__rendered").innerWidth():.75*(this.$search.val().length+1)+"em";this.$search.css("width",a)},d}),b.define("select2/selection/eventRelay",["jquery"],function(a){function b(){}return b.prototype.bind=function(b,c,d){var e=this,f=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],g=["opening","closing","selecting","unselecting","clearing"];b.call(this,c,d);c.on("*",function(b,c){if(-1!==a.inArray(b,f)){c=c||{};var d=a.Event("select2:"+b,{params:c});e.$element.trigger(d);-1!==a.inArray(b,g)&&(c.prevented=d.isDefaultPrevented())}})},b}),b.define("select2/translation",["jquery","require"],function(a,b){function c(a){this.dict=a||{}}return c.prototype.all=function(){return this.dict},c.prototype.get=function(a){return this.dict[a]},c.prototype.extend=function(b){this.dict=a.extend({},b.all(),this.dict)},c._cache={},c.loadPath=function(a){if(!(a in c._cache)){var d=b(a);c._cache[a]=d}return new c(c._cache[a])},c}),b.define("select2/diacritics",[],function(){return{"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"}}),b.define("select2/data/base",["../utils"],function(a){function b(){b.__super__.constructor.call(this)}return a.Extend(b,a.Observable),b.prototype.current=function(){throw new Error("The `current` method must be defined in child classes.");},b.prototype.query=function(){throw new Error("The `query` method must be defined in child classes.");},b.prototype.bind=function(){},b.prototype.destroy=function(){},b.prototype.generateResultId=function(b,c){var d=b.id+"-result-";return d+=a.generateChars(4),d+=null!=c.id?"-"+c.id.toString():"-"+a.generateChars(4),d},b}),b.define("select2/data/select",["./base","../utils","jquery"],function(a,b,c){function d(a,b){this.$element=a;this.options=b;d.__super__.constructor.call(this)}return b.Extend(d,a),d.prototype.current=function(a){var b=[],d=this;this.$element.find(":selected").each(function(){var a=c(this),e=d.item(a);b.push(e)});a(b)},d.prototype.select=function(a){var b=this,d;if(a.selected=!0,c(a.element).is("option"))return a.element.selected=!0,void this.$element.trigger("change");this.$element.prop("multiple")?this.current(function(d){var e=[],f,g;for(a=[a],a.push.apply(a,d),f=0;f<a.length;f++)g=a[f].id,-1===c.inArray(g,e)&&e.push(g);b.$element.val(e);b.$element.trigger("change")}):(d=a.id,this.$element.val(d),this.$element.trigger("change"))},d.prototype.unselect=function(a){var b=this;if(this.$element.prop("multiple")){if(a.selected=!1,c(a.element).is("option"))return a.element.selected=!1,void this.$element.trigger("change");this.current(function(d){for(var g,e=[],f=0;f<d.length;f++)g=d[f].id,g!==a.id&&-1===c.inArray(g,e)&&e.push(g);b.$element.val(e);b.$element.trigger("change")})}},d.prototype.bind=function(a){var c=this;this.container=a;a.on("select",function(a){c.select(a.data)});a.on("unselect",function(a){c.unselect(a.data)})},d.prototype.destroy=function(){this.$element.find("*").each(function(){b.RemoveData(this)})},d.prototype.query=function(a,b){var d=[],e=this;this.$element.children().each(function(){var b=c(this),f,g;(b.is("option")||b.is("optgroup"))&&(f=e.item(b),g=e.matches(a,f),null!==g&&d.push(g))});b({results:d})},d.prototype.addOptions=function(a){b.appendMany(this.$element,a)},d.prototype.option=function(a){var d,e,f;return a.children?(d=document.createElement("optgroup"),d.label=a.text):(d=document.createElement("option"),void 0!==d.textContent?d.textContent=a.text:d.innerText=a.text),void 0!==a.id&&(d.value=a.id),a.disabled&&(d.disabled=!0),a.selected&&(d.selected=!0),a.title&&(d.title=a.title),e=c(d),f=this._normalizeItem(a),f.element=d,b.StoreData(d,"data",f),e},d.prototype.item=function(a){var d={},h,i;if(null!=(d=b.GetData(a[0],"data")))return d;if(a.is("option"))d={id:a.val(),text:a.text(),disabled:a.prop("disabled"),selected:a.prop("selected"),title:a.prop("title")};else if(a.is("optgroup")){d={text:a.prop("label"),children:[],title:a.prop("title")};for(var e=a.children("option"),f=[],g=0;g<e.length;g++)h=c(e[g]),i=this.item(h),f.push(i);d.children=f}return d=this._normalizeItem(d),d.element=a[0],b.StoreData(a[0],"data",d),d},d.prototype._normalizeItem=function(a){a!==Object(a)&&(a={id:a,text:a});a=c.extend({},{text:""},a);return null!=a.id&&(a.id=a.id.toString()),null!=a.text&&(a.text=a.text.toString()),null==a._resultId&&a.id&&null!=this.container&&(a._resultId=this.generateResultId(this.container,a)),c.extend({},{selected:!1,disabled:!1},a)},d.prototype.matches=function(a,b){return this.options.get("matcher")(a,b)},d}),b.define("select2/data/array",["./select","../utils","jquery"],function(a,b,c){function d(a,b){var c=b.get("data")||[];d.__super__.constructor.call(this,a,b);this.addOptions(this.convertToOptions(c))}return b.Extend(d,a),d.prototype.select=function(a){var b=this.$element.find("option").filter(function(b,c){return c.value==a.id.toString()});0===b.length&&(b=this.option(a),this.addOptions(b));d.__super__.select.call(this,a)},d.prototype.convertToOptions=function(a){function d(a){return function(){return c(this).val()==a.id}}for(var j,o,p,e=this,f=this.$element.find("option"),g=f.map(function(){return e.item(c(this)).id}).get(),h=[],i=0;i<a.length;i++)if(j=this._normalizeItem(a[i]),c.inArray(j.id,g)>=0){var k=f.filter(d(j)),l=this.item(k),m=c.extend(!0,{},j,l),n=this.option(m);k.replaceWith(n)}else o=this.option(j),j.children&&(p=this.convertToOptions(j.children),b.appendMany(o,p)),h.push(o);return h},d}),b.define("select2/data/ajax",["./array","../utils","jquery"],function(a,b,c){function d(a,b){this.ajaxOptions=this._applyDefaults(b.get("ajax"));null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults);d.__super__.constructor.call(this,a,b)}return b.Extend(d,a),d.prototype._applyDefaults=function(a){var b={data:function(a){return c.extend({},a,{q:a.term})},transport:function(a,b,d){var e=c.ajax(a);return e.then(b),e.fail(d),e}};return c.extend({},b,a,!0)},d.prototype.processResults=function(a){return a},d.prototype.query=function(a,b){function d(){var d=f.transport(f,function(d){var f=e.processResults(d,a);e.options.get("debug")&&window.console&&console.error&&(f&&f.results&&c.isArray(f.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response."));b(f)},function(){"status"in d&&(0===d.status||"0"===d.status)||e.trigger("results:message",{message:"errorLoading"})});e._request=d}var e=this,f;null!=this._request&&(c.isFunction(this._request.abort)&&this._request.abort(),this._request=null);f=c.extend({type:"GET"},this.ajaxOptions);"function"==typeof f.url&&(f.url=f.url.call(this.$element,a));"function"==typeof f.data&&(f.data=f.data.call(this.$element,a));this.ajaxOptions.delay&&null!=a.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(d,this.ajaxOptions.delay)):d()},d}),b.define("select2/data/tags",["jquery"],function(a){function b(b,c,d){var e=d.get("tags"),f=d.get("createTag"),g,h;if(void 0!==f&&(this.createTag=f),g=d.get("insertTag"),void 0!==g&&(this.insertTag=g),b.call(this,c,d),a.isArray(e))for(h=0;h<e.length;h++){var i=e[h],j=this._normalizeItem(i),k=this.option(j);this.$element.append(k)}}return b.prototype.query=function(a,b,c){function d(a,f){for(var i,j,k,l,g=a.results,h=0;h<g.length;h++)if(i=g[h],j=null!=i.children&&!d({results:i.children},!0),(i.text||"").toUpperCase()===(b.term||"").toUpperCase()||j)return!f&&(a.data=g,void c(a));if(f)return!0;k=e.createTag(b);null!=k&&(l=e.option(k),l.attr("data-select2-tag",!0),e.addOptions([l]),e.insertTag(g,k));a.results=g;c(a)}var e=this;if(this._removeOldTags(),null==b.term||null!=b.page)return void a.call(this,b,c);a.call(this,b,d)},b.prototype.createTag=function(b,c){var d=a.trim(c.term);return""===d?null:{id:d,text:d}},b.prototype.insertTag=function(a,b,c){b.unshift(c)},b.prototype._removeOldTags=function(){this._lastTag;this.$element.find("option[data-select2-tag]").each(function(){this.selected||a(this).remove()})},b}),b.define("select2/data/tokenizer",["jquery"],function(a){function b(a,b,c){var d=c.get("tokenizer");void 0!==d&&(this.tokenizer=d);a.call(this,b,c)}return b.prototype.bind=function(a,b,c){a.call(this,b,c);this.$search=b.dropdown.$search||b.selection.$search||c.find(".select2-search__field")},b.prototype.query=function(b,c,d){function e(b){var c=g._normalizeItem(b),d;g.$element.find("option").filter(function(){return a(this).val()===c.id}).length||(d=g.option(c),d.attr("data-select2-tag",!0),g._removeOldTags(),g.addOptions([d]));f(c)}function f(a){g.trigger("select",{data:a})}var g=this,h;c.term=c.term||"";h=this.tokenizer(c,this.options,e);h.term!==c.term&&(this.$search.length&&(this.$search.val(h.term),this.$search.focus()),c.term=h.term);b.call(this,c,d)},b.prototype.tokenizer=function(b,c,d,e){for(var j,f=d.get("tokenSeparators")||[],g=c.term,h=0,i=this.createTag||function(a){return{id:a.term,text:a.term}};h<g.length;)if(j=g[h],-1!==a.inArray(j,f)){var k=g.substr(0,h),l=a.extend({},c,{term:k}),m=i(l);null!=m?(e(m),g=g.substr(h+1)||"",h=0):h++}else h++;return{term:g}},b}),b.define("select2/data/minimumInputLength",[],function(){function a(a,b,c){this.minimumInputLength=c.get("minimumInputLength");a.call(this,b,c)}return a.prototype.query=function(a,b,c){if(b.term=b.term||"",b.term.length<this.minimumInputLength)return void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:b.term,params:b}});a.call(this,b,c)},a}),b.define("select2/data/maximumInputLength",[],function(){function a(a,b,c){this.maximumInputLength=c.get("maximumInputLength");a.call(this,b,c)}return a.prototype.query=function(a,b,c){if(b.term=b.term||"",this.maximumInputLength>0&&b.term.length>this.maximumInputLength)return void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:b.term,params:b}});a.call(this,b,c)},a}),b.define("select2/data/maximumSelectionLength",[],function(){function a(a,b,c){this.maximumSelectionLength=c.get("maximumSelectionLength");a.call(this,b,c)}return a.prototype.query=function(a,b,c){var d=this;this.current(function(e){var f=null!=e?e.length:0;if(d.maximumSelectionLength>0&&f>=d.maximumSelectionLength)return void d.trigger("results:message",{message:"maximumSelected",args:{maximum:d.maximumSelectionLength}});a.call(d,b,c)})},a}),b.define("select2/dropdown",["jquery","./utils"],function(a,b){function c(a,b){this.$element=a;this.options=b;c.__super__.constructor.call(this)}return b.Extend(c,b.Observable),c.prototype.render=function(){var b=a('<span class="select2-dropdown"><span class="select2-results"><\/span><\/span>');return b.attr("dir",this.options.get("dir")),this.$dropdown=b,b},c.prototype.bind=function(){},c.prototype.position=function(){},c.prototype.destroy=function(){this.$dropdown.remove()},c}),b.define("select2/dropdown/search",["jquery","../utils"],function(a){function c(){}return c.prototype.render=function(b){var c=b.call(this),d=a('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="textbox" /><\/span>');return this.$searchContainer=d,this.$search=d.find("input"),c.prepend(d),c},c.prototype.bind=function(b,c,d){var e=this;b.call(this,c,d);this.$search.on("keydown",function(a){e.trigger("keypress",a);e._keyUpPrevented=a.isDefaultPrevented()});this.$search.on("input",function(){a(this).off("keyup")});this.$search.on("keyup input",function(a){e.handleSearch(a)});c.on("open",function(){e.$search.attr("tabindex",0);e.$search.focus();window.setTimeout(function(){e.$search.focus()},0)});c.on("close",function(){e.$search.attr("tabindex",-1);e.$search.val("");e.$search.blur()});c.on("focus",function(){c.isOpen()||e.$search.focus()});c.on("results:all",function(a){(null==a.query.term||""===a.query.term)&&(e.showSearch(a)?e.$searchContainer.removeClass("select2-search--hide"):e.$searchContainer.addClass("select2-search--hide"))})},c.prototype.handleSearch=function(){if(!this._keyUpPrevented){var b=this.$search.val();this.trigger("query",{term:b})}this._keyUpPrevented=!1},c.prototype.showSearch=function(){return!0},c}),b.define("select2/dropdown/hidePlaceholder",[],function(){function a(a,b,c,d){this.placeholder=this.normalizePlaceholder(c.get("placeholder"));a.call(this,b,c,d)}return a.prototype.append=function(a,b){b.results=this.removePlaceholder(b.results);a.call(this,b)},a.prototype.normalizePlaceholder=function(a,b){return"string"==typeof b&&(b={id:"",text:b}),b},a.prototype.removePlaceholder=function(a,b){for(var e,c=b.slice(0),d=b.length-1;d>=0;d--)e=b[d],this.placeholder.id===e.id&&c.splice(d,1);return c},a}),b.define("select2/dropdown/infiniteScroll",["jquery"],function(a){function b(a,b,c,d){this.lastParams={};a.call(this,b,c,d);this.$loadingMore=this.createLoadingMore();this.loading=!1}return b.prototype.append=function(a,b){this.$loadingMore.remove();this.loading=!1;a.call(this,b);this.showLoadingMore(b)&&this.$results.append(this.$loadingMore)},b.prototype.bind=function(b,c,d){var e=this;b.call(this,c,d);c.on("query",function(a){e.lastParams=a;e.loading=!0});c.on("query:append",function(a){e.lastParams=a;e.loading=!0});this.$results.on("scroll",function(){var b=a.contains(document.documentElement,e.$loadingMore[0]);!e.loading&&b&&e.$results.offset().top+e.$results.outerHeight(!1)+50>=e.$loadingMore.offset().top+e.$loadingMore.outerHeight(!1)&&e.loadMore()})},b.prototype.loadMore=function(){this.loading=!0;var b=a.extend({},{page:1},this.lastParams);b.page++;this.trigger("query:append",b)},b.prototype.showLoadingMore=function(a,b){return b.pagination&&b.pagination.more},b.prototype.createLoadingMore=function(){var b=a('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"><\/li>'),c=this.options.get("translations").get("loadingMore");return b.html(c(this.lastParams)),b},b}),b.define("select2/dropdown/attachBody",["jquery","../utils"],function(a,b){function c(b,c,d){this.$dropdownParent=d.get("dropdownParent")||a(document.body);b.call(this,c,d)}return c.prototype.bind=function(a,b,c){var d=this,e=!1;a.call(this,b,c);b.on("open",function(){d._showDropdown();d._attachPositioningHandler(b);e||(e=!0,b.on("results:all",function(){d._positionDropdown();d._resizeDropdown()}),b.on("results:append",function(){d._positionDropdown();d._resizeDropdown()}))});b.on("close",function(){d._hideDropdown();d._detachPositioningHandler(b)});this.$dropdownContainer.on("mousedown",function(a){a.stopPropagation()})},c.prototype.destroy=function(a){a.call(this);this.$dropdownContainer.remove()},c.prototype.position=function(a,b,c){b.attr("class",c.attr("class"));b.removeClass("select2");b.addClass("select2-container--open");b.css({position:"absolute",top:-999999});this.$container=c},c.prototype.render=function(b){var c=a("<span><\/span>"),d=b.call(this);return c.append(d),this.$dropdownContainer=c,c},c.prototype._hideDropdown=function(){this.$dropdownContainer.detach()},c.prototype._attachPositioningHandler=function(c,d){var e=this,f="scroll.select2."+d.id,g="resize.select2."+d.id,h="orientationchange.select2."+d.id,i=this.$container.parents().filter(b.hasScroll);i.each(function(){b.StoreData(this,"select2-scroll-position",{x:a(this).scrollLeft(),y:a(this).scrollTop()})});i.on(f,function(){var d=b.GetData(this,"select2-scroll-position");a(this).scrollTop(d.y)});a(window).on(f+" "+g+" "+h,function(){e._positionDropdown();e._resizeDropdown()})},c.prototype._detachPositioningHandler=function(c,d){var e="scroll.select2."+d.id,f="resize.select2."+d.id,g="orientationchange.select2."+d.id;this.$container.parents().filter(b.hasScroll).off(e);a(window).off(e+" "+f+" "+g)},c.prototype._positionDropdown=function(){var b=a(window),c=this.$dropdown.hasClass("select2-dropdown--above"),d=this.$dropdown.hasClass("select2-dropdown--below"),e=null,f=this.$container.offset(),g,n;f.bottom=f.top+this.$container.outerHeight(!1);g={height:this.$container.outerHeight(!1)};g.top=f.top;g.bottom=f.top+g.height;var h={height:this.$dropdown.outerHeight(!1)},i={top:b.scrollTop(),bottom:b.scrollTop()+b.height()},j=i.top<f.top-h.height,k=i.bottom>f.bottom+h.height,l={left:f.left,top:g.bottom},m=this.$dropdownParent;"static"===m.css("position")&&(m=m.offsetParent());n=m.offset();l.top-=n.top;l.left-=n.left;c||d||(e="below");k||!j||c?!j&&k&&c&&(e="below"):e="above";("above"==e||c&&"below"!==e)&&(l.top=g.top-n.top-h.height);null!=e&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+e),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+e));this.$dropdownContainer.css(l)},c.prototype._resizeDropdown=function(){var a={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(a.minWidth=a.width,a.position="relative",a.width="auto");this.$dropdown.css(a)},c.prototype._showDropdown=function(){this.$dropdownContainer.appendTo(this.$dropdownParent);this._positionDropdown();this._resizeDropdown()},c}),b.define("select2/dropdown/minimumResultsForSearch",[],function(){function a(b){for(var e,c=0,d=0;d<b.length;d++)e=b[d],e.children?c+=a(e.children):c++;return c}function b(a,b,c,d){this.minimumResultsForSearch=c.get("minimumResultsForSearch");this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0);a.call(this,b,c,d)}return b.prototype.showSearch=function(b,c){return!(a(c.data.results)<this.minimumResultsForSearch)&&b.call(this,c)},b}),b.define("select2/dropdown/selectOnClose",["../utils"],function(a){function b(){}return b.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c);b.on("close",function(a){d._handleSelectOnClose(a)})},b.prototype._handleSelectOnClose=function(b,c){var d,e,f;c&&null!=c.originalSelect2Event&&(d=c.originalSelect2Event,"select"===d._type||"unselect"===d._type)||(e=this.getHighlightedResults(),e.length<1||(f=a.GetData(e[0],"data"),null!=f.element&&f.element.selected||null==f.element&&f.selected||this.trigger("select",{data:f})))},b}),b.define("select2/dropdown/closeOnSelect",[],function(){function a(){}return a.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c);b.on("select",function(a){d._selectTriggered(a)});b.on("unselect",function(a){d._selectTriggered(a)})},a.prototype._selectTriggered=function(a,b){var c=b.originalEvent;c&&c.ctrlKey||this.trigger("close",{originalEvent:c,originalSelect2Event:b})},a}),b.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(a){var b=a.input.length-a.maximum,c="Please delete "+b+" character";return 1!=b&&(c+="s"),c},inputTooShort:function(a){return"Please enter "+(a.minimum-a.input.length)+" or more characters"},loadingMore:function(){return"Loading more results…"},maximumSelected:function(a){var b="You can only select "+a.maximum+" item";return 1!=a.maximum&&(b+="s"),b},noResults:function(){return"没有找到匹配项"},searching:function(){return"Searching…"}}}),b.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){function D(){this.reset()}return D.prototype.apply=function(l){var C,D,E,F,G,H,I,J,K,L,M,N,O,P;if((l=a.extend(!0,{},this.defaults,l),null==l.dataAdapter)&&((l.dataAdapter=null!=l.ajax?o:null!=l.data?n:m,l.minimumInputLength>0&&(l.dataAdapter=j.Decorate(l.dataAdapter,r)),l.maximumInputLength>0&&(l.dataAdapter=j.Decorate(l.dataAdapter,s)),l.maximumSelectionLength>0&&(l.dataAdapter=j.Decorate(l.dataAdapter,t)),l.tags&&(l.dataAdapter=j.Decorate(l.dataAdapter,p)),null==l.tokenSeparators&&null==l.tokenizer||(l.dataAdapter=j.Decorate(l.dataAdapter,q)),null!=l.query)&&(C=b(l.amdBase+"compat/query"),l.dataAdapter=j.Decorate(l.dataAdapter,C)),null!=l.initSelection&&(D=b(l.amdBase+"compat/initSelection"),l.dataAdapter=j.Decorate(l.dataAdapter,D))),(null==l.resultsAdapter&&(l.resultsAdapter=c,null!=l.ajax&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,x)),null!=l.placeholder&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,w)),l.selectOnClose&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,A))),null==l.dropdownAdapter)&&(l.multiple?l.dropdownAdapter=u:(E=j.Decorate(u,v),l.dropdownAdapter=E),(0!==l.minimumResultsForSearch&&(l.dropdownAdapter=j.Decorate(l.dropdownAdapter,z)),l.closeOnSelect&&(l.dropdownAdapter=j.Decorate(l.dropdownAdapter,B)),null!=l.dropdownCssClass||null!=l.dropdownCss||null!=l.adaptDropdownCssClass)&&(F=b(l.amdBase+"compat/dropdownCss"),l.dropdownAdapter=j.Decorate(l.dropdownAdapter,F)),l.dropdownAdapter=j.Decorate(l.dropdownAdapter,y)),null==l.selectionAdapter&&((l.selectionAdapter=l.multiple?e:d,null!=l.placeholder&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,f)),l.allowClear&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,g)),l.multiple&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,h)),null!=l.containerCssClass||null!=l.containerCss||null!=l.adaptContainerCssClass)&&(G=b(l.amdBase+"compat/containerCss"),l.selectionAdapter=j.Decorate(l.selectionAdapter,G)),l.selectionAdapter=j.Decorate(l.selectionAdapter,i)),"string"==typeof l.language&&(l.language.indexOf("-")>0?(H=l.language.split("-"),I=H[0],l.language=[l.language,I]):l.language=[l.language]),a.isArray(l.language)){for(J=new k,l.language.push("en"),K=l.language,L=0;L<K.length;L++){M=K[L];N={};try{N=k.loadPath(M)}catch(a){try{M=this.defaults.amdLanguageBase+M;N=k.loadPath(M)}catch(a){l.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+M+'" could not be automatically loaded. A fallback will be used instead.');continue}}J.extend(N)}l.translations=J}else O=k.loadPath(this.defaults.amdLanguageBase+"en"),P=new k(l.language),P.extend(O),l.translations=P;return l},D.prototype.reset=function(){function b(a){function b(a){return l[a]||a}return a.replace(/[^\u0000-\u007E]/g,b)}function c(d,e){var f,g,h,i;if(""===a.trim(d.term))return e;if(e.children&&e.children.length>0){for(f=a.extend(!0,{},e),g=e.children.length-1;g>=0;g--)null==c(d,e.children[g])&&f.children.splice(g,1);return f.children.length>0?f:c(d,f)}return h=b(e.text).toUpperCase(),i=b(d.term).toUpperCase(),h.indexOf(i)>-1?e:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:j.escapeMarkup,language:C,matcher:c,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(a){return a},templateResult:function(a){return a.text},templateSelection:function(a){return a.text},theme:"default",width:"resolve"}},D.prototype.set=function(b,c){var d=a.camelCase(b),e={},f;e[d]=c;f=j._convertData(e);a.extend(!0,this.defaults,f)},new D}),b.define("select2/options",["require","jquery","./defaults","./utils"],function(a,b,c,d){function e(b,e){if(this.options=b,null!=e&&this.fromElement(e),this.options=c.apply(this.options),e&&e.is("input")){var f=a(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=d.Decorate(this.options.dataAdapter,f)}}return e.prototype.fromElement=function(a){var c=["select2"],e,f,g;null==this.options.multiple&&(this.options.multiple=a.prop("multiple"));null==this.options.disabled&&(this.options.disabled=a.prop("disabled"));null==this.options.language&&(a.prop("lang")?this.options.language=a.prop("lang").toLowerCase():a.closest("[lang]").prop("lang")&&(this.options.language=a.closest("[lang]").prop("lang")));null==this.options.dir&&(this.options.dir=a.prop("dir")?a.prop("dir"):a.closest("[dir]").prop("dir")?a.closest("[dir]").prop("dir"):"ltr");a.prop("disabled",this.options.disabled);a.prop("multiple",this.options.multiple);d.GetData(a[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),d.StoreData(a[0],"data",d.GetData(a[0],"select2Tags")),d.StoreData(a[0],"tags",!0));d.GetData(a[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),a.attr("ajax--url",d.GetData(a[0],"ajaxUrl")),d.StoreData(a[0],"ajax-Url",d.GetData(a[0],"ajaxUrl")));e={};e=b.fn.jquery&&"1."==b.fn.jquery.substr(0,2)&&a[0].dataset?b.extend(!0,{},a[0].dataset,d.GetData(a[0])):d.GetData(a[0]);f=b.extend(!0,{},e);f=d._convertData(f);for(g in f)b.inArray(g,c)>-1||(b.isPlainObject(this.options[g])?b.extend(this.options[g],f[g]):this.options[g]=f[g]);return this},e.prototype.get=function(a){return this.options[a]},e.prototype.set=function(a,b){this.options[a]=b},e}),b.define("select2/core",["jquery","./options","./utils","./keys"],function(a,b,c,d){var e=function(a,d){var f,g,h,i,j,k,l;null!=c.GetData(a[0],"select2")&&c.GetData(a[0],"select2").destroy();this.$element=a;this.id=this._generateId(a);d=d||{};this.options=new b(d,a);e.__super__.constructor.call(this);f=a.attr("tabindex")||0;c.StoreData(a[0],"old-tabindex",f);a.attr("tabindex","-1");g=this.options.get("dataAdapter");this.dataAdapter=new g(a,this.options);h=this.render();this._placeContainer(h);i=this.options.get("selectionAdapter");this.selection=new i(a,this.options);this.$selection=this.selection.render();this.selection.position(this.$selection,h);j=this.options.get("dropdownAdapter");this.dropdown=new j(a,this.options);this.$dropdown=this.dropdown.render();this.dropdown.position(this.$dropdown,h);k=this.options.get("resultsAdapter");this.results=new k(a,this.options,this.dataAdapter);this.$results=this.results.render();this.results.position(this.$results,this.$dropdown);l=this;this._bindAdapters();this._registerDomEvents();this._registerDataEvents();this._registerSelectionEvents();this._registerDropdownEvents();this._registerResultsEvents();this._registerEvents();this.dataAdapter.current(function(a){l.trigger("selection:update",{data:a})});a.addClass("select2-hidden-accessible");a.attr("aria-hidden","true");this._syncAttributes();c.StoreData(a[0],"select2",this)};return c.Extend(e,c.Observable),e.prototype._generateId=function(a){var b="";return b=null!=a.attr("id")?a.attr("id"):null!=a.attr("name")?a.attr("name")+"-"+c.generateChars(2):c.generateChars(4),b=b.replace(/(:|\.|\[|\]|,)/g,""),b="select2-"+b},e.prototype._placeContainer=function(a){a.insertAfter(this.$element);var b=this._resolveWidth(this.$element,this.options.get("width"));null!=b&&a.css("width",b)},e.prototype._resolveWidth=function(a,b){var d,e,f,j,k;if("resolve"==b)return d=this._resolveWidth(a,"style"),null!=d?d:this._resolveWidth(a,"element");if("element"==b)return e=a.outerWidth(!1),e<=0?"auto":e+"px";if("style"==b){if(f=a.attr("style"),"string"!=typeof f)return null;for(var g=f.split(";"),h=0,i=g.length;h<i;h+=1)if(j=g[h].replace(/\s/g,""),k=j.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==k&&k.length>=1)return k[1];return null}return b},e.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container);this.selection.bind(this,this.$container);this.dropdown.bind(this,this.$container);this.results.bind(this,this.$container)},e.prototype._registerDomEvents=function(){var b=this,d;this.$element.on("change.select2",function(){b.dataAdapter.current(function(a){b.trigger("selection:update",{data:a})})});this.$element.on("focus.select2",function(a){b.trigger("focus",a)});this._syncA=c.bind(this._syncAttributes,this);this._syncS=c.bind(this._syncSubtree,this);this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=d?(this._observer=new d(function(c){a.each(c,b._syncA);a.each(c,b._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",b._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",b._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",b._syncS,!1))},e.prototype._registerDataEvents=function(){var a=this;this.dataAdapter.on("*",function(b,c){a.trigger(b,c)})},e.prototype._registerSelectionEvents=function(){var b=this,c=["toggle","focus"];this.selection.on("toggle",function(){b.toggleDropdown()});this.selection.on("focus",function(a){b.focus(a)});this.selection.on("*",function(d,e){-1===a.inArray(d,c)&&b.trigger(d,e)})},e.prototype._registerDropdownEvents=function(){var a=this;this.dropdown.on("*",function(b,c){a.trigger(b,c)})},e.prototype._registerResultsEvents=function(){var a=this;this.results.on("*",function(b,c){a.trigger(b,c)})},e.prototype._registerEvents=function(){var a=this;this.on("open",function(){a.$container.addClass("select2-container--open")});this.on("close",function(){a.$container.removeClass("select2-container--open")});this.on("enable",function(){a.$container.removeClass("select2-container--disabled")});this.on("disable",function(){a.$container.addClass("select2-container--disabled")});this.on("blur",function(){a.$container.removeClass("select2-container--focus")});this.on("query",function(b){a.isOpen()||a.trigger("open",{});this.dataAdapter.query(b,function(c){a.trigger("results:all",{data:c,query:b})})});this.on("query:append",function(b){this.dataAdapter.query(b,function(c){a.trigger("results:append",{data:c,query:b})})});this.on("keypress",function(b){var c=b.which;a.isOpen()?c===d.ESC||c===d.TAB||c===d.UP&&b.altKey?(a.close(),b.preventDefault()):c===d.ENTER?(a.trigger("results:select",{}),b.preventDefault()):c===d.SPACE&&b.ctrlKey?(a.trigger("results:toggle",{}),b.preventDefault()):c===d.UP?(a.trigger("results:previous",{}),b.preventDefault()):c===d.DOWN&&(a.trigger("results:next",{}),b.preventDefault()):(c===d.ENTER||c===d.SPACE||c===d.DOWN&&b.altKey)&&(a.open(),b.preventDefault())})},e.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled"));this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},e.prototype._syncSubtree=function(a,b){var c=!1,d=this,e,f;if(!a||!a.target||"OPTION"===a.target.nodeName||"OPTGROUP"===a.target.nodeName){if(b)if(b.addedNodes&&b.addedNodes.length>0)for(e=0;e<b.addedNodes.length;e++)f=b.addedNodes[e],f.selected&&(c=!0);else b.removedNodes&&b.removedNodes.length>0&&(c=!0);else c=!0;c&&this.dataAdapter.current(function(a){d.trigger("selection:update",{data:a})})}},e.prototype.trigger=function(a,b){var c=e.__super__.trigger,d={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"},f,g;if((void 0===b&&(b={}),a in d)&&(f=d[a],g={prevented:!1,name:a,args:b},c.call(this,f,g),g.prevented))return void(b.prevented=!0);c.call(this,a,b)},e.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},e.prototype.open=function(){this.isOpen()||this.trigger("query",{})},e.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},e.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},e.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},e.prototype.focus=function(){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},e.prototype.enable=function(a){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.');null!=a&&0!==a.length||(a=[!0]);var b=!a[0];this.$element.prop("disabled",b)},e.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var a=[];return this.dataAdapter.current(function(b){a=b}),a},e.prototype.val=function(b){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==b||0===b.length)return this.$element.val();var c=b[0];a.isArray(c)&&(c=a.map(c,function(a){return a.toString()}));this.$element.val(c).trigger("change")},e.prototype.destroy=function(){this.$container.remove();this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA);null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1));this._syncA=null;this._syncS=null;this.$element.off(".select2");this.$element.attr("tabindex",c.GetData(this.$element[0],"old-tabindex"));this.$element.removeClass("select2-hidden-accessible");this.$element.attr("aria-hidden","false");c.RemoveData(this.$element[0]);this.dataAdapter.destroy();this.selection.destroy();this.dropdown.destroy();this.results.destroy();this.dataAdapter=null;this.selection=null;this.dropdown=null;this.results=null},e.prototype.render=function(){var b=a('<span class="select2 select2-container"><span class="selection"><\/span><span class="dropdown-wrapper" aria-hidden="true"><\/span><\/span>');return b.attr("dir",this.options.get("dir")),this.$container=b,this.$container.addClass("select2-container--"+this.options.get("theme")),c.StoreData(b[0],"element",this.$element),b},e}),b.define("jquery-mousewheel",["jquery"],function(a){return a}),b.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function(a,b,c,d,e){if(null==a.fn.select2){var f=["open","close","destroy"];a.fn.select2=function(b){if("object"==typeof(b=b||{}))return this.each(function(){var d=a.extend(!0,{},b);new c(a(this),d)}),this;if("string"==typeof b){var d,g=Array.prototype.slice.call(arguments,1);return this.each(function(){var a=e.GetData(this,"select2");null==a&&window.console&&console.error&&console.error("The select2('"+b+"') method was called on an element that is not using Select2.");d=a[b].apply(a,g)}),a.inArray(b,f)>-1?this:d}throw new Error("Invalid arguments for Select2: "+b);}}return null==a.fn.select2.defaults&&(a.fn.select2.defaults=d),c}),{define:b.define,require:b.require}}(),c=b.require("jquery.select2");return a.fn.select2.amd=b,c});
//# sourceMappingURL=site.min.js.map